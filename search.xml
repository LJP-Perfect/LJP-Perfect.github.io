<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>First Vlog</title>
      <link href="/First_Vlog.html"/>
      <url>/First_Vlog.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><p>ç¬¬ä¸€æ¬¡å‚åŠ å¿—æ„¿è€…æ´»åŠ¨ï¼Œå»æ­å·å›¾ä¹¦é¦†åšäº†ä¸‰å°æ—¶ã€‚ä¸€è·¯ä¸Šâ€œå·å·â€æ‹äº†äº›ç´ æï¼Œç„¶åå“å“å“å“å‰ªå‡ºäº†ç¬¬ä¸€ä¸ªVlogã€‚<br><a id="more"></a></p><video poster="http://freelee-vlog.oss-cn-beijing.aliyuncs.com/%E5%B0%81%E9%9D%A2.png" src="http://freelee-vlog.oss-cn-beijing.aliyuncs.com/2019_04_03_22_13_IMG_0939.MOV" style="max-height:100%;max-width:100%;display:block;margin-left:auto;margin-right:auto" controls loop preload="meta">Your browser does not support the video tag.</video>]]></content>
      
      <categories>
          
          <category> ç”Ÿæ´» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vlog </tag>
            
            <tag> æ­å·å›¾ä¹¦é¦† </tag>
            
            <tag> å¿—æ„¿è€… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä½ å¥½ï¼Œé™ˆåŒå­¦</title>
      <link href="/Nicetomeetyou.html"/>
      <url>/Nicetomeetyou.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><p><br></p><div><meting-js server="netease" type="playlist" autoplay id="2752464015"><br></meting-js></div><blockquote><h4 id="åºç« -Prologue"><a href="#åºç« -Prologue" class="headerlink" title="åºç«  Prologue"></a>åºç«  Prologue</h4></blockquote><p><img src="http://freelee-blog.oss-cn-beijing.aliyuncs.com/%E5%8B%95%E6%BC%AB%E5%91%8A%E7%99%BD-1170x590.jpg"></p><p>â€”&nbsp;&nbsp;&nbsp;&nbsp;â€æˆ‘å–œæ¬¢ä½ â€</p><p>â€”&nbsp;&nbsp;&nbsp;&nbsp;â€å¥½å•Šâ€</p><blockquote><h4 id="æ¡çº¦-Principle"><a href="#æ¡çº¦-Principle" class="headerlink" title="æ¡çº¦ Principle"></a>æ¡çº¦ Principle</h4></blockquote><p>æœªå®šæš‚æ— </p><blockquote><h4 id="æ—¥å¸¸-Daliy"><a href="#æ—¥å¸¸-Daliy" class="headerlink" title="æ—¥å¸¸ Daliy"></a>æ—¥å¸¸ Daliy</h4></blockquote><p><code>4æœˆ10æ—¥ å¤šäº‘è½¬å°é›¨ æ˜ŸæœŸä¸‰</code></p><p>&emsp;é™ˆåŒå­¦è¯´æ™šä¸Šè·‘å®Œæ­¥è¦åšå¥½å¿ƒç†å‡†å¤‡ï¼Œä¸€å†å¼ºè°ƒä¸è¦è®©æˆ‘æŠ±æœŸå¾…ã€‚å¿ƒæƒ³è‚¯å®šä¹Ÿä¸ä¼šæ˜¯ä»€ä¹ˆåäº‹ï¼ŒæŠ±ä¸€ç‚¹æœŸå¾…è¿˜æ˜¯å¯ä»¥çš„ï¼Œä¹Ÿä¸å¤šå°±ä¸€ç‚¹ç‚¹ã€‚æœ€åå¥¹æ…¢æ…¢ä»ä¹¦åŒ…é‡Œæ‹¿å‡ºä¸€å¼ çº¸æ¡ï¼Œä¸å¯¹ï¼Œåº”è¯¥æ˜¯ä¸€å¼ A4çº¸ï¼Œè®©å›å»å†æ‹†ï¼Œèµ°å‰å˜±å’æˆ‘ä¸è¦æŠ±æœŸå¾…ã€‚â€˜è¿™ä¹ˆå¤§çš„çº¸ï¼Œä¸€å®šå†™äº†ä¸å°‘ä¸œè¥¿â€˜æš—æš—ç›˜ç®—ç€ï¼Œæ‰“å¼€ä¸€çœ‹ã€‚å“‡ï¼ï¼ï¼</p><div align="center"><img src="http://freelee-blog.oss-cn-beijing.aliyuncs.com/QQ%E5%9B%BE%E7%89%8720190411181101.jpg" width="400"></div><br>&emsp;emmmï¼Œè¿˜çœŸçš„æ˜¯ä¸€ç‚¹ç‚¹ç‚¹éƒ½æ²¡æœ‰å‘¢ï¼ï¼ï¼<br><br><div align="center"><img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1554988214972&di=5859846f6e4070ec809b8097eee20485&imgtype=0&src=http%3A%2F%2Fimg.mp.sohu.com%2Fq_mini%2Cc_zoom%2Cw_640%2Fupload%2F20170629%2Fa9647e4a89d64ccea9b47ef3e941066f_th.jpg" width="100"></div><p><br><br><code>4æœˆ11æ—¥ é˜´ æ˜ŸæœŸå››</code></p><p>&emsp;ä»Šæ™šå……æ»¡æ•´ä¸ªæ“åœºçš„å¤§æ¦‚åªæœ‰é™ˆåŒå­¦å’Œæˆ‘çš„å“ˆå“ˆå“ˆï¼Œå’Œï¼ˆä¸€è„¸å‡é‡å¤§çˆ·è“ç‰™è€³æœºä¸­çš„ï¼‰ã€Šå°è·³è›™ã€‹äº†å§ï¼Œå“ˆå“ˆå“ˆå—ï¼<br><br><br><code>4æœˆ12æ—¥ æ™´ æ˜ŸæœŸäº”</code></p><p>&emsp;ä»Šå¤©å‘ç”Ÿäº†ä¸€ä»¶æ‚²ä¼¤çš„äº‹ï¼šçªç„¶æƒ³èµ·æ¥Uç›˜è½åœ¨ä¸Šè¡£å£è¢‹é‡Œè¢«æˆ‘æ”¾è¿›æ´—è¡£æœºé‡Œæ´—äº†ï¼Œç„¶åå‘ç”Ÿäº†ä¸€ä»¶æ¯”æ‚²ä¼¤æ›´æ‚²ä¼¤çš„äº‹ï¼šæˆ‘å›å»æ‰¾ä¸Šè¡£å£è¢‹å‘ç°ç©ºï¼ç©ºï¼å¦‚ï¼ä¹Ÿï¼æˆ‘ä»¥åå†ä¹Ÿä¸ä¹°äº†ğŸ˜­<br>&emsp;è¿™æ ·å­çš„è¯æˆ‘åªèƒ½æ¬ºè´Ÿæ¬ºè´Ÿé™ˆåŒå­¦äº†ï¼Œç«™ä½åˆ«è·‘ï¼Œæ”¾å­¦åæ“åœºè§ã€‚<br><br></p><blockquote><h4 id="è®°å½•-Memory"><a href="#è®°å½•-Memory" class="headerlink" title="è®°å½• Memory"></a>è®°å½• Memory</h4></blockquote><p>æš‚æ— ï¼ˆæˆ‘è¿™å€’æ˜¯æœ‰ä¸€å¼ é™ˆåŒå­¦çš„â€œå†™çœŸâ€ï¼ˆåç¬‘ï¼‰ï¼‰</p><blockquote><h4 id="è®¡åˆ’-Schedule"><a href="#è®¡åˆ’-Schedule" class="headerlink" title="è®¡åˆ’ Schedule"></a>è®¡åˆ’ Schedule</h4></blockquote><p><img src="http://freelee-blog.oss-cn-beijing.aliyuncs.com/%E6%97%85%E6%B8%B8.png" width="30">&nbsp;&nbsp;äº”ä¸€(5.3-5.5)æ¸¸ç© æ¨ªåº— æµ™æ±Ÿé‡‘å</p><p><br></p><hr><blockquote><p>Story to be continued</p></blockquote>]]></content>
      
      <categories>
          
          <category> ç”Ÿæ´» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”Ÿæ´» </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å¾®æœåŠ¡é¡¹ç›®åˆæ­¥æ­å»º</title>
      <link href="/cloud.html"/>
      <url>/cloud.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><p>ä¸€ä¸ªåˆæ­¥çš„å¾®æœåŠ¡é¡¹ç›®ï¼Œdockeréƒ¨ç½²ã€‚åŸºäºSpringBootå’ŒSpringCloudæ•´åˆShiroã€JWTã€zuulã€Eurekaã€dockerã€nginxç­‰æŠ€æœ¯ã€‚</p><a id="more"></a><h2 id="é¡¹ç›®ç®€ä»‹"><a href="#é¡¹ç›®ç®€ä»‹" class="headerlink" title="é¡¹ç›®ç®€ä»‹"></a>é¡¹ç›®ç®€ä»‹</h2><p>è¿™ä¸ªå°é¡¹ç›®ç›®å‰åˆæ­¥æ­å»ºå¥½äº†å¾®æœåŠ¡è„šæ‰‹æ¶çš„ä¸€éƒ¨åˆ†ã€‚ä½¿ç”¨shiro+jwtæ„å»ºé‰´æƒä½“ç³»ï¼Œspring cloud zuulåšAPIç½‘å…³è¿›è¡Œè·¯ç”±è½¬å‘ï¼Œnginxé€šè¿‡åå‘ä»£ç†å¯¹ç½‘å…³è¿›è¡Œé«˜å¯ç”¨å’Œè´Ÿè½½å‡è¡¡å’Œé™æ€åŒ–ï¼ŒEurekaè¿›è¡ŒæœåŠ¡æ²»ç†ï¼ˆFeignè¿›è¡ŒæœåŠ¡è°ƒç”¨ï¼‰ã€‚<a href="https://github.com/LJP-Perfect/service-outsourcing/tree/master/cloud-app" target="_blank" rel="noopener">æºç åœ°å€</a></p><h2 id="æŠ€æœ¯é€‰å‹"><a href="#æŠ€æœ¯é€‰å‹" class="headerlink" title="æŠ€æœ¯é€‰å‹"></a>æŠ€æœ¯é€‰å‹</h2><ul><li>SpringBoot 2.0.4.RELEASE</li><li>SpringCloud Finchley.M9</li><li>Shiro 1.4.0</li><li>JWT 3.4.0</li><li>Maven 3.5.4</li><li>Jdk 8</li></ul><h2 id="é¡¹ç›®å…³é”®"><a href="#é¡¹ç›®å…³é”®" class="headerlink" title="é¡¹ç›®å…³é”®"></a>é¡¹ç›®å…³é”®</h2><p>é¡¹ç›®ä½¿ç”¨shiro+jwtçš„é‰´æƒæœºåˆ¶ï¼Œé€šè¿‡JWTFilterå°†jwtæ•´åˆåˆ°shiroï¼ŒJWTTokenå­˜æ”¾ç”¨æˆ·åã€‚</p><p><code>JWTFilteréƒ¨åˆ†ä»£ç </code></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">isAccessAllowed</span><span class="token punctuation">(</span>ServletRequest request<span class="token punctuation">,</span> ServletResponse response<span class="token punctuation">,</span> Object mappedValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isLoginAttempt</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">try</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//æ£€æŸ¥token</span>                <span class="token function">executeLogin</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//tokené”™è¯¯</span>                <span class="token function">responseError</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//è¯·æ±‚å¤´ä¸å­˜åœ¨Tokenï¼Œå¯èƒ½æ˜¯æœªç™»å½•æ—¶ï¼ˆæ¸¸å®¢ï¼‰çš„è®¿é—®çŠ¶æ€ï¼Œåˆ™æ— éœ€æ£€æŸ¥token</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p>shiroä¸­æ·»åŠ JWTFilterï¼Œå¯¹æ‰€æœ‰ä¹‹å‰ï¼ˆå…¶ä»–è¿‡æ»¤å™¨ï¼‰æœªåŒ¹é…åˆ°çš„è¯·æ±‚è¿›è¡Œè¿‡æ»¤ã€‚</p><p><code>ShiroConfigéƒ¨åˆ†ä»£ç </code></p><pre class=" language-java"><code class="language-java">    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> ShiroFilterFactoryBean <span class="token function">shiroFilter</span><span class="token punctuation">(</span>SecurityManager securityManager<span class="token punctuation">)</span><span class="token punctuation">{</span>        ShiroFilterFactoryBean filterFactoryBean<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ShiroFilterFactoryBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Filter<span class="token operator">></span> filterMap<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        filterMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"jwt"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">JWTFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        filterFactoryBean<span class="token punctuation">.</span><span class="token function">setFilters</span><span class="token punctuation">(</span>filterMap<span class="token punctuation">)</span><span class="token punctuation">;</span>        filterFactoryBean<span class="token punctuation">.</span><span class="token function">setSecurityManager</span><span class="token punctuation">(</span>securityManager<span class="token punctuation">)</span><span class="token punctuation">;</span>        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>String<span class="token operator">></span> filterChainDefinitionMap<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        filterChainDefinitionMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"/logout"</span><span class="token punctuation">,</span><span class="token string">"anon"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        filterChainDefinitionMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">,</span><span class="token string">"anon"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        filterChainDefinitionMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">,</span><span class="token string">"jwt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        filterFactoryBean<span class="token punctuation">.</span><span class="token function">setLoginUrl</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        filterFactoryBean<span class="token punctuation">.</span><span class="token function">setSuccessUrl</span><span class="token punctuation">(</span><span class="token string">"/index"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        filterFactoryBean<span class="token punctuation">.</span><span class="token function">setUnauthorizedUrl</span><span class="token punctuation">(</span><span class="token string">"/403"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        filterFactoryBean<span class="token punctuation">.</span><span class="token function">setFilterChainDefinitionMap</span><span class="token punctuation">(</span>filterChainDefinitionMap<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> filterFactoryBean<span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><h2 id="é¡¹ç›®å‡ºç°çš„BUG"><a href="#é¡¹ç›®å‡ºç°çš„BUG" class="headerlink" title="é¡¹ç›®å‡ºç°çš„BUG"></a>é¡¹ç›®å‡ºç°çš„BUG</h2><h4 id="æ‰“åŒ…æ—¶ï¼ŒæŠ¥ç¼ºå°‘å…¬å…±æ¨¡å—jaråŒ…çš„é”™è¯¯ã€‚"><a href="#æ‰“åŒ…æ—¶ï¼ŒæŠ¥ç¼ºå°‘å…¬å…±æ¨¡å—jaråŒ…çš„é”™è¯¯ã€‚" class="headerlink" title="æ‰“åŒ…æ—¶ï¼ŒæŠ¥ç¼ºå°‘å…¬å…±æ¨¡å—jaråŒ…çš„é”™è¯¯ã€‚"></a>æ‰“åŒ…æ—¶ï¼ŒæŠ¥ç¼ºå°‘å…¬å…±æ¨¡å—jaråŒ…çš„é”™è¯¯ã€‚</h4><p>å…¬å…±æ¨¡å—ä¸éœ€è¦æ‰“åŒ…ï¼Œæ‰€ä»¥ä¸éœ€è¦æ·»åŠ mavenæ’ä»¶ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œå› ä¸ºå…¶ä»–æ¨¡å—åœ¨æ‰“åŒ…çš„æ—¶å€™ä¼šè‡ªåŠ¨æ·»åŠ ä¾èµ–è¿›å»ï¼Œå¦‚æœè¿™é‡Œæ‰“åŒ…äº†ï¼Œå…¶ä»–çš„æ¨¡å—å°±æ‰¾ä¸åˆ°è¯¥ä¾èµ–äº†ã€‚</p><p>çˆ¶é¡¹ç›®æ·»åŠ springbootçš„mavenæ’ä»¶æ‰“åŒ…æ—¶ä¼šæŠ¥Unable to find main classã€‚</p><pre class=" language-verilog"><code class="language-verilog"><span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> Failed to execute goal org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">:</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>maven<span class="token operator">-</span>plugin<span class="token punctuation">:</span><span class="token number">2.0</span><span class="token punctuation">.</span><span class="token number">4</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">:</span>repackage <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span> on project common<span class="token operator">-</span>util<span class="token punctuation">:</span> Execution <span class="token keyword">default</span> of goal org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">:</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>maven<span class="token operator">-</span>plugin<span class="token punctuation">:</span><span class="token number">2.0</span><span class="token punctuation">.</span><span class="token number">4</span><span class="token punctuation">.</span>RELEASE<span class="token punctuation">:</span>repackage failed<span class="token punctuation">:</span> Unable to find main <span class="token keyword">class</span></code></pre><p>æ”¹æˆä»¥ä¸‹çš„ç¼–è¯‘å’Œæµ‹è¯•çš„mavenæ’ä»¶ï¼Œé¡¹ç›®å¯ä»¥æ‰“åŒ…æˆåŠŸã€‚è¿™ä¸ªé—®é¢˜è¿˜æ²¡æœ‰æ‰¾åˆ°åˆç†çš„è§£é‡Šæ–¹æ¡ˆï¼Œæˆ‘æƒ³å¯èƒ½æ˜¯å› ä¸ºspring-boot-maven-pluginè¦æ‰“åŒ…æˆå¯æ‰§è¡ŒjaråŒ…ï¼Œè€Œå…¬å…±æ¨¡å—é‡Œæ˜¯æ²¡æœ‰å¯åŠ¨ç±»ï¼ˆmain classï¼‰çš„ï¼Œæ‰€ä»¥ä½¿ç”¨æ­¤æ’ä»¶ä¼šæŠ¥é”™ã€‚</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">></span></span>${java.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">></span></span>${java.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-surefire-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.19.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>skipTests</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>skipTests</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--é»˜è®¤å…³æ‰å•å…ƒæµ‹è¯• --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span></code></pre><p>å­æ¨¡å—çš„ä¾èµ–ä¸­åŠ å…¥docker-maven-pluginçš„æ’ä»¶ã€‚æ­¤æ’ä»¶å¯ä»¥å¿«é€Ÿçš„æ‰“åŒ…é•œåƒã€ä¸Šä¼ é•œåƒç­‰ã€‚</p><p>æœ€å¥½åŠ å…¥spring-boot-maven-pluginæ’ä»¶ï¼Œæˆ‘è®°å¾—æ‰“åŒ…è¿‡ç¨‹ä¸­å‡ºç°è¿‡é—®é¢˜å°±æ˜¯ç¼ºå°‘è¿™ä¸ªæ’ä»¶çš„åŸå› ï¼ˆå¥½åƒæ˜¯ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œè®°ä¸å¤ªæ¸…äº†ï¼‰ã€‚</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.spotify<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>docker-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>build-image<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">></span></span>package<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">></span></span>build<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>imageName</span><span class="token punctuation">></span></span>${project.parent.artifactId}/${project.artifactId}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>imageName</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dockerHost</span><span class="token punctuation">></span></span> http://192.168.43.2:2375<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dockerHost</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dockerDirectory</span><span class="token punctuation">></span></span>${project.basedir}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dockerDirectory</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>targetPath</span><span class="token punctuation">></span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>targetPath</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">></span></span>${project.build.directory}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>${project.build.finalName}.jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.httpcomponents<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>httpclient<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.5.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span></code></pre><h4 id="dockerä¸èƒ½ä½¿ç”¨localhost"><a href="#dockerä¸èƒ½ä½¿ç”¨localhost" class="headerlink" title="dockerä¸èƒ½ä½¿ç”¨localhost"></a>dockerä¸èƒ½ä½¿ç”¨localhost</h4><p>å› ä¸º bridge æ˜¯ Docker é»˜è®¤çš„ç½‘ç»œæ¨¡å¼ï¼Œæ¢å¥è¯è¯´ï¼Œæˆ‘ä¸€ä¸ª host ä¸Šçš„å„ä¸ª container ä» docker è·å–çš„ IP éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼ˆåœ¨ä¸»æœºç¼–è¯‘éƒ¨ç½²åå¤§å®¶éƒ½æ˜¯ localhostï¼Œä½†æ˜¯åœ¨ docker é‡Œé¢æƒ…å†µå°±ä¸ä¸€æ ·äº†ï¼‰ã€‚è§£å†³æ–¹æ³•åˆ©ç”¨dockerçš„ä¸»æœºåï¼Œä¸ºeurekaçš„å®¹å™¨é…ç½®ä¸€ä¸ªä¸»æœºåï¼ˆä»»æ„å³å¯ï¼‰ï¼Œæ¯”å¦‚eureka-serverã€‚</p><p>eureka-serveræ¨¡å—é…ç½®æ–‡ä»¶</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">eureka</span><span class="token punctuation">:</span>  <span class="token key atrule">client</span><span class="token punctuation">:</span>    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka<span class="token punctuation">-</span>server<span class="token punctuation">:</span>8000/eureka/</code></pre><p>eureka-clientæ¨¡å—é…ç½®æ–‡ä»¶</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">eureka</span><span class="token punctuation">:</span>  <span class="token key atrule">client</span><span class="token punctuation">:</span>    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka<span class="token punctuation">-</span>server<span class="token punctuation">:</span>8000/eureka/</code></pre><h4 id="æ•´åˆshiroå‡ºç°No-bean-of-type-â€˜org-apache-shiro-realm"><a href="#æ•´åˆshiroå‡ºç°No-bean-of-type-â€˜org-apache-shiro-realm" class="headerlink" title="æ•´åˆshiroå‡ºç°No bean of type â€˜org.apache.shiro.realm"></a>æ•´åˆshiroå‡ºç°No bean of type â€˜org.apache.shiro.realm</h4><p>æœ¬æ¥æ˜¯æŠŠshiroçš„ä¸€äº›é…ç½®å’ŒJWTTokenç±»è¿™äº›æ”¾åˆ°å…¬å…±æ¨¡å—ä¸­ã€‚ä½†æ˜¯ä¸€ç›´æŠ¥å¦‚ä¸Šé”™è¯¯ï¼Œæç¤ºæˆ‘åˆ›å»ºshiro.iniï¼Œä½†æ˜¯è¿™æ ·çš„è¯é‡‡ç”¨ç¡¬ç¼–ç æ–¹å¼æŠŠè®¤è¯æˆæƒä¿¡æ¯å†™åœ¨INIæ–‡ä»¶ä¸­,å¯ç»´æŠ¤æ€§å·®ã€‚æ²¡åŠæ³•ï¼Œåªèƒ½æŠŠshiroæœ‰å…³çš„é…ç½®å’ŒLoginControlleræ”¾åœ¨ä¸€ä¸ªæ¨¡å—ä¸­ã€‚</p><h4 id="zuulä¼šè¿‡æ»¤æ•æ„Ÿå¤´éƒ¨ï¼Œå¯¼è‡´ä¸¢å¤±tokenã€‚"><a href="#zuulä¼šè¿‡æ»¤æ•æ„Ÿå¤´éƒ¨ï¼Œå¯¼è‡´ä¸¢å¤±tokenã€‚" class="headerlink" title="zuulä¼šè¿‡æ»¤æ•æ„Ÿå¤´éƒ¨ï¼Œå¯¼è‡´ä¸¢å¤±tokenã€‚"></a>zuulä¼šè¿‡æ»¤æ•æ„Ÿå¤´éƒ¨ï¼Œå¯¼è‡´ä¸¢å¤±tokenã€‚</h4><p>zuulä¼šè¿‡æ»¤æ‰Cookie, Set-Cookie, Authorizationçš„headerä¿¡æ¯ï¼Œå¯¼è‡´jwtçš„tokenåœ¨è½¬å‘æ—¶ä¸¢å¤±ã€‚</p><p>åœ¨<code>ZuulProperties</code>æºç ä¸­å¯ä»¥çœ‹åˆ°é»˜è®¤çš„sensitiveHeaderså¦‚ä¸‹ã€‚ï¼ˆå¦‚æœå¤´éƒ¨å‡ºç°å«æœ‰sensitiveHeadersçš„ä¿¡æ¯ï¼Œå°±ä¸ä¼šæ·»åŠ åˆ°è½¬å‘çš„è¯·æ±‚ä¸­ï¼‰</p><pre class=" language-java"><code class="language-java"><span class="token keyword">private</span> Set<span class="token operator">&lt;</span>String<span class="token operator">></span> sensitiveHeaders <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"Cookie"</span><span class="token punctuation">,</span> <span class="token string">"Set-Cookie"</span><span class="token punctuation">,</span> <span class="token string">"Authorization"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>åªè¦ä¿®æ”¹zuulçš„sensitiveHeadersé…ç½®å³å¯ã€‚è®¾ç½®ä¸ºç©ºï¼Œè®¾ç½®ä¸ºç©ºï¼Œè®¾ç½®ä¸ºç©ºã€‚</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">zuul</span><span class="token punctuation">:</span>  <span class="token key atrule">sensitive-headers</span><span class="token punctuation">:</span> </code></pre><h4 id="nginxçš„httpæ¨¡å—ã€‚"><a href="#nginxçš„httpæ¨¡å—ã€‚" class="headerlink" title="nginxçš„httpæ¨¡å—ã€‚"></a>nginxçš„httpæ¨¡å—ã€‚</h4><p>æˆ‘åªè¦åœ¨nginxé…ç½®æ–‡ä»¶åŠ å…¥<code>http{}</code>ï¼Œå°±ä¼šæŠ¥<code>â€œhttp&quot; directive is not allowed here in /etc/nginx/conf.d/app.conf</code>é”™è¯¯ã€‚çœŸçš„æ˜¯ä¸ªè°œä¹‹é”™è¯¯ï¼Œ-_-ã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://blog.csdn.net/Ser_Bad/article/details/78433340" target="_blank" rel="noopener">Spirng boot mavenå¤šæ¨¡å—æ‰“åŒ…è¸©å‘</a></p><p><a href="http://blog.didispace.com/spring-cloud-zuul-cookie-redirect/" target="_blank" rel="noopener">Spring Cloudå®æˆ˜å°è´´å£«ï¼šZuulå¤„ç†Cookieå’Œé‡å®šå‘</a></p><p><a href="https://gitee.com/wjc666/micro-service" target="_blank" rel="noopener">giteeé¡¹ç›® micro-service</a></p><p><a href="https://www.cnblogs.com/zhikou/p/8629851.html" target="_blank" rel="noopener"><a href="https://www.cnblogs.com/zhikou/p/8629851.html" target="_blank" rel="noopener">exception is feign.RetryableException: Connection refused (Connection refused) executing GET httpï¼š//â€¦â€¦</a></a></p>]]></content>
      
      <categories>
          
          <category> SpringCloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Eureka </tag>
            
            <tag> SpringCloud </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> Shiro </tag>
            
            <tag> Nginx </tag>
            
            <tag> JWT </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æˆ‘çš„æŠ€èƒ½æ ‘ï¼ˆæƒ¨ä¸å¿ç¹ï¼‰</title>
      <link href="/freetalk.html"/>
      <url>/freetalk.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><p>ç½‘ä¸Šæœ‰å¾ˆå¤šæ–‡ç« éƒ½æœ‰è¿™å¼ å›¾ç‰‡ï¼Œåä¸ºâ€œ2018Webå¼€å‘éœ€è¦æŒæ¡çš„æŠ€èƒ½â€ï¼Œæ­£å¥½è‡ªå·±åœ¨å­¦ä¹ è¿™ä¸€æ–¹é¢ï¼Œæ‰€ä»¥æƒ³è¦çœ‹çœ‹è‡ªå·±éƒ½ä¼šç‚¹ä»€ä¹ˆã€‚</p><p><img src="\images\freetalk\skilltree\skilltree.jpg" alt=""></p><p>&nbsp;</p><ul><li><p>Java <code>å¤šçº¿ç¨‹æŒæ¡æ¯”è¾ƒå·®ã€JVMè¿˜æ²¡äº†è§£è¿‡</code></p><hr></li><li><p>WebServer</p><ul><li>Nginx <code>çœ‹åˆ°å®ƒåªçŸ¥é“è´Ÿè½½å‡è¡¡ï¼Œç¨å¾®æœ‰ç‚¹äº†è§£</code></li></ul></li><li><p>RESTful APIs <code>æ®æˆ‘æ‰€çŸ¥ä½¿ç”¨GETã€PUTã€DELETEã€POSTè¯·æ±‚æ–¹å¼æ¥ç®€åŒ–API</code></p></li><li>AUthentication<ul><li>JWT <code>äº†è§£è¿‡ä¸€ç‚¹ï¼ŒåŸç†ä¸æ˜¯å¾ˆæ‡‚ï¼Œæœªå®è·µè¿‡</code></li><li>OAuth 2.0 <code>æœªäº†è§£è¿‡</code>âŒ</li></ul></li><li>Docker <code>åŸºæœ¬éƒ¨ç½²å¯ä»¥å®ç°</code></li></ul><hr><ul><li>Message Brokers<ul><li>RabbitMQ <code>æœªäº†è§£è¿‡</code>âŒ</li><li>Apache Kafka <code>æœªäº†è§£è¿‡</code>âŒ</li></ul></li></ul><hr><ul><li>Caching<ul><li>Memcached <code>æœªäº†è§£è¿‡</code>âŒ</li><li>Redis <code>å¯ä»¥å®ç°ç¼“å­˜ï¼Œä½†æ˜¯æ•°æ®ç»“æ„å­¦äº†å°±å¿˜äº†</code></li></ul></li><li>Databases<ul><li>MySQL <code>Sqlä¼˜åŒ–ä¸ä¼š</code></li><li>MongoDB <code>æœªäº†è§£è¿‡âŒ</code></li></ul></li></ul><hr><ul><li>ElasticSearch <code>æœªäº†è§£è¿‡</code>âŒ</li><li>GOF Design Patterns <code>åªä¼šå•ä¾‹æ¨¡å¼ã€å·¥å‚æ¨¡å¼å¥½åƒåˆå¿˜äº†</code></li><li>Architectural Patterns <code>æœªäº†è§£è¿‡âŒ</code></li><li>Give DDD a shot <code>æœªäº†è§£è¿‡</code>âŒ</li><li>Learn different testing techniques <code>äº†è§£è¿‡Mockingï¼Œå…¶ä»–ä¸çŸ¥é“</code></li></ul><p>&nbsp;</p><p>åˆ—å‡ºæ¥åå‘ç°è‡ªå·±éƒ½åœç•™åœ¨æ— è„‘è°ƒç”¨æ¥å£ï¼Œåªä¼šè¡¨é¢ï¼Œå¯¹äºæ·±å±‚çš„å®ç°å’ŒåŸç†éƒ½ä¸æ€ä¹ˆæ‡‚ã€‚è€Œä¸”æœ‰è¿™ä¹ˆå¤šå‰å‰éƒ½æ²¡äº†è§£è¿‡ã€‚</p><p>å°‘å¹´ä¸èƒ½æµªè´¹æ—¶é—´äº†ï¼Œå¿«é†’é†’å•Šï¼äº‰å–æŠŠè¿™äº›éƒ½å˜æˆç»¿å‹¾å‹¾ï¼ï¼ï¼</p>]]></content>
      
      <categories>
          
          <category> æ‚è°ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ€èƒ½æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>è®°ä¸€æ¬¡æƒ¨ç—›çš„Dockeréƒ¨ç½²SpringBootç»å†</title>
      <link href="/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%83%A8%E7%97%9B%E7%9A%84Docker%E9%83%A8%E7%BD%B2SpringBoot.html"/>
      <url>/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%83%A8%E7%97%9B%E7%9A%84Docker%E9%83%A8%E7%BD%B2SpringBoot.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><ul><li>SpringBoot 2.0.4.RELEASE</li></ul><ul><li>Docker 18.06.1-ce</li></ul><ul><li>Ubuntu 16.04</li><li>Jdk 8</li><li>Maven 3.5.4</li></ul><h3 id="æ­å»ºSpringBooté¡¹ç›®"><a href="#æ­å»ºSpringBooté¡¹ç›®" class="headerlink" title="æ­å»ºSpringBooté¡¹ç›®"></a>æ­å»ºSpringBooté¡¹ç›®</h3><p>å¯¼å…¥webä¾èµ–ï¼Œç¼–å†™ä¸€ä¸ªç®€å•çš„Controllerã€‚ç„¶åæ·»åŠ Dockeræ”¯æŒã€‚</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--docker maven æ’ä»¶--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.spotify<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>docker-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>imageName</span><span class="token punctuation">></span></span>${project.artifactId}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>imageName</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--æ³¨æ„ ä¿®æ”¹æˆè¿œç¨‹æœåŠ¡å™¨åœ°å€--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dockerHost</span><span class="token punctuation">></span></span> http://192.168.43.2:2375<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dockerHost</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dockerDirectory</span><span class="token punctuation">></span></span>src/main/docker<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dockerDirectory</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>targetPath</span><span class="token punctuation">></span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>targetPath</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">></span></span>${project.build.directory}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>${project.build.finalName}.jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.httpcomponents<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>httpclient<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.5.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span></code></pre><p>éœ€è¦<strong>javax.activation</strong>ä¾èµ–ï¼Œä¸ç„¶ä¼šæŠ¥java.lang.ClassNotFoundException: javax.activation.DataSourceé”™è¯¯ã€‚</p><p>ç¯å¢ƒé…ç½®å¥½åï¼Œç¼–å†™Dockerfile</p><pre class=" language-dockerfile"><code class="language-dockerfile">FROM openjdk:8-jdk-alpineVOLUME /opt/commonADD dockerdemo-1.0.jar app.jarENTRYPOINT ["java","-Djava.security.egd=file:/dev/./urandom","-jar","/app.jar"]EXPOSE 8080</code></pre><ul><li>VOLUME ï¼ŒVOLUME æŒ‡å‘äº†ä¸€ä¸ª<code>/opt/common</code>çš„ç›®å½•ï¼Œç”±äº Spring Boot ä½¿ç”¨å†…ç½®çš„Tomcatå®¹å™¨ï¼ŒTomcat é»˜è®¤ä½¿ç”¨<code>/opt/common</code>ä½œä¸ºå·¥ä½œç›®å½•ã€‚è¿™ä¸ªå‘½ä»¤çš„æ•ˆæœæ˜¯ï¼šåœ¨å®¿ä¸»æœºçš„<code>/var/lib/docker</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¹¶æŠŠå®ƒé“¾æ¥åˆ°å®¹å™¨ä¸­çš„<code>/opt/common</code>ç›®å½•</li><li>ADD ï¼Œæ‹·è´æ–‡ä»¶å¹¶ä¸”é‡å‘½å</li><li>ENTRYPOINT ï¼Œä¸ºäº†ç¼©çŸ­ Tomcat çš„å¯åŠ¨æ—¶é—´ï¼Œæ·»åŠ <code>java.security.egd</code>çš„ç³»ç»Ÿå±æ€§æŒ‡å‘<code>/dev/urandom</code>ä½œä¸º ENTRYPOINT</li></ul><p>è¿™é‡Œå¯ä»¥å®‰è£…ä¸€æ¬¾Docker integrationæ’ä»¶ï¼Œå¯ä»¥æ„å»ºé•œåƒï¼Œåˆ›å»ºä»“åº“ï¼Œä¸Šä¼ é•œåƒç­‰ã€‚å®‰è£…è¿™ä¸ªæ’ä»¶åï¼ŒDockerfileæ–‡ä»¶å°±èƒ½æ˜¾ç¤ºè¯­æ³•äº†ã€‚å…¶ä»–åŠŸèƒ½æš‚æ—¶æ²¡ç”¨åˆ°ã€‚</p><h3 id="é…ç½®è™šæ‹Ÿæœºç¯å¢ƒ"><a href="#é…ç½®è™šæ‹Ÿæœºç¯å¢ƒ" class="headerlink" title="é…ç½®è™šæ‹Ÿæœºç¯å¢ƒ"></a>é…ç½®è™šæ‹Ÿæœºç¯å¢ƒ</h3><h4 id="é…ç½®Jdk-8"><a href="#é…ç½®Jdk-8" class="headerlink" title="é…ç½®Jdk 8"></a>é…ç½®Jdk 8</h4><pre><code> $ sudo apt-get update $ sudo apt-get install openjdk-8-jdk</code></pre><p>ä½¿ç”¨java -versionæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸã€‚ç„¶åé…ç½®jdkç¯å¢ƒå˜é‡</p><pre><code>sudo gedit /etc/profileexport JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64export JRE_HOME=${JAVA_HOME}/jre export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib export PATH=${JAVA_HOME}/bin:$PATHsource /etc/profile</code></pre><h4 id="é…ç½®Maven"><a href="#é…ç½®Maven" class="headerlink" title="é…ç½®Maven"></a>é…ç½®Maven</h4><p>ä¸‹è½½ï¼š<code>http://mirrors.shu.edu.cn/apache/maven/maven-3/3.5.4/binaries/apache-maven-3.5.4-bin.tar.gz</code></p><pre><code>## è§£å‹tar vxf apache-maven-3.5.4-bin.tar.gz## ç§»åŠ¨mv apache-maven-3.5.4 /usr/local/maven3</code></pre><p>ä»ç„¶æ˜¯åœ¨/etc/profileä¸­é…ç½®ç¯å¢ƒå˜é‡</p><pre><code>sudo gedit /etc/profileMAVEN_HOME=/usr/local/maven3export MAVEN_HOMEexport PATH=${PATH}:${MAVEN_HOME}/binsource /etc/profile</code></pre><h3 id="æ„å»ºã€ä¸Šä¼ ã€è¿è¡Œé•œåƒ"><a href="#æ„å»ºã€ä¸Šä¼ ã€è¿è¡Œé•œåƒ" class="headerlink" title="æ„å»ºã€ä¸Šä¼ ã€è¿è¡Œé•œåƒ"></a>æ„å»ºã€ä¸Šä¼ ã€è¿è¡Œé•œåƒ</h3><p><img src="/images/Docker/dockerbuildPlugin.JPG" alt=""></p><p>ä½¿ç”¨docker buildæ’ä»¶å¯ä»¥å¿«é€Ÿæ„å»ºã€‚ä¹Ÿå¯ä»¥åœ¨Terminalè¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ„å»ºã€‚</p><pre><code>mvn package docker:build</code></pre><p>æ„å»ºæˆåŠŸåï¼Œå°±å¯ä»¥åœ¨dockerä¸­ä½¿ç”¨docker imagesæŸ¥çœ‹é•œåƒã€‚</p><pre><code>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZEdockerdemo          latest              2d6bfc475fa7        44 hours ago        119MB</code></pre><p>è¿è¡Œè¯¥é•œåƒ</p><pre><code>docker run -p 8080:8080 -t dockerdemo</code></pre><p>è¿è¡ŒæˆåŠŸåæµ‹è¯•Controlleræ˜¯å¦æˆåŠŸå³å¯ã€‚</p><h3 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h3><h5 id="1ã€dockeræ„å»ºé•œåƒæŠ¥é”™org-apache-http-conn-ConnectTimeoutException-contact-timed-out"><a href="#1ã€dockeræ„å»ºé•œåƒæŠ¥é”™org-apache-http-conn-ConnectTimeoutException-contact-timed-out" class="headerlink" title="1ã€dockeræ„å»ºé•œåƒæŠ¥é”™org.apache.http.conn.ConnectTimeoutException:contact timed out"></a>1ã€dockeræ„å»ºé•œåƒæŠ¥é”™org.apache.http.conn.ConnectTimeoutException:contact timed out</h5><p>å¦‚æœä¹‹å‰æ²¡æœ‰é…ç½®è¿‡Dockerçš„è¿œç¨‹è®¿é—®ï¼Œé‚£ä¹ˆåº”è¯¥æ˜¯è¿™ä¸ªåŸå› ã€‚</p><p>å¼€å¯APIè®¿é—®æœåŠ¡ï¼š</p><pre><code>$ systemctl show --property=FragmentPath dockerFragmentPath=/lib/systemd/system/docker.service $ sudo gedit /lib/systemd/system/docker.service#ä¿®æ”¹ExecStart=/usr/bin/dockerd -H fd:// ä¸º ExecStart=/usr/bin/dockerd -H unix:///var/run/docker.sock -H tcp://0.0.0.0:2375#é‡è½½Docker$ sudo systemctl daemon-reload$ sudo systemctl restart docker docker -H tcp://127.0.0.1:2376 versionClient: Version:           18.06.1-ce API version:       1.38 Go version:        go1.10.3 Git commit:        e68fc7a Built:             Tue Aug 21 17:24:56 2018 OS/Arch:           linux/amd64 Experimental:      falseServer: Engine:  Version:          18.06.1-ce  API version:      1.38 (minimum version 1.12)  Go version:       go1.10.3  Git commit:       e68fc7a  Built:            Tue Aug 21 17:23:21 2018  OS/Arch:          linux/amd64  Experimental:     false</code></pre><p>è¿™æ ·å°±è¯´æ˜APIè¿œç¨‹è®¿é—®å·²å¼€å¯ã€‚ä¹Ÿå¯é€šè¿‡ä»¥ä¸‹æ–¹æ³•éªŒè¯</p><pre><code>ps -ef | grep docker</code></pre><p><img src="/images/Docker/docker_port.JPG" alt=""></p><p>å¯ä»¥çœ‹åˆ°2375ç«¯å£å·²ç»åœ¨ç›‘å¬äº†ã€‚å†è¿›è¡Œæµ‹è¯•æŸ¥çœ‹æ˜¯å¦æˆåŠŸã€‚</p><p>ä½†æ˜¯è¿˜æ˜¯æŠ¥äº†è¿™ä¸ªé”™è¯¯ï¼Œç½‘ä¸Šæ‰¾äº†å¾ˆå¤šæ²¡æœ‰ç±»ä¼¼é—®é¢˜ï¼Œæœ€åæ‰¾åˆ°ä¸€ä¸ªæœ‰ç±»ä¼¼é—®é¢˜çš„ï¼Œä¸è¿‡ä»–æ˜¯å°†æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ä¸Šçš„ï¼Œæ˜¯å› ä¸ºé˜¿é‡Œäº‘æ§åˆ¶å°é‡Œçš„å®‰å…¨ç»„æ²¡æœ‰å¼€å¯2375ç«¯å£ã€‚<a href="https://blog.csdn.net/laravelshao/article/details/79773895" target="_blank" rel="noopener">Docker Mavenæ’ä»¶æœ¬åœ°æ„å»ºé•œåƒå‘å¸ƒè‡³è¿œç¨‹æœåŠ¡å™¨</a></p><p>ä½†æ˜¯æˆ‘è¿™ä¸ªæ˜¯æœ¬åœ°çš„ï¼Œæ‰€ä»¥æ²¡æœ‰æ•ˆæœã€‚åªå¥½é‡è£…äº†Ubuntuï¼Œæ„å¤–çš„æˆåŠŸäº†ï¼ŒçŒœæƒ³å¯èƒ½æ˜¯ä¹‹å‰çš„Ubuntuæˆ–Dockerçš„é…ç½®å¯¼è‡´äº†è¿™ä¸ªé”™è¯¯ã€‚</p><h4 id="2ã€æŠ¥é”™java-lang-ClassNotFoundException-javax-activation-DataSource"><a href="#2ã€æŠ¥é”™java-lang-ClassNotFoundException-javax-activation-DataSource" class="headerlink" title="2ã€æŠ¥é”™java.lang.ClassNotFoundException: javax.activation.DataSource"></a>2ã€æŠ¥é”™java.lang.ClassNotFoundException: javax.activation.DataSource</h4><p>æ˜¯å› ä¸ºdocker mavenæ’ä»¶ç¼ºå°‘javax.activationä¾èµ–ï¼ŒåŠ å…¥ä»¥ä¸‹ä¾èµ–</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><h4 id="3ã€æŠ¥é”™Add-failed-stat-ver-lib-docker-tmp-docker-builderXXXXXX-no-such-file-or-dir"><a href="#3ã€æŠ¥é”™Add-failed-stat-ver-lib-docker-tmp-docker-builderXXXXXX-no-such-file-or-dir" class="headerlink" title="3ã€æŠ¥é”™Add failed: stat /ver/lib/docker/tmp/docker-builderXXXXXX:no such file or dir"></a>3ã€æŠ¥é”™Add failed: stat /ver/lib/docker/tmp/docker-builderXXXXXX:no such file or dir</h4><p>æŠ¥è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºæ‰“åŒ…åå­—ä¸ä¸€è‡´ï¼Œpom.xmlçš„artifactIdä¸Dockerfileé•œåƒåè¦ä¸€è‡´ã€‚</p><p>&nbsp;</p><p><strong>è¦æ˜¯æ€ä¹ˆæ ·éƒ½ä¸è¡Œï¼Œé‡è£…å§å°‘å¹´!</strong></p><p>&nbsp;</p><blockquote><p>å‚è€ƒèµ„æ–™</p></blockquote><p><a href="http://www.ityouknow.com/springboot/2018/03/19/spring-boot-docker.html" target="_blank" rel="noopener">Spring Boot 2.0(å››)ï¼šä½¿ç”¨ Docker éƒ¨ç½² Spring Boot</a></p><p><a href="http://blog.jeffreysun.net/2018/03/27/docker%E5%BC%80%E5%90%AF%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE/" target="_blank" rel="noopener">dockerå¼€å¯è¿œç¨‹è®¿é—®</a></p><p><a href="https://blog.csdn.net/laravelshao/article/details/79773895" target="_blank" rel="noopener">Docker Mavenæ’ä»¶æœ¬åœ°æ„å»ºé•œåƒå‘å¸ƒè‡³è¿œç¨‹æœåŠ¡å™¨</a></p><p><a href="https://blog.csdn.net/sumlyl/article/details/80710944" target="_blank" rel="noopener">4ã€ä¸ºä»€ä¹ˆä½¿ç”¨docker?ä¹‹Dockerå»ºç«‹è¿œç¨‹è¿æ¥</a></p>]]></content>
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> å¾®æœåŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>githubä»£ç ä¸Šä¼ </title>
      <link href="/github%E4%BB%A3%E7%A0%81%E4%B8%8A%E4%BC%A0.html"/>
      <url>/github%E4%BB%A3%E7%A0%81%E4%B8%8A%E4%BC%A0.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><p><code>$ git init</code><br><code>$ git add .</code><br><code>$ git commit -m &quot;first commit&quot;</code><br><code>$ git remote add origin https://github.com/yourName/yourRepo.git</code><br><code>$ git push -u origin master</code></p><hr><p>#ä¸Šä¼ å¤šä¸ªé¡¹ç›®åˆ°ä¸€ä¸ªä»“åº“<br><code>$ git add .</code><br><code>$ git commit -m &quot;second commit&quot;</code><br><code>$ git push -u origin master</code></p><hr><p>#pushå¤±è´¥,æœ¬åœ°ä¸ä»“åº“ä¸ä¸€è‡´ï¼Œå…ˆpullä¸‹æ¥<br><code>$ git pull --rebase origin master</code><br><code>$ git push -u origin master</code></p>]]></content>
      
      <categories>
          
          <category> æŠ€æœ¯æ‚çƒ© </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Redisä½œä¸ºMybatisè¾…å­˜</title>
      <link href="/redis%E4%BD%9C%E4%B8%BA%E8%BE%85%E5%AD%98.html"/>
      <url>/redis%E4%BD%9C%E4%B8%BA%E8%BE%85%E5%AD%98.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><h3 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h3><blockquote><p>ä¸ªäººæ€è€ƒ</p></blockquote><p>Q1ï¼šä¸ºä»€ä¹ˆè¦ç”¨redisä½œä¸ºmysqlçš„è¾…å­˜ï¼Ÿ</p><p>Aï¼šä¸æ•°æ®åº“çš„äº¤äº’æ— éè¯»å’Œå†™ã€‚åœ¨è¯»è¿™ä¸€æ–¹é¢ï¼Œæ•°æ®çš„è®¿é—®ä¸€èˆ¬æ¥è¯´éƒ½ä¸æ˜¯å¹³å‡çš„ï¼Œæœ‰äº›æ•°æ®ç»å¸¸è¢«è®¿é—®ç§°ä¸ºâ€œçƒ­æ•°æ®â€ï¼Œè¿˜æœ‰ä¸€äº›ä¸ä¼šç»å¸¸è®¿é—®åˆ°çš„åˆ™ç§°ä¸ºå†·æ•°æ®ã€‚å¦‚æœè¦åœ¨è¿™é‡Œä¼˜åŒ–ï¼Œç¬¬ä¸€æ„Ÿè§‰è‚¯å®šæ˜¯å»ä¼˜åŒ–çƒ­æ•°æ®çš„è¯»å–é€Ÿåº¦ï¼Œå’Œè®¡ç®—æœºç»„æˆåŸç†å­¦çš„ç¼“å­˜ä¸€æ ·ï¼Œè¶Šé è¿‘CPUçš„Cacheè¯»å†™é€Ÿåº¦è¶Šå¿«ï¼Œæ‰€ä»¥æˆ‘è§‰å¾—åœ¨è¯»å–æ—¶å¯ä»¥å…ˆå»è®¿é—®redisï¼Œæ²¡æœ‰å†å»æ•°æ®åº“é‡ŒæŸ¥æ‰¾ã€‚</p><p>ç„¶åå°±æ˜¯å†™è¿™ä¸€æ–¹é¢ï¼Œå¯èƒ½ç¬é—´å†™çš„å‹åŠ›éå¸¸å¤§ï¼Œé€ æˆæ‹¥æŒ¤ç”šè‡³å¯èƒ½ç³»ç»Ÿå‡ºé”™ã€‚å› ä¸ºåœ¨å†™çš„é€Ÿåº¦æ–¹é¢redisåº”è¯¥æ˜¯ä¼˜äºç›´æ¥å†™å…¥æ•°æ®åº“çš„ï¼Œæ‰€ä»¥å¯ä»¥å…ˆå†™å…¥redisï¼Œç„¶åå†æ…¢æ…¢å†™å…¥æ•°æ®åº“ã€‚è¿™æ ·ä¸€æ¥ï¼Œå¯¹å†™çš„å‹åŠ›å‡å°‘äº†ä¸€äº›ï¼Œä½†æ˜¯æ•°æ®çš„åŒæ­¥é—®é¢˜å‡ºç°äº†ã€‚</p><p>Q2ï¼šé‚£ä¸ºä»€ä¹ˆé€‰æ‹©redisè¿˜ä¸æ˜¯å…¶ä»–çš„å·¥å…·ï¼Ÿ</p><p>Aï¼šemmâ€¦æˆ‘è§‰å¾—è¿™ä¸ªé—®é¢˜åªèƒ½å…ˆç•™ç€å§ï¼Œå…¶ä»–ä¹Ÿéƒ½æ²¡å­¦è¿‡ã€‚</p><p><em>æ³¨ï¼šä»¥ä¸Šçº¯å±ä¸ªäººæƒ³æ³•ï¼Œä¸ä¸€å®šéƒ½æ˜¯æ­£ç¡®çš„ã€‚</em></p><blockquote><p>æŸ¥é˜…ä¸€ç•ªèµ„æ–™å</p></blockquote><p>å› ä¸ºredisæ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œmysqlæ˜¯å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­ï¼Œredisçš„è¯»å–é€Ÿåº¦æ¯”ç›´æ¥è¯»å–mysqlå¿«å¾ˆå¤šï¼Œæ‰€ä»¥ä¸€èˆ¬ç”¨äºçƒ­æ•°æ®çš„è¯»å–ï¼Œä¸é€‚åˆæ•°æ®é«˜ä¸€è‡´æ€§ï¼ˆç›´æ¥æ“ä½œMysqlï¼Œå°±ä¸è¦è€ƒè™‘ç”¨redisé€Ÿåº¦å¿«çš„ç‰¹æ€§æ¥å†™æ•°æ®ï¼‰ã€‚å¦‚æœä½¿ç”¨redisä½œä¸ºç¼“å­˜çš„è¯ï¼Œå…ˆå»redisä¸­åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›redisä¸­çš„æ•°æ®ã€‚ä¸å­˜åœ¨çš„è¯ï¼Œå°±ä¼šå»æ•°æ®åº“ä¸­è¯»å–å¹¶ç¼“å­˜åˆ°redisä¸­ã€‚</p><p>åŒæ—¶Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼ŒæœåŠ¡å™¨å…³é—­é‡å¯åå¯ä»¥é‡æ–°åŠ è½½ã€‚æœ‰ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼šå¿«ç…§ï¼ˆRDBæ–‡ä»¶ï¼‰å’Œè¿½åŠ å¼æ–‡ä»¶ï¼ˆAOFæ–‡ä»¶ï¼‰ã€‚RDBæŒä¹…åŒ–æ–¹å¼ä¼šåœ¨ä¸€ä¸ªç‰¹å®šçš„é—´éš”ä¿å­˜é‚£ä¸ªæ—¶é—´ç‚¹çš„ä¸€ä¸ªæ•°æ®å¿«ç…§ï¼ŒAOFæ–¹å¼ä¼šè®°å½•æ¯ä¸€ä¸ªå†™æ“ä½œã€‚åœ¨æœåŠ¡å¯åŠ¨æ—¶ï¼Œè¿™äº›è®°å½•ä¼šè¢«é€æ¡æ‰§è¡Œé‡å»ºåŸæ¥çš„æ•°æ®ã€‚ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼ŒAOFè¢«ä¼˜å…ˆä½¿ç”¨ï¼‰</p><p>Redisè‡ªåŠ¨è¿›è¡Œçƒ­æ•°æ®ç¼“å­˜ï¼šæ–¹æ¡ˆä¸€ã€è®¾ç½®ExpiredTimeï¼Œå¦‚æœè®¿é—®é¢‘ç¹çš„æ•°æ®ç”Ÿå­˜æ—¶é—´ä¼šä¸€ç›´æ›´æ–°ï¼Œå†·æ•°æ®å¦‚æœä¸å†æ¬¡è®¿é—®çš„è¯ï¼Œå°±ä¼šåœ¨æŒ‡å®šæ—¶é—´å†…è¿‡æœŸæ¸…é™¤æ‰ï¼Œé—´æ¥å®ç°çƒ­æ•°æ®ç¼“å­˜ã€‚</p><h3 id="ä¸¤ç§æ–¹å¼å®ç°Redisç¼“å­˜"><a href="#ä¸¤ç§æ–¹å¼å®ç°Redisç¼“å­˜" class="headerlink" title="ä¸¤ç§æ–¹å¼å®ç°Redisç¼“å­˜"></a>ä¸¤ç§æ–¹å¼å®ç°Redisç¼“å­˜</h3><h4 id="ä¸€ã€å…¨å±€å®ç°Redisç¼“å­˜"><a href="#ä¸€ã€å…¨å±€å®ç°Redisç¼“å­˜" class="headerlink" title="ä¸€ã€å…¨å±€å®ç°Redisç¼“å­˜"></a>ä¸€ã€å…¨å±€å®ç°Redisç¼“å­˜</h4><p>1ã€å¯¼å…¥ä¾èµ–</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>2ã€é‡å†™org.apache.ibatis.cache.Cache</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//ä½¿ç”¨redisTemplateçš„å¯¹åº”æ–¹æ³•é‡å†™Cacheçš„æ–¹æ³•</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisCache</span> <span class="token keyword">implements</span> <span class="token class-name">Cache</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Logger logger <span class="token operator">=</span> LoggerFactory<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span>RedisCache<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//å®ä¾‹ä¸€ä¸ªè¯»å†™é”</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> ReadWriteLock readWriteLock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantReadWriteLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> String id<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// cache instance id</span>    <span class="token keyword">private</span> RedisTemplate redisTemplate<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> EXPIRE_TIME_IN_MINUTES <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// redisè¿‡æœŸæ—¶é—´</span>    <span class="token comment" spellcheck="true">//å¿…é¡»è¦æœ‰ä¸€ä¸ªåˆå§‹åŒ–idçš„æ„é€ å™¨</span>    <span class="token keyword">public</span> <span class="token function">RedisCache</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"Cache instances require an ID"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * Put query result to redis     *     * @param key     * @param value     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">putObject</span><span class="token punctuation">(</span>Object key<span class="token punctuation">,</span> Object value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            RedisTemplate redisTemplate <span class="token operator">=</span> <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ValueOperations opsForValue <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            opsForValue<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> EXPIRE_TIME_IN_MINUTES<span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>MINUTES<span class="token punctuation">)</span><span class="token punctuation">;</span>            logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"Put query result to redis"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>            logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Redis put failed"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * Get cached query result from redis     *      * @param key     * @return     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Object <span class="token function">getObject</span><span class="token punctuation">(</span>Object key<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            RedisTemplate redisTemplate <span class="token operator">=</span> <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ValueOperations opsForValue <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"Get cached query result from redis"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> opsForValue<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>            logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Redis get failed, fail over to db"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> null<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * Remove cached query result from redis     *     * @param key     * @return     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> Object <span class="token function">removeObject</span><span class="token punctuation">(</span>Object key<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            RedisTemplate redisTemplate <span class="token operator">=</span> <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            redisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>            logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"Remove cached query result from redis"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>            logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Redis remove failed"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * Clears this cache instance     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        RedisTemplate redisTemplate <span class="token operator">=</span> <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        redisTemplate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span>RedisCallback<span class="token punctuation">)</span> connection <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>            connection<span class="token punctuation">.</span><span class="token function">flushDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> null<span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"Clear all the cached query result from redis"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * This method is not used     *     * @return     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> ReadWriteLock <span class="token function">getReadWriteLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> readWriteLock<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> RedisTemplate <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>redisTemplate <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//è‹¥redisTemplateä¸å­˜åœ¨ï¼Œåˆ™ä»ApplicaitonContextå–å‡ºredisTemplate</span>            redisTemplate <span class="token operator">=</span> SpringContextHolder<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"redisTemplate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>3ã€CMSå±‚çœç•¥ä¸æ”¾è¿›æ–‡ç« é‡Œäº†ï¼Œå¼€å§‹æµ‹è¯•</p><p>ç¬¬ä¸€æ¬¡æ ¹æ®UserNameæŸ¥è¯¢User</p><p><img src="/images/SpringBoot/redis/redisHit0.JPG" alt=""></p><p>å¯ä»¥çœ‹åˆ°Cache Hit Ratio ä¸º0ï¼Œè¯´æ˜åœ¨Redisä¸­æ²¡æœ‰å¯¹åº”çš„ç¼“å­˜ï¼Œæ‰€ä»¥ä»æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®ã€‚</p><p>åœ¨RedisDesktopManagerå¯ä»¥çœ‹åˆ°å·²ç»å­˜å…¥ä¸€ä¸ªåºåˆ—åŒ–æ•°æ®ã€‚</p><p><img src="/images/SpringBoot/redis/redisData.JPG" alt=""></p><p>ç¬¬äºŒæ¬¡æŸ¥è¯¢å°±å¯ä»¥çœ‹åˆ°Cache Hit Ratioä¸º1.0ï¼Œå¹¶ä¸”æ²¡æœ‰æŸ¥è¯¢æ•°æ®åº“çš„æ—¥å¿—æ¶ˆæ¯ï¼Œè¯´æ˜æ­¤æ¬¡æŸ¥è¯¢æ˜¯ä»Redisè·å–çš„æ•°æ®ã€‚</p><p><img src="/images/SpringBoot/redis/redisHit1.JPG" alt=""></p><h4 id="äºŒã€ä½¿ç”¨æ³¨è§£æ¥ä½¿ç”¨Redisç¼“å­˜"><a href="#äºŒã€ä½¿ç”¨æ³¨è§£æ¥ä½¿ç”¨Redisç¼“å­˜" class="headerlink" title="äºŒã€ä½¿ç”¨æ³¨è§£æ¥ä½¿ç”¨Redisç¼“å­˜"></a>äºŒã€ä½¿ç”¨æ³¨è§£æ¥ä½¿ç”¨Redisç¼“å­˜</h4><p>1ã€æ„é€ fastjsonåºåˆ—åŒ–å™¨</p><p>éœ€è¦å¦å¤–å¯¼å…¥fastjsonä¾èµ–</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>fastjson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2.31<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>é…ç½®FastJsonRedisSerializer</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FastJsonRedisSerializer</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token keyword">implements</span> <span class="token class-name">RedisSerializer</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Charset DEFAULT_CHARSET <span class="token operator">=</span> Charset<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> Class<span class="token operator">&lt;</span>T<span class="token operator">></span> clazz<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">FastJsonRedisSerializer</span><span class="token punctuation">(</span>Class<span class="token operator">&lt;</span>T<span class="token operator">></span> clazz<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>clazz <span class="token operator">=</span> clazz<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//fastjson1.2.25ç‰ˆæœ¬ä¹‹åï¼Œéœ€è¦å¼€å¯AutoTypeSupport</span>        <span class="token comment" spellcheck="true">//å¦åˆ™ä»redisç¼“å­˜ä¸­è¯»å–çš„æ•°æ®ä¼šæŠ¥autoType is not support.é”™è¯¯ã€‚</span>        ParserConfig<span class="token punctuation">.</span><span class="token function">getGlobalInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAutoTypeSupport</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//é‡å†™åºåˆ—åŒ–æ–¹æ³•</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">serialize</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span> <span class="token keyword">throws</span> SerializationException <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> SerializerFeature<span class="token punctuation">.</span>WriteClassName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span>DEFAULT_CHARSET<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//é‡å†™ååºåˆ—åŒ–æ–¹æ³•</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> T <span class="token function">deserialize</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes<span class="token punctuation">)</span> <span class="token keyword">throws</span> SerializationException <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>bytes <span class="token operator">==</span> null <span class="token operator">||</span> bytes<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> null<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        String str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> DEFAULT_CHARSET<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> JSON<span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>é…ç½®å®Œåºåˆ—åŒ–å™¨åï¼Œå†é…ç½®Redisç¼“å­˜çš„ç›¸å…³é…ç½®ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableCaching</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisCacheConfig</span>  <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> RedisTemplate<span class="token operator">&lt;</span>Object<span class="token punctuation">,</span> Object<span class="token operator">></span> <span class="token function">redisTemplate</span><span class="token punctuation">(</span>RedisConnectionFactory redisConnectionFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>        RedisTemplate<span class="token operator">&lt;</span>Object<span class="token punctuation">,</span> Object<span class="token operator">></span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisTemplate</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        template<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>redisConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å› ä¸ºSpringBootæ•´åˆçš„æœ€æ–°çš„redisä¸­çš„CacheManageræ˜¯æ²¡æœ‰RedisTemplateçš„æ„é€ æ–¹æ³•çš„ã€‚</span>        <span class="token comment" spellcheck="true">//æ‰€ä»¥ä¼¼ä¹åœ¨RedisTemplateè®¾ç½®Keyå’ŒValueçš„åºåˆ—å™¨æ˜¯æ— æ•ˆçš„ï¼ˆå®è·µè¿‡ç¡®å®å¦‚æ­¤ï¼‰</span>        <span class="token comment" spellcheck="true">//ä½†æ˜¯åœ¨æ­¤è®¾ç½®ä¹‹åï¼Œåœ¨cacheManageré…ç½®æ—¶ä¹Ÿå¯ä»¥ä»redisTemplateä¸­å–å‡ºæ¥</span>        FastJsonRedisSerializer<span class="token operator">&lt;</span>Object<span class="token operator">></span> serializer<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FastJsonRedisSerializer</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        template<span class="token punctuation">.</span><span class="token function">setValueSerializer</span><span class="token punctuation">(</span>serializer<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//ä½¿ç”¨StringRedisSerializeræ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–redisçš„keyå€¼</span>        template<span class="token punctuation">.</span><span class="token function">setKeySerializer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        template<span class="token punctuation">.</span><span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> template<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/*é…ç½®ç¼“å­˜ç®¡ç†å™¨     *å¦‚æœé…ç½®è‡ªå·±å®šä¹‰çš„åºåˆ—åŒ–å™¨ï¼Œè¦ä¼ RedisTemplateè¿›æ¥ã€‚æˆ–è€…åœ¨é‡Œé¢é‡æ–°å®ä¾‹åºåˆ—åŒ–å™¨ï¼Œè¿™é‡Œä½¿ç”¨å‰è€…çš„æ–¹å¼     */</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> CacheManager <span class="token function">cacheManager</span><span class="token punctuation">(</span>RedisConnectionFactory redisConnectionFactory<span class="token punctuation">,</span>RedisTemplate redisTemplate<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ç”Ÿæˆä¸€ä¸ªé»˜è®¤é…ç½®ï¼Œé€šè¿‡configå¯¹è±¡å³å¯å¯¹ç¼“å­˜è¿›è¡Œè‡ªå®šä¹‰é…ç½®</span>        <span class="token comment" spellcheck="true">// serialzeValuesWithæ–¹æ³•ä¼šé‡æ–°å®ä¾‹åŒ–RedisCacheConfigurationï¼Œæ‰€ä»¥åœ¨ç”Ÿæˆé…ç½®æ—¶ï¼Œä¸èƒ½åˆ†å¼€é…ç½®ï¼Œåªèƒ½è¿›è¡Œé“¾å¼é…ç½®</span>        RedisCacheConfiguration config <span class="token operator">=</span> RedisCacheConfiguration<span class="token punctuation">.</span><span class="token function">defaultCacheConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">serializeValuesWith</span><span class="token punctuation">(</span>RedisSerializationContext<span class="token punctuation">.</span>SerializationPair<span class="token punctuation">.</span><span class="token function">fromSerializer</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">getValueSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">serializeKeysWith</span><span class="token punctuation">(</span>RedisSerializationContext<span class="token punctuation">.</span>SerializationPair<span class="token punctuation">.</span><span class="token function">fromSerializer</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">getKeySerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        config <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">entryTtl</span><span class="token punctuation">(</span>Duration<span class="token punctuation">.</span><span class="token function">ofMinutes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment" spellcheck="true">// è®¾ç½®ç¼“å­˜çš„é»˜è®¤è¿‡æœŸæ—¶é—´ï¼Œä¹Ÿæ˜¯ä½¿ç”¨Durationè®¾ç½®</span>                <span class="token punctuation">.</span><span class="token function">disableCachingNullValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// ä¸ç¼“å­˜ç©ºå€¼</span>        <span class="token comment" spellcheck="true">// è®¾ç½®ä¸€ä¸ªåˆå§‹åŒ–çš„ç¼“å­˜ç©ºé—´seté›†åˆ</span>        Set<span class="token operator">&lt;</span>String<span class="token operator">></span> cacheNames <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        cacheNames<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> RedisCacheConfiguration<span class="token operator">></span> configMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        configMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token function">entryTtl</span><span class="token punctuation">(</span>Duration<span class="token punctuation">.</span><span class="token function">ofSeconds</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        RedisCacheManager cacheManager <span class="token operator">=</span> RedisCacheManager<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>redisConnectionFactory<span class="token punctuation">)</span>     <span class="token comment" spellcheck="true">// ä½¿ç”¨è‡ªå®šä¹‰çš„ç¼“å­˜é…ç½®åˆå§‹åŒ–ä¸€ä¸ªcacheManager</span>                <span class="token punctuation">.</span><span class="token function">initialCacheNames</span><span class="token punctuation">(</span>cacheNames<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// æ³¨æ„è¿™ä¸¤å¥çš„è°ƒç”¨é¡ºåºï¼Œä¸€å®šè¦å…ˆè°ƒç”¨è¯¥æ–¹æ³•è®¾ç½®åˆå§‹åŒ–çš„ç¼“å­˜åï¼Œå†åˆå§‹åŒ–ç›¸å…³çš„é…ç½®</span>                <span class="token punctuation">.</span><span class="token function">withInitialCacheConfigurations</span><span class="token punctuation">(</span>configMap<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> cacheManager<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ç„¶ååœ¨éœ€è¦ç¼“å­˜çš„åœ°æ–¹åŠ ä¸Š@Cacheableæ³¨è§£å³å¯ï¼Œunlessè¡¨ç¤ºå¦‚æœç»“æœä¸ºç©ºåˆ™ä¸è¿›è¡Œç¼“å­˜</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Cacheable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"user"</span><span class="token punctuation">,</span> key <span class="token operator">=</span> <span class="token string">"#root.targetClass + #name"</span><span class="token punctuation">,</span> unless <span class="token operator">=</span> <span class="token string">"#result eq null"</span><span class="token punctuation">)</span></code></pre><p>è¿›è¡Œæµ‹è¯•æŸ¥è¯¢ï¼Œç¬¬ä¸€æ¬¡ä»ç„¶æ˜¯å»è®¿é—®æ•°æ®åº“ï¼Œç¬¬äºŒæ¬¡æ˜¯ä»redisç¼“å­˜ä¸­æŸ¥åˆ°çš„ã€‚</p><p><img src="/images/SpringBoot/redis/redisData1.JPG" alt=""></p><blockquote><p>å‚è€ƒèµ„æ–™</p></blockquote><p><a href="https://blog.csdn.net/zsj777/article/details/80801824" target="_blank" rel="noopener">SpringBoot2æ•´åˆRedisç¼“å­˜</a></p><p><a href="https://segmentfault.com/a/1190000002906345" target="_blank" rel="noopener">RedisæŒä¹…åŒ–_segmentfault</a></p><p><a href="https://www.v2ex.com/t/49284" target="_blank" rel="noopener">æœ‰æ²¡æœ‰æ–¹æ³•è®©redis è‡ªåŠ¨åšçƒ­æ•°æ®ç¼“å­˜ï¼Ÿ</a></p>]]></content>
      
      <categories>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Redis </tag>
            
            <tag> ç¼“å­˜ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>SpringBoot2.0.4é…ç½®hystrix-dashboardï¼Œå‡ºç°Unable to connect to Command Metric Streamé”™è¯¯</title>
      <link href="/hystrix_dashboard.html"/>
      <url>/hystrix_dashboard.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><p>é…ç½®Hystrix-dashboardåè¿›å…¥ç›‘æ§é¡µé¢å‡ºç°Unable to connect to Command Metric Streamã€‚æœ¬æ¥è¿˜ä»¥ä¸ºé…ç½®ç›‘æ§é¢æ¿åº”è¯¥æ˜¯ä»¶æ¯”è¾ƒç®€å•çš„äº‹æƒ…ï¼Œæ²¡æƒ³åˆ°è¢«SpringBootç‰ˆæœ¬å‘äº†ã€‚</p><p><strong>å½“å‰çš„SpringBootç‰ˆæœ¬ä¸º2.0.4.RELEASEï¼ŒSpringCloudç‰ˆæœ¬ä¸ºFinchley.M9ã€‚</strong></p><p>æ–°å»ºä¸€ä¸ªhystrix_dashboardæ¨¡å—ï¼Œå¯¼å…¥ç›¸åº”çš„ä¾èµ–spring-cloud-starter-netflix-hystrix-dashboardã€‚</p><p>åœ¨Mainå¯åŠ¨ç±»ä¸ŠåŠ ä¸Š@EnableHystrixDashboardæ³¨è§£ï¼Œé…ç½®æ–‡ä»¶é…ç½®ä¸€ä¸‹ç«¯å£å’Œåº”ç”¨åå³å¯ã€‚å¹¶ä¸”åœ¨æ¶ˆè´¹æ¨¡å—é…ç½®actuatorä¾èµ–ã€‚</p><p>è¿™æ—¶æ‰“å¼€dashboardè¾“å…¥URLåå°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ã€‚</p><p><img src="/images/SpringCloud/hystrix-dashboard/error.JPG" alt=""></p><p>&nbsp;</p><p>æ‰¾äº†å¾ˆå¤šè§£å†³æ–¹æ¡ˆï¼Œæ‰å‘ç°æ˜¯<strong>actuatorç‰ˆæœ¬é—®é¢˜</strong>ã€‚actuatorçš„2.xç‰ˆæœ¬endpointæ˜¯åœ¨/actuatorä¹‹ä¸‹çš„ï¼Œå¹¶ä¸”åªæš´éœ²äº†healthå’Œinfoç«¯ç‚¹ã€‚<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html" target="_blank" rel="noopener">è¯¦ç»†æ–‡æ¡£ç‚¹æˆ‘</a> æ‰€ä»¥éœ€è¦ä¸ºæœåŠ¡å®ä¾‹æ·»åŠ hystrix.streamç«¯ç‚¹ã€‚</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">management</span><span class="token punctuation">:</span>  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>    <span class="token key atrule">web</span><span class="token punctuation">:</span>      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'hystrix.stream'</span><span class="token punctuation">,</span><span class="token string">'info'</span><span class="token punctuation">,</span><span class="token string">'health'</span><span class="token punctuation">]</span></code></pre><p>æ­¤æ—¶é‡å¯åå‘ç°æ—¥å¿—è¾“å‡º<strong>Registered â€˜/actuator/hystrix.streamâ€™ to hystrix.stream-actuator-endpoint</strong></p><p>å†è¾“å…¥http: //localhost:8100/actuator/hystrix.streamå°±å‘ç°å¯ä»¥è¿›è¡Œç›‘æ§äº†ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="/images/SpringCloud/hystrix-dashboard/success.JPG" alt=""></p><p>&nbsp;</p><p>å¦‚æœæƒ³ç›´æ¥é€šè¿‡http: //localhost:8100/hystrix.streamï¼Œåªéœ€è¦é…ç½®ç«¯ç‚¹çš„base-pathå³å¯</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">management</span><span class="token punctuation">:</span>  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>    <span class="token key atrule">web</span><span class="token punctuation">:</span>      <span class="token key atrule">base-path</span><span class="token punctuation">:</span> /</code></pre><p>ç†è®ºä¸Šä¿®æ”¹base-pathåº”è¯¥å°±å¯è¡Œäº†çš„ï¼Œä½†æ˜¯åˆå‡ºé”™äº†ã€‚å“ï¼Œåˆä¸çŸ¥é“æ˜¯å“ªé‡Œçš„é—®é¢˜ï¼Œå…ˆç•™ç€å§ï¼</p><p>è´´ä¸€å¼ hystrix-dashboardç•Œé¢å„éƒ¨åˆ†ä»‹ç»å›¾ï¼š</p><p><img src="/images/SpringCloud/hystrix-dashboard/instruction.png" alt=""></p>]]></content>
      
      <categories>
          
          <category> SpringCloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
            <tag> æŠ¥é”™ </tag>
            
            <tag> Hystrix-dashboard </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>SpringBoot2.0.4é…ç½®Eurekaå‡ºç°Unable to start embedded Tomcaté”™è¯¯</title>
      <link href="/eureka.html"/>
      <url>/eureka.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><h3 id="å¯¼å…¥ä¾èµ–"><a href="#å¯¼å…¥ä¾èµ–" class="headerlink" title="å¯¼å…¥ä¾èµ–"></a>å¯¼å…¥ä¾èµ–</h3><p>å®˜ç½‘ç‰ˆæœ¬å¯¹åº”çš„æè¿°</p><p><img src="/images/SpringBoot/eureka/SpringCloud.JPG" alt=""></p><p><img src="/images/SpringBoot/eureka/SpringCloudTable.JPG" alt=""></p><p>ä¸SpringBoot 2.xç‰ˆæœ¬å…¼å®¹çš„SpringCloudç‰ˆæœ¬ä¸º<strong>Finchley</strong></p><p>2.0.4ç‰ˆæœ¬pomä¾èµ–ä¸ºspring-cloud-starter-netflix-eureka-server(ä»¥åæŸ¥è¯¢æ‰€éœ€ä¾èµ–å»å®˜ç½‘æŸ¥)</p><p>ä½†æ˜¯å¯¼å…¥ä¾èµ–åé‡åˆ°çš„äº†æ— æ³•å¯åŠ¨å†…ç½®Tomcatçš„é—®é¢˜ï¼Ÿ</p><p><img src="/images/SpringBoot/eureka/error.png" alt=""></p><p><strong>jdkç‰ˆæœ¬é—®é¢˜ï¼Œjaxbçš„ä¾èµ–é—®é¢˜</strong>ï¼ŒJAXB APIæ˜¯java EE çš„APIï¼Œå› æ­¤åœ¨java SE 9.0 ä¸­ä¸å†åŒ…å«è¿™ä¸ª Jar åŒ…ã€‚ java 9 ä¸­å¼•å…¥äº†æ¨¡å—çš„æ¦‚å¿µï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒJava SEä¸­å°†ä¸å†åŒ…å«java EE çš„JaråŒ… è€Œåœ¨ java 6/7/8 æ—¶å…³äºè¿™ä¸ªAPI éƒ½æ˜¯æ†ç»‘åœ¨ä¸€èµ·çš„ã€‚æ‰€ä»¥å¯¼å…¥jaxb-coreã€jaxb-apiã€jaxb-implã€activationå››ä¸ªjaråŒ…å³å¯ï¼Œæˆ–è€…å¯¼å…¥jdk8ã€‚</p><p>æ³¨ï¼šIDEAå†…ç½®çš„jdk8ä¹Ÿä¼šæŠ¥è¿™ä¸ªé”™è¯¯ï¼Œåªèƒ½ä½¿ç”¨è‡ªå·±å¦å¤–å®‰è£…çš„jdk8ã€‚</p><hr><h3 id="pom-xmlå®Œæ•´æ–‡ä»¶"><a href="#pom-xmlå®Œæ•´æ–‡ä»¶" class="headerlink" title="pom.xmlå®Œæ•´æ–‡ä»¶"></a>pom.xmlå®Œæ•´æ–‡ä»¶</h3><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">></span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>me.freelee<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springcloud_eureka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">></span></span>jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>springcloud_eureka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">></span></span>Demo project for Spring Boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.0.4.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/></span></span> <span class="token comment" spellcheck="true">&lt;!-- lookup parent from repository --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">></span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.reporting.outputEncoding</span><span class="token punctuation">></span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.reporting.outputEncoding</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">></span></span>Finchley.M9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.sun.xml.bind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jaxb-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.xml.bind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jaxb-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.sun.xml.bind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jaxb-impl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.glassfish.jaxb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jaxb-runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2.10-b140310.1920<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-netflix-eureka-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>${spring-cloud.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>spring-milestones<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Spring Milestones<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>https://repo.spring.io/libs-milestone<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span></code></pre><p>&nbsp;</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™:"></a><strong>å‚è€ƒèµ„æ–™:</strong></h3><p><a href="https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception-in-j" target="_blank" rel="noopener">è§£å†³æ–¹æ¡ˆ</a></p><p><a href="https://www.cnblogs.com/stono/p/8445312.html" target="_blank" rel="noopener">è§£å†³æ–¹æ¡ˆä¸­æ–‡</a></p>]]></content>
      
      <categories>
          
          <category> SpringCloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Eureka </tag>
            
            <tag> SpringCloud </tag>
            
            <tag> æŠ¥é”™ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Dockerå­¦ä¹ ç¬”è®°</title>
      <link href="/docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html"/>
      <url>/docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><h3 id="Dockerä¸è™šæ‹Ÿæœº"><a href="#Dockerä¸è™šæ‹Ÿæœº" class="headerlink" title="Dockerä¸è™šæ‹Ÿæœº"></a>Dockerä¸è™šæ‹Ÿæœº</h3><blockquote><p>Dockeræ˜¯Client-Serverç»“æ„ã€‚</p><p>è™šæ‹ŸæœºæŠ€æœ¯é€šè¿‡Hypervisorå±‚æŠ½è±¡åº•å±‚åŸºç¡€è®¾æ–½èµ„æºï¼Œæä¾›ç›¸äº’éš”ç¦»çš„è™šæ‹Ÿæœºï¼Œé€šè¿‡ç»Ÿä¸€é…ç½®ã€ç»Ÿä¸€ç®¡ç†ï¼Œè®¡ç®—èµ„æºçš„å¯è¿ç»´æ€§ï¼Œä»¥åŠèµ„æºåˆ©ç”¨ç‡éƒ½èƒ½å¤Ÿå¾—åˆ°æœ‰æ•ˆçš„æå‡ã€‚åŒæ—¶ï¼Œè™šæ‹Ÿæœºæä¾›å®¢æˆ·æœºæ“ä½œç³»ç»Ÿï¼Œå®¢æˆ·æœºå˜åŒ–ä¸ä¼šå½±å“å®¿ä¸»æœºï¼Œèƒ½å¤Ÿæä¾›å¯æ§çš„æµ‹è¯•ç¯å¢ƒï¼Œæ›´èƒ½å¤Ÿå±è”½åº•å±‚ç¡¬ä»¶ç”šè‡³åŸºç¡€è½¯ä»¶çš„å·®å¼‚æ€§ï¼Œè®©åº”ç”¨åšåˆ°çš„å¹¿æ³›å…¼å®¹ã€‚ç„¶è€Œï¼Œå†ç‰›é€¼çš„è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œéƒ½ä¸å¯é¿å…åœ°å‡ºç°è®¡ç®—ã€IOã€ç½‘ç»œæ€§èƒ½æŸå¤±ï¼Œæ¯•ç«Ÿå¤šäº†ä¸€å±‚è½¯ä»¶ï¼Œæ¯•ç«Ÿè¦è¿è¡Œä¸€ä¸ªå®Œæ•´çš„å®¢æˆ·æœºæ“ä½œç³»ç»Ÿã€‚</p><p>å®¹å™¨æŠ€æœ¯ä¸¥æ ¼æ¥è¯´å¹¶ä¸æ˜¯è™šæ‹ŸåŒ–ï¼Œæ²¡æœ‰å®¢æˆ·æœºæ“ä½œç³»ç»Ÿï¼Œæ˜¯å…±äº«å†…æ ¸çš„ã€‚å®¹å™¨å¯ä»¥è§†ä¸ºè½¯ä»¶ä¾›åº”é“¾çš„é›†è£…ç®±ï¼Œèƒ½å¤ŸæŠŠåº”ç”¨éœ€è¦çš„è¿è¡Œç¯å¢ƒã€ç¼“å­˜ç¯å¢ƒã€æ•°æ®åº“ç¯å¢ƒç­‰ç­‰å°è£…èµ·æ¥ï¼Œä»¥æœ€ç®€æ´çš„æ–¹å¼æ”¯æŒåº”ç”¨è¿è¡Œï¼Œè½»è£…ä¸Šé˜µï¼Œå½“ç„¶æ˜¯æ€§èƒ½æ›´ä½³ã€‚Dockeré•œåƒç‰¹æ€§åˆ™è®©è¿™ç§æ–¹å¼ç®€å•æ˜“è¡Œã€‚å½“ç„¶ï¼Œå› ä¸ºå…±äº«å†…æ ¸ï¼Œå®¹å™¨éš”ç¦»æ€§ä¹Ÿæ²¡æœ‰è™šæ‹Ÿæœºé‚£ä¹ˆå¥½ã€‚</p><p><strong>æœåŠ¡å™¨è™šæ‹ŸåŒ–è§£å†³çš„æ ¸å¿ƒé—®é¢˜æ˜¯èµ„æºè°ƒé…ï¼Œè€Œå®¹å™¨è§£å†³çš„æ ¸å¿ƒé—®é¢˜æ˜¯åº”ç”¨å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²</strong>ã€‚</p></blockquote><p><img src="/images/Docker/dockerVSvm.jpg" alt=""></p><hr><h3 id="é•œåƒå‘½ä»¤"><a href="#é•œåƒå‘½ä»¤" class="headerlink" title="é•œåƒå‘½ä»¤"></a>é•œåƒå‘½ä»¤</h3><p><strong>docker info</strong> æŸ¥çœ‹dockerä¿¡æ¯è¯¦æƒ…</p><p><strong>docker images</strong> åˆ—å‡ºæœ¬åœ°é•œåƒï¼ŒåŒä¸€ä»“åº“æºå¯ä»¥æœ‰å¤šä¸ªTagï¼ˆç‰ˆæœ¬ï¼‰ï¼Œä½¿ç”¨Repositoryï¼šTagé€‰æ‹©ä¸åŒç‰ˆæœ¬</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â€“no-trunc å…¨éƒ¨ä¿¡æ¯</p><p><strong>docker rmi é•œåƒå</strong> åˆ é™¤é•œåƒ</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-f å¼ºåˆ¶åˆ é™¤</p><p><strong>Docker history é•œåƒå</strong> åˆ—å‡ºé•œåƒçš„å˜æ›´å†å²</p><hr><h3 id="å®¹å™¨å‘½ä»¤"><a href="#å®¹å™¨å‘½ä»¤" class="headerlink" title="å®¹å™¨å‘½ä»¤"></a>å®¹å™¨å‘½ä»¤</h3><p><strong>docker run [OPTIONS] image [COMMAND]</strong> æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPTIONSï¼š</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â€“name=â€œNew Nameâ€ æŒ‡å®šå®¹å™¨æ–°åå­—</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-d åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨ID</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-i ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸-tä½¿ç”¨ï¼ˆ-itï¼‰</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-t ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªè¾“å…¥ç»ˆç«¯</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-P éšæœºåˆ†é…ç«¯å£æ˜ å°„</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-p æŒ‡å®šç«¯å£æ˜ å°„ï¼ˆä¸»æœºç«¯å£ï¼šå®¹å™¨ç«¯å£ï¼‰</p><p><strong>docker ps [OPTIONS]</strong> åˆ—å‡ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPTIONS:</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-a åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„ + å†å²è¿è¡Œè¿‡çš„</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-q é™é»˜æ¨¡å¼ï¼Œåªæ˜¾ç¤ºå®¹å™¨ç¼–å·</p><p><strong>docker start/restart/stop å®¹å™¨å/å®¹å™¨ID</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kill å¼ºåˆ¶åˆ é™¤</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rm å®¹å™¨ID åˆ é™¤å·²åœæ­¢å®¹å™¨</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rm -f $(docker ps -a -q) åˆ é™¤æ‰€æœ‰å®¹å™¨</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rmi é•œåƒå</p><p><strong>docker logs -f -t â€“tail å®¹å™¨ID</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-f è·Ÿéšæœ€æ–°çš„æ—¥å¿—æ‰“å°</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â€“tail æ•°å­— æ˜¾ç¤ºæœ€åæŒ‡å®šçš„æ¡æ•°</p><p><strong>docker top å®¹å™¨ID</strong> æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹</p><p><strong>docker inspect å®¹å™¨ID</strong> æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚</p><p><strong>exit</strong> åœæ­¢å¹¶é€€å‡ºå®¹å™¨</p><p><strong>Ctrl+P+Q</strong> ä¸åœæ­¢é€€å‡ºå®¹å™¨</p><p><strong>docker attach ID</strong> è¿›å…¥å®¹å™¨ï¼Œä¸æ–°å»ºè¿›ç¨‹</p><p><strong>docker exec -t ID ls -l /tmp /bin/bash</strong> ç›´æ¥æ‰“å°è¿”å›ç»“æœ</p><p><strong>docker cp å®¹å™¨IDï¼šå®¹å™¨å†…è·¯å¾„ ç›®çš„ä¸»æœºè·¯å¾„</strong> æŠŠæ–‡ä»¶ä»å®¹å™¨æ‹·è´åˆ°ä¸»æœº</p><p><strong>docker commit -m=â€æè¿°â€ -a=â€ä½œè€…â€ å®¹å™¨ID æ–°é•œåƒå:[æ ‡ç­¾å]</strong> æäº¤ä¿®æ”¹åå®¹å™¨ç”Ÿæˆæ–°çš„é•œåƒ</p><hr><h3 id="Dockerå®¹å™¨æ•°æ®å·"><a href="#Dockerå®¹å™¨æ•°æ®å·" class="headerlink" title="Dockerå®¹å™¨æ•°æ®å·"></a>Dockerå®¹å™¨æ•°æ®å·</h3><blockquote><p>å®¹å™¨çš„æŒä¹…åŒ–ã€å®¹å™¨é—´ç»§æ‰¿+å…±äº«æ•°æ®</p></blockquote><p>æ•°æ®å·ï¼š</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å®¹å™¨å†…æ·»åŠ ï¼š</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç›´æ¥æ·»åŠ ï¼š</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker run -it -v /å®¿ä¸»æœºç»å¯¹è·¯å¾„ç›®å½•ï¼š/å®¹å™¨å†…ç›®å½• é•œåƒå</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å®¹å™¨åœæ­¢é€€å‡ºåï¼Œä¸»æœºä¿®æ”¹æ•°æ®å¯ä»¥åŒæ­¥</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æƒé™ï¼šdocker run -it -v /å®¿ä¸»æœºç»å¯¹è·¯å¾„ç›®å½•ï¼š/å®¹å™¨å†…ç›®å½•ï¼šro é•œåƒå æ•°æ®åªè¯»</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dockerfileæ·»åŠ ï¼š</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1ï¼‰ç¼–å†™Dockerfileæ–‡ä»¶</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2ï¼‰docker build -f ç›®å½•/Dockerfile -t freelee/é•œåƒå æ„å»ºé•œåƒ</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3ï¼‰Dockerä¼šé»˜è®¤æŒ‡å®šä¸»æœºæ•°æ®å·åœ°å€ï¼ˆå¯é€šè¿‡inspectå‘½ä»¤æŸ¥çœ‹ï¼‰</p><p>æ•°æ®å·å®¹å™¨ï¼š</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æŒ‚è½½æ•°æ®å·çš„å®¹å™¨ï¼Œå…¶ä»–å®¹å™¨é€šè¿‡æŒ‚è½½è¿™ä¸ªï¼ˆçˆ¶å®¹å™¨ï¼‰å®ç°æ•°æ®å…±äº«ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å®¹å™¨é—´ä¼ é€’å…±äº«ï¼š<strong>docker run -it â€“name dc02 â€“volumes-from dc01 freelee/centos</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>åˆ é™¤çˆ¶å®¹å™¨åï¼ŒåŸæ•°æ®ä¸ä¼šä¸¢å¤±ã€‚å­å®¹å™¨ä¾æ—§å¯ä»¥å…±äº«æ•°æ®ï¼Œæ•°æ®å·ç”Ÿå‘½å‘¨æœŸä¸€ç›´åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨å®ƒä¸ºæ­¢</strong></p><hr><h3 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h3><blockquote><p>Dockerfileæ˜¯ç”¨æ¥æ„å»ºDockeré•œåƒçš„æ„å»ºæ–‡ä»¶</p></blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1ï¼‰æ¯æ¡æŒ‡ä»¤ä¿ç•™å­—å¿…é¡»å¤§å†™ä¸”åè·Ÿå‚æ•°</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2ï¼‰ä»ä¸Šåˆ°ä¸‹ï¼Œé¡ºåºæ‰§è¡Œ</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3ï¼‰æ¯æ¡æŒ‡ä»¤éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒå±‚ï¼Œå¹¶å¯¹é•œåƒè¿›è¡Œæäº¤</p><p>æŒ‡ä»¤ï¼š</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>FROM</strong> åŸºç¡€é•œåƒ</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>MAINTER</strong> ä½œè€…å’Œé‚®ç®±</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>RUN</strong> æ„å»ºæ—¶éœ€è¦æ‰§è¡Œçš„å‘½ä»¤</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>EXPOSE</strong> æš´éœ²çš„ç«¯å£å·</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>WORKDIR</strong> å·¥ä½œç›®å½•</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>ENV</strong> æ„å»ºè¿‡ç¨‹ä¸­è®¾ç½®ç¯å¢ƒå˜é‡</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>ADD</strong> å°†å®¿ä¸»æœºç›®å½•ä¸‹æ–‡ä»¶æ‹·è´è¿›é•œåƒä¸”ADDå‘½ä»¤ä¼šè‡ªåŠ¨å¤„ç†URLå’Œè§£å‹taråŒ…</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>VOLUMN</strong> å®¹å™¨æ•°æ®å·</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>CMD</strong> å®¹å™¨è¿è¡Œæ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œæœ€åä¸€ä¸ªå‘½ä»¤ä¼šè¦†ç›–å‰é¢</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>ENTRYPOINT</strong> å®¹å™¨è¿è¡Œæ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œåé¢çš„å‘½ä»¤ä¼šå åŠ åœ¨åé¢</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>ONBUILD</strong> ç»§æ‰¿æ­¤é•œåƒçš„å­é•œåƒåœ¨æ„å»ºæ—¶ä¼šè§¦å‘</p><h4 id="Dockerfileæ¡ˆä¾‹"><a href="#Dockerfileæ¡ˆä¾‹" class="headerlink" title="Dockerfileæ¡ˆä¾‹"></a>Dockerfileæ¡ˆä¾‹</h4><p>æ¡ˆä¾‹ä¸€ï¼šåŸå§‹centosè¿›å…¥é•œåƒé»˜è®¤è·¯å¾„ä¸º / ï¼Œä¸”ä¸æ”¯æŒvimç¼–è¾‘å™¨å’ŒæŸ¥çœ‹ç½‘ç»œé…ç½®ifconfig</p><pre class=" language-dockerfile"><code class="language-dockerfile">FROM centosENV mypath /tmpWORKDIR $mypathRUN yum -y install vimRUN yum -y install net-toolsEXPOSE 80CMD /bin/bash</code></pre><p>æ¡ˆä¾‹äºŒï¼šONBUILDæŒ‡ä»¤</p><pre class=" language-dockerfile"><code class="language-dockerfile">FROM centosRUN yum install -y curlENTRYPOINT ["curl","-s","http://ip.cn"]ONBUILD RUN echo "father image onbuild......"</code></pre><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p><a href="https://www.zhihu.com/question/48174633/answer/218092411" target="_blank" rel="noopener">çŸ¥ä¹ä¸Šç½‘æ˜“äº‘å…³äºDockerå’Œè™šæ‹Ÿæœºçš„å›ç­”</a></p>]]></content>
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> Dockerfile </tag>
            
            <tag> å®¹å™¨æ•°æ®å· </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>è®¡ç®—æœºç½‘ç»œå­¦ä¹ è®°å½•</title>
      <link href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html"/>
      <url>/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><p>å¤§äºŒä¸‹å­¦æœŸå¼€è¿‡è¿™é—¨è¯¾ï¼Œå½“æ—¶å› ä¸ºè¯¾æ—¶åŸå› å¤§æ¦‚åªè®²åˆ°DNSï¼Œè€Œä¸”å¾ˆå¤šéƒ½å¿˜äº†ï¼Œç°åœ¨å†å¤ä¹ ä¸€éä»¥æ­¤è®°å½•ã€‚</p><p>è¯¾ç¨‹å­¦ä¹ è§†é¢‘ï¼š<a href="https://www.bilibili.com/video/av19786297?from=search&amp;seid=3758910974265066829" target="_blank" rel="noopener">å“ˆå°”æ»¨å·¥ä¸šå¤§å­¦ è®¡ç®—æœºç½‘ç»œè¯¾ç¨‹è§†é¢‘</a></p><p>å‚è€ƒä¹¦ç±ï¼šã€Šè®¡ç®—æœºç½‘ç»œã€‹ï¼ˆç¬¬ä¸ƒç‰ˆï¼‰</p><h2 id="ç‰©ç†å±‚"><a href="#ç‰©ç†å±‚" class="headerlink" title="ç‰©ç†å±‚"></a>ç‰©ç†å±‚</h2><h3 id="ä¿¡é“å¤ç”¨æŠ€æœ¯ï¼ˆ2018-09-21ï¼‰"><a href="#ä¿¡é“å¤ç”¨æŠ€æœ¯ï¼ˆ2018-09-21ï¼‰" class="headerlink" title="ä¿¡é“å¤ç”¨æŠ€æœ¯ï¼ˆ2018.09.21ï¼‰"></a>ä¿¡é“å¤ç”¨æŠ€æœ¯ï¼ˆ2018.09.21ï¼‰</h3><p>ä¸ºä»€ä¹ˆæœ‰ä¿¡é“å¤ç”¨æŠ€æœ¯ï¼Ÿä¼ ç»Ÿä¿¡æ¯ä¼ è¾“æ˜¯å•å¯¹å•è¿›è¡Œçš„ï¼Œå¦‚æœç”¨æˆ·ä¸ä½¿ç”¨çš„è¯å°±ä¼šç©ºé—²ï¼Œä¿¡é“åˆ©ç”¨ç‡å°†ä¼šå¾ˆä½ã€‚å› æ­¤æå‡ºäº†å¤ç”¨æ¦‚å¿µï¼Œä½†æ˜¯è¿™é‡Œåˆæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¤šä¸ªç”¨æˆ·å¦‚æœåŒæ—¶ä½¿ç”¨ï¼Œä¿¡é“çš„ä¼ è¾“çš„ä¿¡æ¯å²‚ä¸æ˜¯ä¹±äº†å¥—ï¼Ÿï¼æ¥ç€æœ‰äº†ä»¥ä¸‹å‡ ç§ä¸»è¦å¤ç”¨æŠ€æœ¯ã€‚</p><ul><li><p><strong>é¢‘åˆ†å¤ç”¨</strong>ï¼šç”¨æˆ·åˆ†é…åˆ°ä¸€å®šçš„é¢‘å¸¦ï¼Œä¸åŒçš„ç”¨æˆ·å†ä¸ç”¨çš„é¢‘å¸¦ä¸Šè¿›è¡Œä¼ è¾“æ—¶ä¸ä¼šç›¸äº’å¹²æ‰°ï¼Œå¸¸è§åº”ç”¨å°±æ˜¯æœ‰çº¿ç”µè§†ï¼Œé¥æ§æ¿å…¶å®å°±æ˜¯è°ƒé¢‘æ¥æ¢å°ã€‚</p></li><li><p><strong>æ³¢åˆ†å¤ç”¨</strong>ï¼šè·Ÿé¢‘åˆ†å¤ç”¨ç±»ä¼¼ï¼Œåªä¸è¿‡æ˜¯åœ¨å…‰æ³¢ä¸­è¿›è¡Œä¸åŒçš„æ³¢é•¿ä¼ è¾“ï¼ˆä¹Ÿå°±æ˜¯ä¸åŒçš„é¢‘ç‡ï¼‰ã€‚</p></li><li><p><strong>æ—¶åˆ†å¤ç”¨</strong>ï¼šå°†æ—¶é—´åˆ†ç‰‡ï¼Œç”¨æˆ·åˆ†é…åˆ°ä¸åŒçš„æ—¶é—´ç‰‡è¿›è¡Œä¼ è¾“ã€‚</p></li><li><p><strong>ç åˆ†å¤ç”¨</strong>ï¼šç åˆ†å¤ç”¨æ¯”è¾ƒå¤æ‚ä¸€ç‚¹ï¼Œè¯¦ç»†ä»‹ç»ä¸€ä¸‹å®ç°åŸç†ã€‚</p><p>å®šä¹‰ï¼šâ€œç åˆ†å¤ç”¨æ˜¯ç”¨ä¸€ç»„åŒ…å«äº’ç›¸æ­£äº¤çš„ç å­—çš„ç ç»„æºå¸¦å¤šè·¯ä¿¡å·â€</p><p>ä¸åŒçš„ç«™åˆ†é…åˆ°ä¸åŒçš„å”¯ä¸€çš„m bitçš„ç ç‰‡åºåˆ—ï¼Œä¸”é¡»ç›¸äº’æ­£äº¤ï¼Œè¿™æ ·æ‰èƒ½æŠµæŠ—å¹²æ‰°ã€‚<br>$$<br>å†…ç§¯å…¬å¼ï¼š SÂ·T=\frac {1}{m} \sum_{i=1}^m S_iT_i=0<br>$$<br>ä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾æœ‰ä¸¤ä¸ªç«™Så’ŒTï¼Œè®¾ç«™Sçš„ç ç‰‡åºåˆ—ä¸ºï¼ˆ-1 -1 -1 +1 +1 -1 +1 +1ï¼‰ï¼Œç«™Tçš„ç ç‰‡åºåˆ—ä¸ºï¼ˆ-1 -1 +1 -1 +1 +1 +1 -1ï¼‰ï¼Œå†…ç§¯è®¡ç®—å¯å¾—è¿™ä¸¤ä¸ªç ç‰‡åºåˆ—ç»“æœä¸º0ã€‚</p><p><em>æ³¨ï¼š</em>ç„¶åæˆ‘ä»¬é€šå¸¸æŒ‡å®šä¼ è¾“æ¯”ç‰¹1å°±æ˜¯1ï¼Œå‘é€æ¯”ç‰¹0æ—¶ä¸º-1ï¼ˆè¿ç”¨äº†æ­£äº¤çš„ç‰¹æ€§ï¼‰ã€‚</p><p>å‡è®¾Sç«™å‘é€äº†æ•°æ®æ˜¯1å³ï¼ˆ-1 -1 -1 +1 +1 -1 +1 +1ï¼‰ï¼ŒTå‘é€çš„æ•°æ®ä¹Ÿæ˜¯1å³ï¼ˆ-1 -1 +1 -1 +1 +1 +1 -1ï¼‰ã€‚</p><p>å åŠ åå°±æ˜¯ï¼ˆ-1 -1 -1 +1 +1 -1 +1 +1ï¼‰+ï¼ˆ-1 -1 +1 -1 +1 +1 +1 -1ï¼‰</p><p>æ¥æ”¶æ–¹å¦‚æœæ˜¯ä½¿ç”¨Sç«™çš„ç ç‰‡åºåˆ—ï¼Œé‚£ä¹ˆç»è¿‡ä»¥ä¸‹è®¡ç®—ï¼š</p><p>ï¼ˆ-1 -1 -1 +1 +1 -1 +1 +1ï¼‰Â·ï¼ˆï¼ˆ-1 -1 -1 +1 +1 -1 +1 +1ï¼‰+ï¼ˆ-1 -1 +1 -1 +1 +1 +1 -1ï¼‰ï¼‰=1+0=1ï¼Œå°±æ˜¯Så‘é€çš„æ•°æ®ã€‚</p><p>å› ä¸ºTç«™å’ŒSç«™ç ç‰‡åºåˆ—æ­£äº¤ï¼Œæ‰€ä»¥ä½¿ç”¨Tå‘é€çš„æ•°æ®ä¸ç®¡å’ŒSå‘é€çš„æ•°æ®å¦‚æœå åŠ ï¼Œå…¶å†…ç§¯ç»“æœéƒ½æ˜¯0ã€‚è¿™æ ·å°±æ˜¯å®ç°ä¸åŒç”¨æˆ·ä¹‹é—´çš„ä¿¡å·ä¸æ··ä¹±ã€‚</p></li></ul><h2 id="åº”ç”¨å±‚"><a href="#åº”ç”¨å±‚" class="headerlink" title="åº”ç”¨å±‚"></a>åº”ç”¨å±‚</h2><h3 id="è¶…æ–‡æœ¬ä¼ é€åè®®HTTPï¼ˆ2018-09-23ï¼‰"><a href="#è¶…æ–‡æœ¬ä¼ é€åè®®HTTPï¼ˆ2018-09-23ï¼‰" class="headerlink" title="è¶…æ–‡æœ¬ä¼ é€åè®®HTTPï¼ˆ2018.09.23ï¼‰"></a>è¶…æ–‡æœ¬ä¼ é€åè®®HTTPï¼ˆ2018.09.23ï¼‰</h3><h4 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><p>HTTPåè®®å®šä¹‰äº†æµè§ˆå™¨å¦‚ä½•å‘ä¸‡ç»´ç½‘æœåŠ¡å™¨è¯·æ±‚ä¸‡ç»´ç½‘æ–‡æ¡£ï¼Œä»¥åŠæœåŠ¡å™¨å¦‚ä½•æŠŠæ–‡æ¡£ä¼ é€ç»™æµè§ˆå™¨ã€‚æ˜¯åº”ç”¨å±‚çš„ä¸€ä¸ªåè®®ä½¿ç”¨äº†TCPåè®®æ¥ä¿è¯æ•°æ®çš„å¯é ä¼ è¾“ï¼Œæ¯«æ— ç–‘é—®å®ƒæ˜¯äº’è”ç½‘é€šä¿¡çš„åŸºç¡€ã€‚</p><h4 id="å·¥ä½œè¿‡ç¨‹"><a href="#å·¥ä½œè¿‡ç¨‹" class="headerlink" title="å·¥ä½œè¿‡ç¨‹"></a>å·¥ä½œè¿‡ç¨‹</h4><p>ä¸€å¼€å§‹ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€TCPè¿æ¥çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯é»˜è®¤åœ¨80ç«¯å£ç›‘å¬å®¢æˆ·ç«¯å»ºç«‹TCPè¿æ¥è¯·æ±‚ã€‚åœ¨ä¸æœåŠ¡å™¨å»ºç«‹å¥½TCPè¿æ¥åï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯è¯·æ±‚èµ„æºï¼Œå‘é€HTTPè¯·æ±‚æŠ¥æ–‡ï¼ŒæœåŠ¡å™¨ç«¯æ”¶åˆ°è¯·æ±‚æŠ¥æ–‡åï¼Œå°†è¯·æ±‚å†…å®¹å“åº”ç»™å®¢æˆ·ç«¯ã€‚å®Œæˆè¯·æ±‚åï¼ŒTCPçš„è¿æ¥å°±è¢«é‡Šæ”¾ä»¥ä¾›å…¶ä»–çš„è¯·æ±‚ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨æ˜¯å¦‚ä½•â€œç†è§£â€å®¢æˆ·ç«¯çš„è¯·æ±‚çš„ï¼Œå¹¶ä¸”æ˜¯å¦‚ä½•å“åº”ç»™å®¢æˆ·ç«¯çš„å‘¢ï¼Ÿè¿™å°±æ˜¯httpåè®®è¦å¹²çš„äº‹æƒ…ï¼Œç®€å•æ¥è¯´httpåè®®è§„å®šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¦‚ä½•è¿›è¡Œäº¤äº’ã€‚</p><h4 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h4><p>httpåè®®æ˜¯==æ— çŠ¶æ€==çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ç®¡å®¢æˆ·ç«¯ä¹‹å‰æ˜¯å¦è®¿é—®è¿‡æœåŠ¡å™¨æŸä¸€é¡µé¢æˆ–èµ„æºï¼Œæ¯ä¸€æ¬¡çš„è®¿é—®éƒ½ä¸ç¬¬ä¸€æ¬¡è®¿é—®æ—¶ç›¸åŒã€‚è¿™ä¹ˆè®¾ç½®æœ‰å¥½æœ‰åï¼Œå¥½å¤„æ˜¯æœåŠ¡å™¨ä¸éœ€è¦å»è®°å½•å’Œç»´æŠ¤å®¢æˆ·ç«¯çš„çŠ¶æ€ï¼Œèƒ½æ”¯æŒé«˜å¹¶å‘çš„è¯·æ±‚ã€‚åå¤„æ˜¯è¿™æ ·ç®€å•çš„è®¾è®¡åœ¨ä¸€äº›åœºæ™¯å°±æ˜¾å¾—ååˆ†ä¸è¶³ï¼Œæ¯”å¦‚è´­ç‰©,å½“æœåŠ¡å™¨æ— æ³•è®°å½•çš„ä¹‹å‰çš„çŠ¶æ€æ—¶ï¼Œé‚£ä½ çš„è´­ç‰©è½¦çš„å•†å“å°±æ— æ³•ä¿å­˜ä¸‹æ¥ï¼Œæ¯ä¸€æ¬¡æ‰“å¼€é¡µé¢è´­ç‰©è½¦éƒ½æ˜¯ç©ºçš„ï¼Œè§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨cookieæ¥ä¿å­˜çŠ¶æ€ã€‚</p><p>httpåè®®æ˜¯==æ— è¿æ¥==çš„ï¼Œæ¯æ¬¡è¿æ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚æœåŠ¡å™¨å¤„ç†å®Œå®¢æˆ·çš„è¯·æ±‚ï¼Œå¹¶æ”¶åˆ°å®¢æˆ·çš„åº”ç­”åï¼Œå³æ–­å¼€è¿æ¥ã€‚é‡‡ç”¨è¿™ç§æ–¹å¼å¯ä»¥èŠ‚çœä¼ è¾“æ—¶é—´ï¼Œä½†æ˜¯ç°åœ¨çš„ç½‘é¡µæ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œå¦‚æœæ¯æ¬¡åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œå•å•å°±è¿æ¥å»ºç«‹é‡Šæ”¾å°±ä¼šæµªè´¹å¾ˆå¤šæ—¶é—´å’Œèµ„æºï¼Œæ‰€ä»¥åæ¥å‡ºç°çš„é•¿è¿æ¥æ–¹å¼æ¯”è¾ƒå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><h4 id="æŠ¥æ–‡ç»“æ„"><a href="#æŠ¥æ–‡ç»“æ„" class="headerlink" title="æŠ¥æ–‡ç»“æ„"></a>æŠ¥æ–‡ç»“æ„</h4><ul><li><p>è¯·æ±‚æŠ¥æ–‡ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€çš„è¯·æ±‚æŠ¥æ–‡</p></li><li><p>å“åº”æŠ¥æ–‡ï¼šæœåŠ¡å™¨å“åº”ç»™å®¢æˆ·ç«¯çš„å›ç­”ã€‚</p></li></ul><p>è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡æ˜¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆçš„ã€‚</p><p><strong>è¯·æ±‚æŠ¥æ–‡</strong>ï¼šè¯·æ±‚è¡Œã€è¯·æ±‚å¤´éƒ¨ã€è¯·æ±‚ä½“</p><p>1ã€è¯·æ±‚è¡ŒåŒ…å«äº†è¯·æ±‚çš„ç±»å‹ï¼Œè¯·æ±‚èµ„æºçš„è·¯å¾„å’Œhttpåè®®ç‰ˆæœ¬ä¿¡æ¯</p><p><img src="/images/Compute Network/http/3.JPG" alt=""></p><p>è¯·æ±‚ç±»å‹ï¼šä¸‹è¡¨åˆ—ä¸¾äº†ä¸‰ç§å¸¸ç”¨çš„è¯·æ±‚ç±»å‹</p><table><thead><tr><th style="text-align:center">ç±»å‹</th><th style="text-align:center">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">GET</td><td style="text-align:center">è¯·æ±‚è¯»å–URLæ‰€æ ‡å¿—çš„ä¿¡æ¯</td></tr><tr><td style="text-align:center">POST</td><td style="text-align:center">ç»™æœåŠ¡å™¨æ·»åŠ ä¿¡æ¯</td></tr><tr><td style="text-align:center">HEAD</td><td style="text-align:center">è¯·æ±‚è¯»å–ç”±URLæ‰€æ ‡å¿—çš„ä¿¡æ¯çš„å¤´éƒ¨</td></tr></tbody></table><p>GETè¯·æ±‚æ˜¯æœ€å¸¸ç”¨çš„è¯·æ±‚ç±»å‹ï¼Œå½“å‘æœåŠ¡å™¨è¯·æ±‚èµ„æºæ—¶é€šè¿‡URLæ¥å®šä½ï¼Œæ¯”å¦‚</p><pre class=" language-html"><code class="language-html">https://www.zhihu.com/search?type=content&amp;q=%E8%AE%A1%E7%AE%97%E6%9C%BA</code></pre><p>ä¸‰ç§è¯·æ±‚ç±»å‹åº”ç”¨åœºæ™¯ï¼š</p><ol><li><p>è¯·æ±‚çŸ¥ä¹æœåŠ¡å™¨é‡Œçš„searché¡µé¢çš„èµ„æºã€‚ä½†æ˜¯æ¶‰åŠä¸€äº›ç™»å½•æ³¨å†Œæ—¶çš„ç›¸å…³ä¿¡æ¯æäº¤æ—¶ï¼Œè¿™ç§è¯·æ±‚ç±»å‹ä¸å®‰å…¨ã€‚</p></li><li><p>POSTè¯·æ±‚å¯ä»¥å°†è¯·æ±‚çš„ä¿¡æ¯å°è£…åœ¨è¯·æ±‚æ•°æ®ä¸­ï¼ˆGETè¯·æ±‚çš„è¯·æ±‚æ•°æ®éƒ¨åˆ†é€šå¸¸ä¸ºç©ºï¼‰ï¼Œä¸ä¼šåœ¨URLæš´éœ²ç»™ç”¨æˆ·ã€‚</p></li><li><p>å½“åªéœ€è¦æŸ¥çœ‹é¡µé¢çš„çŠ¶æ€æ—¶ï¼Œä½¿ç”¨HEADè¯·æ±‚æ•ˆç‡ä¼šå¾ˆé«˜ï¼Œå› ä¸ºå®ƒåªè¿”å›å“åº”å¤´ï¼Œè€Œä¸è¿”å›é¡µé¢çš„å†…å®¹ã€‚</p></li></ol><p><em>æ³¨ï¼šURIï¼šç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼ŒURLï¼šç»Ÿä¸€èµ„æºå®šä½ç¬¦ã€‚URIåŒ…æ‹¬URLå’ŒURNã€‚ç®€å•æ¥è¯´ï¼ŒURIæ˜¯é€šè¿‡æŸä¸€è§„åˆ™æ¥å”¯ä¸€ç¡®å®šæŸä¸€èµ„æºï¼ŒURLæ˜¯é€šè¿‡å®šä½ï¼ˆæ¯”å¦‚ä¸»æœºä¸Šèµ„æºçš„è·¯å¾„ï¼‰æ¥å”¯ä¸€ç¡®å®šæŸä¸€èµ„æºã€‚å®šä½å°±å¯ä»¥è¿‘ä¼¼çœ‹åšURIçš„æŸä¸€è§„åˆ™ä¸­çš„ä¸€ç§ã€‚</em></p><p>2ã€è¯·æ±‚å¤´éƒ¨æœ‰å¾ˆå¤šå±æ€§ï¼ˆé”®å€¼å¯¹ï¼‰ç»„æˆã€‚</p><p>å¸¸è§çš„æœ‰Hostï¼ˆä¸»æœºåŸŸåï¼‰ã€User-Agentï¼ˆæµè§ˆå™¨ä¿¡æ¯ï¼‰ã€Accept-Languageï¼ˆè¿”å›å†…å®¹ä½¿ç”¨çš„è¯­è¨€ï¼‰ã€Connectionï¼ˆå†³å®šæ‰§è¡Œå½“å‰çš„äº‹åŠ¡åæ˜¯å¦å…³é—­è¿æ¥ï¼‰<a href="https://zh.wikipedia.org/wiki/HTTP%E5%A4%B4%E5%AD%97%E6%AE%B5#%E8%AF%B7%E6%B1%82%E5%AD%97%E6%AE%B5" target="_blank" rel="noopener">è·å–æ›´å¤šè¯·æ±‚å­—æ®µä¿¡æ¯</a></p><p><img src="/images/Compute Network/http/4.JPG" alt=""></p><p>3ã€è¯·æ±‚æ•°æ®</p><p>è¯·æ±‚æŠ¥æ–‡é‡Œå¾ˆå°‘ä½¿ç”¨åˆ°è¿™ä¸ªå­—æ®µï¼ŒPOSTè¯·æ±‚å¯èƒ½ä¼šå¸¸ç”¨åˆ°ã€‚åœ¨å“åº”æŠ¥æ–‡é‡Œç»å¸¸ç”¨åˆ°æ­¤å­—æ®µæ¥è¿”å›é¡µé¢å†…å®¹ã€‚</p><hr><p><strong>å“åº”æŠ¥æ–‡</strong>ï¼šçŠ¶æ€è¡Œã€å“åº”å¤´ã€å“åº”æ­£æ–‡</p><p>1ã€çŠ¶æ€è¡Œ</p><p>é€šè¿‡çŠ¶æ€ç è¿”å›è®¿é—®çš„çŠ¶æ€ã€‚</p><table><thead><tr><th>çŠ¶æ€ç </th><th>çŠ¶æ€ä¿¡æ¯</th></tr></thead><tbody><tr><td>1XX</td><td>ä»£è¡¨è¯·æ±‚å·²è¢«æ¥å—ï¼Œéœ€è¦ç»§ç»­å¤„ç†</td></tr><tr><td>2XX</td><td>ä»£è¡¨è¯·æ±‚å·²æˆåŠŸè¢«æœåŠ¡å™¨æ¥æ”¶ã€ç†è§£ã€å¹¶æ¥å—</td></tr><tr><td>3XX</td><td>ä»£è¡¨éœ€è¦å®¢æˆ·ç«¯é‡‡å–è¿›ä¸€æ­¥çš„æ“ä½œæ‰èƒ½å®Œæˆè¯·æ±‚ã€‚é€šå¸¸ï¼Œè¿™äº›çŠ¶æ€ç ç”¨æ¥é‡å®šå‘ï¼Œåç»­çš„è¯·æ±‚åœ°å€ï¼ˆé‡å®šå‘ç›®æ ‡ï¼‰åœ¨æœ¬æ¬¡å“åº”çš„LocationåŸŸä¸­æŒ‡æ˜</td></tr><tr><td>4XX</td><td>ä»£è¡¨äº†å®¢æˆ·ç«¯çœ‹èµ·æ¥å¯èƒ½å‘ç”Ÿäº†é”™è¯¯ï¼Œå¦¨ç¢äº†æœåŠ¡å™¨çš„å¤„ç†</td></tr><tr><td>5XX</td><td>è¡¨ç¤ºæœåŠ¡å™¨æ— æ³•å®Œæˆæ˜æ˜¾æœ‰æ•ˆçš„è¯·æ±‚ã€‚è¿™ç±»çŠ¶æ€ç ä»£è¡¨äº†æœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­æœ‰é”™è¯¯æˆ–è€…å¼‚å¸¸çŠ¶æ€å‘ç”Ÿï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æœåŠ¡å™¨æ„è¯†åˆ°ä»¥å½“å‰çš„è½¯ç¡¬ä»¶èµ„æºæ— æ³•å®Œæˆå¯¹è¯·æ±‚çš„å¤„ç†</td></tr></tbody></table><p><a href="https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81" target="_blank" rel="noopener">è·å–æ›´å¤šè¯¦ç»†çŠ¶æ€ç ä¿¡æ¯</a></p><p>2ã€å“åº”å¤´</p><p>ä¹Ÿæ˜¯ç”±å¾ˆå¤šå­—æ®µç»„æˆï¼ˆé”®å€¼å¯¹ï¼‰ã€‚å¸¸è§çš„æœ‰content-lengthï¼ˆä»¥å…«ä½å­—èŠ‚æ•°ç»„è¡¨ç¤ºçš„è¯·æ±‚ä½“çš„é•¿åº¦ï¼‰ã€content-typeï¼ˆè¯·æ±‚ä½“çš„ å¤šåª’ä½“ç±»å‹ ç”¨äºPOSTå’ŒPUTè¯·æ±‚ä¸­ï¼‰ã€date(å‘é€è¯¥æ¶ˆæ¯çš„æ—¥æœŸå’Œæ—¶é—´)â€¦â€¦</p><p><a href="https://zh.wikipedia.org/wiki/HTTP%E5%A4%B4%E5%AD%97%E6%AE%B5#%E8%AF%B7%E6%B1%82%E5%AD%97%E6%AE%B5" target="_blank" rel="noopener">è·å–æ›´å¤šè¯·æ±‚å­—æ®µä¿¡æ¯</a></p><p>3ã€å“åº”æ­£æ–‡</p><p>æœåŠ¡å™¨å“åº”ç»™å®¢æˆ·ç«¯æ‰€è¯·æ±‚çš„å†…å®¹ã€‚å¦‚ï¼š</p><p><img src="/images/Compute Network/http/5.JPG" alt=""></p><h4 id="è¿æ¥å»ºç«‹æ–¹å¼"><a href="#è¿æ¥å»ºç«‹æ–¹å¼" class="headerlink" title="è¿æ¥å»ºç«‹æ–¹å¼"></a>è¿æ¥å»ºç«‹æ–¹å¼</h4><ul><li>éæŒç»­è¿æ¥ï¼šåœ¨http1.0ç‰ˆæœ¬ï¼Œå¯¹äºé¡µé¢ä¸Šçš„æ¯ä¸€ä¸ªé“¾æ¥çš„è¯·æ±‚éƒ½éœ€è¦é‡æ–°åˆ›å»ºä¸€ä¸ªTCPè¿æ¥ï¼Œä¸ä»…ä»…æ˜¯åœ¨æ—¶é—´ä¸Šå»¶é•¿å¾ˆå¤šï¼Œå¹¶ä¸”åœ¨æœåŠ¡å™¨æ¯æ¬¡å»ºç«‹è¿æ¥éƒ½è¦åˆ†é…ç¼“å­˜å’Œå˜é‡ï¼Œåœ¨è¯·æ±‚å¾ˆå¤§çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨çš„å‹åŠ›ä¼šéå¸¸çš„é‡ã€‚</li><li>æŒç»­è¿æ¥ï¼šåœ¨http1.1ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨äº†æŒç»­è¿æ¥ï¼Œä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯å‘é€è¯·æ±‚æœåŠ¡å™¨å“åº”åä»ç„¶å¯ä»¥ä¿æŒè¿™æ¡è¿æ¥ï¼Œåœ¨è¯·æ±‚å¤´ä¸­ä¼šå¸¦ä¸Šconnectionï¼škeep-aliveçš„å­—æ®µã€‚è¿™ä¹ˆä¸€æ¥åœ¨æ—¶é—´å’Œèµ„æºä¸Šéƒ½å¤§å¤§å‡å°‘ã€‚æŒç»­è¿æ¥åˆåˆ†ä¸ºä¸¤ç§ï¼šè¯·æ±‚ç®¡çº¿åŒ–å’Œè¯·æ±‚éç®¡çº¿åŒ–ã€‚éç®¡çº¿åŒ–çš„ç‰¹ç‚¹æ˜¯åœ¨å‰ä¸€ä¸ªè¯·æ±‚å¾—åˆ°å“åº”åæ‰èƒ½å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œæ‰€ä»¥åœ¨å‘é€å®Œè¯·æ±‚åˆ°æ”¶åˆ°å“åº”è¿™æ®µæ—¶é—´TCPè¿æ¥æ˜¯ç©ºé—²åœ¨é‚£çš„ï¼Œé€ æˆäº†èµ„æºçš„æµªè´¹ã€‚è€Œç®¡çº¿åŒ–åˆ™æ˜¯å¯ä»¥è¿ç»­çš„å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿ç»­å“åº”ï¼Œå¾ˆå¤§çš„æé«˜çš„åˆ©ç”¨ç‡å’Œå“åº”æ•ˆç‡ã€‚</li></ul><h4 id="httpå‘å±•"><a href="#httpå‘å±•" class="headerlink" title="httpå‘å±•"></a>httpå‘å±•</h4><p><img src="/images/Compute Network/http/NewImage.png" alt=""></p><p>http1.1é™¤äº†åœ¨é•¿è¿æ¥ä¸Šä¸1.0ç‰ˆæœ¬ä¸åŒï¼Œåœ¨ç¼“å­˜æ–¹é¢http1.0æ˜¯é€šè¿‡æ¡ä»¶è¯·æ±‚ï¼ˆè¯·æ±‚çš„if-Modified-Sinceå’Œå“åº”çš„Last-Modifiedï¼‰çš„å­—æ®µæ¥åˆ¤æ–­ç¼“å­˜æ˜¯å¦æœ‰æ•ˆã€‚http1.1åŠ å…¥äº†ETagæ¥æ ‡è¯†URLä¸Šçš„èµ„æºçš„ç‰¹å®šç‰ˆæœ¬ã€‚åœ¨å¸¦å®½ä¼˜åŒ–æ–¹é¢å…è®¸è¯·æ±‚èµ„æºçš„æŸä¸€éƒ¨åˆ†ï¼ˆContent-Rangeå­—æ®µå®ç°ï¼‰ï¼Œæ–°å¢ä¸€ä¸ª100çŠ¶æ€ç ç”¨æ¥åœ¨è¯·æ±‚èµ„æºå‰å…ˆå‘é€ä¸€ä¸ªåªå¸¦è¯·æ±‚å¤´çš„è¯·æ±‚ï¼Œè¿™æ ·ä¸€æ¥é¿å…åœ¨ä¸çŸ¥é“æœåŠ¡å™¨æ˜¯å¦ä¼šæ‹’ç»è¯·æ±‚çš„æƒ…å†µä¸‹ä»ç„¶å»å‘é€å®ä½“èµ„æºçš„è¯·æ±‚ï¼Œé¿å…äº†å¸¦å®½çš„æµªè´¹ã€‚</p><p>http2.0ç‰ˆæœ¬åœ¨é€Ÿåº¦ä¸Šæ¯”http1.1å¿«äº†å¾ˆå¤šã€‚å…·ä½“å¯ä»¥å‚è€ƒ<a href="https://juejin.im/entry/5981c5df518825359a2b9476" target="_blank" rel="noopener">HTTP1.0ã€HTTP1.1 å’Œ HTTP2.0 çš„åŒºåˆ«</a></p><h3 id="Cookieå’ŒSessionç®€è¿°ï¼ˆ2018-09-28ï¼‰"><a href="#Cookieå’ŒSessionç®€è¿°ï¼ˆ2018-09-28ï¼‰" class="headerlink" title="Cookieå’ŒSessionç®€è¿°ï¼ˆ2018.09.28ï¼‰"></a>Cookieå’ŒSessionç®€è¿°ï¼ˆ2018.09.28ï¼‰</h3><h4 id="Cookieæœºåˆ¶"><a href="#Cookieæœºåˆ¶" class="headerlink" title="Cookieæœºåˆ¶"></a>Cookieæœºåˆ¶</h4><p>ä¹‹å‰è°ˆåˆ°httpåè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸€æ¬¡è®¿é—®é¡µé¢æ—¶æœåŠ¡å™¨éƒ½æŠŠè¿™æ¬¡è¯·æ±‚å½“ä½œç¬¬ä¸€æ¬¡è®¿é—®ï¼Œè¿™æ ·å°±ä¼šæœ‰å¾ˆå¤šå±€é™æ€§ã€‚Cookieæœºåˆ¶å¾ˆå¥½è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚Cookieæ˜¯ä¸€ç§æœåŠ¡å™¨å‘ç»™å®¢æˆ·ç«¯å¹¶ä¸”å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„æ–‡æœ¬æ–‡ä»¶ã€‚å¦‚æœè¯·æ±‚é¡µé¢æ—¶ï¼Œå®¢æˆ·ç«¯çš„è¯·æ±‚å¤´æ²¡æœ‰Cookieä¿¡æ¯æ—¶ï¼ŒæœåŠ¡å™¨åœ¨å“åº”æ—¶å°±ä¼šè¿”å›ä¸€ä¸ªSet-Cookieå¤´éƒ¨æ¥åˆ›å»ºcookieã€‚Set-Cookieå¤´éƒ¨çš„æ ¼å¼ä¸ºï¼š</p><pre class=" language-xml"><code class="language-xml">Set-Cookie: value[; expires=date][; domain=domain][; path=path][; secure]</code></pre><ul><li><p>valueï¼šæ˜¯ä¸€ä¸ªname-valueçš„é”®å€¼å¯¹ï¼ŒæŒ‡å®šCookieçš„å€¼</p></li><li><p>expiresï¼šå¯ä»¥è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œé‚£ä¹ˆè¿™ä¸ªcookieä¼šåœ¨æµè§ˆå™¨é¡µé¢å…³é—­æ—¶é”€æ¯ï¼ˆç§°ä¸ºä¼šè¯Cookieï¼‰ã€‚</p></li><li><p>domainï¼šcookieæ‰€å±çš„åŸŸåŠå­åŸŸã€‚</p></li><li><p>secureï¼šè¡¨ç¤ºè¯¥cookieåªèƒ½ç”¨httpsä¼ è¾“ã€‚ä¸€èˆ¬ç”¨äºåŒ…å«è®¤è¯ä¿¡æ¯çš„cookieï¼Œè¦æ±‚ä¼ è¾“æ­¤cookieçš„æ—¶å€™ï¼Œå¿…é¡»ç”¨httpsä¼ è¾“ã€‚</p></li><li><p>pathï¼šcookieçš„æ‰€å±è·¯å¾„</p></li></ul><p>ä¹‹åå®¢æˆ·ç«¯å†æ¬¡è®¿é—®é¡µé¢æ—¶å°±ä¼šåœ¨httpè¯·æ±‚å¸¦ä¸ŠCookieå¤´éƒ¨ï¼Œè¿™æ ·ä¸€æ¥æœåŠ¡å™¨å°±èƒ½é€šè¿‡Cookieè·å–åˆ°è¯¥ç”¨æˆ·çš„çŠ¶æ€äº†ã€‚è¿‡ç¨‹å¦‚å›¾ï¼š</p><p><img src="/images/Compute Network/http/cookie.png" alt=""></p><p>ä½†æ˜¯Cookieæ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼Œå®¹æ˜“è¢«ç¯¡æ”¹ï¼Œå­˜åœ¨å¾ˆå¤§çš„å®‰å…¨éšæ‚£ï¼ŒSessionæœºåˆ¶è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><h4 id="Sessionæœºåˆ¶"><a href="#Sessionæœºåˆ¶" class="headerlink" title="Sessionæœºåˆ¶"></a>Sessionæœºåˆ¶</h4><p>ä¸Cookieå­˜å‚¨åœ¨å®¢æˆ·ç«¯ä¸åŒçš„æ˜¯ï¼ŒSessionæ˜¯å­˜æ”¾åœ¨æœåŠ¡å™¨ä¸Šçš„ï¼Œä½†Sessionæœºåˆ¶æ˜¯åŸºäºCookieä¸Šé¢ã€‚å…¶è¿‡ç¨‹æ˜¯å½“ç”¨æˆ·æäº¤ä¸€ä¸ªHTTPè¯·æ±‚åï¼ŒæœåŠ¡å™¨ç»è¿‡éªŒè¯åå°†ç”¨æˆ·ä¿¡æ¯å­˜æ”¾åœ¨æœåŠ¡å™¨ç«¯ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªåŒ…å«keyä¸ºSession IDçš„é”®å€¼å¯¹çš„Cookieã€‚å®¢æˆ·ç«¯ä¿å­˜è¿™ä¸ªSession IDï¼Œä»¥åçš„HTTPè¯·æ±‚åªè¦å¸¦ä¸ŠSession IDå³å¯ã€‚å› ä¸ºç”¨æˆ·ä¿¡æ¯æ˜¯å­˜æ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼Œå¯¹ç”¨æˆ·æ¥è¯´æ˜¯é€æ˜çš„ï¼Œå¤§å¤§å‡å°‘äº†æ˜æ–‡ç¯¡æ”¹é€ æˆçš„å®‰å…¨å¨èƒã€‚å¦‚æœå®¢æˆ·ç«¯ç¦ç”¨Cookieï¼Œå°±ä¼šé‡‡ç”¨URLæ–¹å¼å¸¦ä¸ŠSession IDã€‚</p>]]></content>
      
      <categories>
          
          <category> è®¡ç®—æœºç½‘ç»œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºç½‘ç»œ </tag>
            
            <tag> cookie </tag>
            
            <tag> session </tag>
            
            <tag> httpåè®® </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>SpringBootæ•´åˆé¡¹ç›®ç»ƒä¹ </title>
      <link href="/springboot(%E4%B8%80).html"/>
      <url>/springboot(%E4%B8%80).html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><p>ä¸€ä¸ªSpringBootæ•´åˆé¡¹ç›®ç»ƒä¹ ï¼Œä½¿ç”¨åˆ°çš„æŠ€æœ¯Mybatis+Druid+PageHelper+Swagger2+thymeleafï¼Œé‡‡ç”¨RESTfulçš„urlé£æ ¼ã€‚</p><a id="more"></a><h2 id="é¡¹ç›®ç®€ä»‹"><a href="#é¡¹ç›®ç®€ä»‹" class="headerlink" title="é¡¹ç›®ç®€ä»‹"></a>é¡¹ç›®ç®€ä»‹</h2><p>ç»ƒä¹ é¡¹ç›®çš„ä¸»è¦æŠ€æœ¯å¦‚ä¸‹ï¼š</p><ul><li>SpringBoot 2.0.4</li><li>Mybatis 1.3.2</li><li>Druid 1.1.8</li><li>PageHelper 1.2.5</li><li>Swagger2 2.6.1</li><li>thymeleaf</li></ul><p>æŒ‰ç…§ä¸ªäººç†è§£ç®€å•ä»‹ç»ä¸‹è¿™å‡ ä¸ªæŠ€æœ¯çš„åŠŸèƒ½</p><pre><code>SpringBootå°±æ˜¯å¯¹Springæ¡†æ¶çš„ä¸€ä¸ªä¼˜åŒ–ï¼Œåœ¨é…ç½®æ–¹é¢è¿›è¡Œæ¯”è¾ƒå¤§çš„ä¼˜åŒ–ã€‚å‡å°‘äº†å¾ˆå¤šçš„åº•å±‚é…ç½®ï¼Œå¤§é‡çš„æ³¨è§£å¼€å‘é¿å…äº†xmlé…ç½®çš„ç¹çã€‚MyBatisæ˜¯ä¸€ä¸ªæŒä¹…å±‚æ¡†æ¶ï¼Œå¯ä»¥å°†POJOsç›´æ¥ä¸æ•°æ®åº“çš„è®°å½•è¿›è¡Œæ˜ å°„ã€‚ä»¥å‰çš„JDBCéœ€è¦å°†SQLè¯­å¥å†™è¿›Javaä»£ç ä¸­ï¼Œè€Œä¸”éœ€è¦åœ¨ç»“æœé›†ä¸Šéå†ç„¶åè¿›è¡Œæ˜ å°„ï¼Œæ¯”è¾ƒç¹çã€‚è€ŒMyBatisä¼˜åŒ–äº†è¿™äº›æ­¥éª¤ï¼Œå®ƒå°†ç»“æœé›†å¯ä»¥ç›´æ¥ä¸POJOè¿›è¡Œæ˜ å°„ï¼Œå¹¶ä¸”å°†sqlè¯­å¥é€šè¿‡xmlæˆ–æ³¨è§£è¿›è¡Œé…ç½®ã€‚Druidæ˜¯é˜¿é‡Œå·´å·´å¼€å‘çš„ä¸€ä¸ªæ•°æ®åº“ç³»ç»Ÿï¼Œä¸ä»…æä¾›äº†å¼ºå¤§çš„æ•°æ®åº“ç›‘æ§åŠŸèƒ½ï¼Œè€Œä¸”å¯ä»¥ä½œä¸ºä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œæ€§èƒ½æ–¹é¢éå¸¸ä¼˜ç§€ã€‚PageHelperæ˜¯ä¸€æ¬¾Mybatisçš„åˆ†é¡µæ’ä»¶ï¼Œé€šè¿‡æ‹¦æˆªå™¨è·å–åˆ°åŒä¸€çº¿ç¨‹çš„SQLè¯­å¥ï¼Œç„¶ååŒ…è£…æˆæœ‰åˆ†é¡µåŠŸèƒ½çš„SQLè¯­å¥ã€‚PageInfoå°è£…äº†å¾ˆå¤šåˆ†é¡µçš„ä¿¡æ¯ã€‚Swagger2å¯ä»¥é«˜æ•ˆçš„å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆä¸šåŠ¡æ¥å£çš„æ–‡æ¡£ï¼Œå¦‚æœé¡¹ç›®æœ‰äº›ä¸šåŠ¡é€»è¾‘ä¿®æ”¹äº†ï¼Œä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°æˆæ–°çš„æ–‡æ¡£ã€‚</code></pre><h2 id="é¡¹ç›®å®ç°"><a href="#é¡¹ç›®å®ç°" class="headerlink" title="é¡¹ç›®å®ç°"></a>é¡¹ç›®å®ç°</h2><h3 id="å¯¼å…¥ä¾èµ–"><a href="#å¯¼å…¥ä¾èµ–" class="headerlink" title="å¯¼å…¥ä¾èµ–"></a>å¯¼å…¥ä¾èµ–</h3><p>ç‰ˆæœ¬ç®¡ç†</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">></span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.reporting.outputEncoding</span><span class="token punctuation">></span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.reporting.outputEncoding</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mybatis-springboot.version</span><span class="token punctuation">></span></span>1.3.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mybatis-springboot.version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swagger2.version</span><span class="token punctuation">></span></span>2.6.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swagger2.version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mysql.version</span><span class="token punctuation">></span></span>5.1.46<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mysql.version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>druid.version</span><span class="token punctuation">></span></span>1.1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>druid.version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pagehelper-springboot.version</span><span class="token punctuation">></span></span>1.2.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pagehelper-springboot.version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span></code></pre><p>ç›¸å…³ä¾èµ–</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--Mybatisç›¸å…³ä¾èµ–--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>${mybatis-springboot.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--Swagger2--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springfox-swagger-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>${swagger2.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springfox-swagger2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>${swagger2.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--mysqlæ•°æ®åº“ä¾èµ–--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- alibabaçš„druidæ•°æ®åº“è¿æ¥æ±  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>${druid.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--åˆ†é¡µæ’ä»¶--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.github.pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>pagehelper-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>${pagehelper-springboot.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--çƒ­éƒ¨ç½²--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--æ¨¡æ¿å¼•æ“--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>mybatisé€†å‘å·¥ç¨‹æ’ä»¶é…ç½®</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis.generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-generator-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>${mybatis-springboot.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configurationFile</span><span class="token punctuation">></span></span>${basedir}/src/main/resources/generator/generatorConfig.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configurationFile</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>overwrite</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>overwrite</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>verbose</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>verbose</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>${mysql.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span></code></pre><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>å…¨å±€é…ç½®æ–‡ä»¶</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/mybatis_druid<span class="token punctuation">?</span>userUnicode=true<span class="token important">&amp;characterEncoding</span>=utf8    <span class="token key atrule">username</span><span class="token punctuation">:</span> root    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">1234</span>    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.jdbc.Driver    <span class="token comment" spellcheck="true">#é…ç½®ç±»å‹ä¸ºDruidæ•°æ®åº“è¿æ¥æ± </span>    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource    <span class="token key atrule">initialSize</span><span class="token punctuation">:</span> <span class="token number">5</span>    <span class="token key atrule">minIdle</span><span class="token punctuation">:</span> <span class="token number">5</span>    <span class="token key atrule">maxActive</span><span class="token punctuation">:</span> <span class="token number">20</span>    <span class="token key atrule">maxWait</span><span class="token punctuation">:</span> <span class="token number">60000</span>    <span class="token key atrule">timeBetweenEvictionRunsMillis</span><span class="token punctuation">:</span> <span class="token number">60000</span>    <span class="token key atrule">minEvictableIdleTimeMillis</span><span class="token punctuation">:</span> <span class="token number">300000</span>    <span class="token comment" spellcheck="true">#   é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œå»æ‰åç›‘æ§ç•Œé¢sqlæ— æ³•ç»Ÿè®¡ï¼Œ'wall'ç”¨äºé˜²ç«å¢™</span>    <span class="token key atrule">filters</span><span class="token punctuation">:</span> stat<span class="token punctuation">,</span>wall<span class="token punctuation">,</span>log4j    <span class="token key atrule">maxPoolPreparedStatementPerConnectionSize</span><span class="token punctuation">:</span> <span class="token number">20</span>    <span class="token key atrule">useGlobalDataSourceStat</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>    <span class="token key atrule">connectionProperties</span><span class="token punctuation">:</span> druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500  <span class="token key atrule">thymeleaf</span><span class="token punctuation">:</span>    <span class="token key atrule">cache</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">mybatis</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true">#é…ç½®æ˜ å°„æ–‡ä»¶çš„è·¯å¾„</span>  <span class="token key atrule">mapperLocations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mapper/*.xml  <span class="token key atrule">typeAliasesPackage</span><span class="token punctuation">:</span> me.freelee.mybatisdruid.model  <span class="token key atrule">configLocation</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mybatis<span class="token punctuation">-</span>config.xml</code></pre><p>mybatisé…ç½®æ–‡ä»¶</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token doctype">&lt;!DOCTYPE configuration        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-config.dtd"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- å…¨å±€å¯ç”¨æˆ–ç¦ç”¨å»¶è¿ŸåŠ è½½ã€‚ç¦ç”¨åï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå³ä½¿åŠ è½½ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>lazyLoadingEnabled<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!-- ä½¿ç”¨é©¼å³°å‘½åæ³•--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mapUnderscoreToCamelCase<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre><p>mybatisé€†å‘å·¥ç¨‹é…ç½®æ–‡ä»¶</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token doctype">&lt;!DOCTYPE generatorConfiguration        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>generatorConfiguration</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>DB2Tables<span class="token punctuation">"</span></span> <span class="token attr-name">targetRuntime</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>MyBatis3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>commentGenerator</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>suppressDate<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token comment" spellcheck="true">&lt;!--æ˜¯å¦å»é™¤è‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Š--></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>suppressAllComments<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>commentGenerator</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jdbcConnection</span> <span class="token attr-name">driverClass</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.mysql.jdbc.Driver<span class="token punctuation">"</span></span> <span class="token attr-name">connectionURL</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jdbc:mysql://localhost:3306/mybatis_druid<span class="token punctuation">"</span></span> <span class="token attr-name">userId</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span> <span class="token attr-name">password</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1234<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jdbcConnection</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>javaTypeResolver</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>forceBigDecimals<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>javaTypeResolver</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- ç”Ÿæˆæ¨¡å‹çš„åŒ…åå’Œä½ç½®--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>javaModelGenerator</span> <span class="token attr-name">targetPackage</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>me.freelee.mybatisdruid.model<span class="token punctuation">"</span></span> <span class="token attr-name">targetProject</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>src/main/java<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>enableSubPackages<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>trimStrings<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>javaModelGenerator</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- ç”Ÿæˆæ˜ å°„æ–‡ä»¶çš„åŒ…åå’Œä½ç½®--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sqlMapGenerator</span> <span class="token attr-name">targetPackage</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mapper<span class="token punctuation">"</span></span> <span class="token attr-name">targetProject</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>src/main/resources<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>enableSubPackages<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sqlMapGenerator</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- ç”ŸæˆDAOçš„åŒ…åå’Œä½ç½®--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>javaClientGenerator</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>XMLMAPPER<span class="token punctuation">"</span></span> <span class="token attr-name">targetPackage</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>me.freelee.mybatisdruid.mapper<span class="token punctuation">"</span></span> <span class="token attr-name">targetProject</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>src/main/java<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>enableSubPackages<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>javaClientGenerator</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">tableName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tb_user<span class="token punctuation">"</span></span> <span class="token attr-name">domainObjectName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>User<span class="token punctuation">"</span></span> <span class="token attr-name">enableCountByExample</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">enableUpdateByExample</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">enableDeleteByExample</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">enableSelectByExample</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>generatorConfiguration</span><span class="token punctuation">></span></span></code></pre><p>æ¥ä¸‹æ¥è¿è¡Œmybatis-generatoræ’ä»¶ï¼Œå°±ä¼šç”Ÿæˆæ•°æ®åº“æŒ‡å®šè¡¨å¯¹åº”çš„modelå’Œmapperã€‚</p><p><img src="/images/SpringBoot/springboot1/3.JPG" alt=""></p><h3 id="ä¸šåŠ¡é€»è¾‘"><a href="#ä¸šåŠ¡é€»è¾‘" class="headerlink" title="ä¸šåŠ¡é€»è¾‘"></a>ä¸šåŠ¡é€»è¾‘</h3><p>UserServiceæ¥å£çš„å®ç°ç±»ï¼ˆåªè´´å‡ºäº†å…³é”®æ–¹æ³•ï¼‰ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> PageInfo<span class="token operator">&lt;</span>User<span class="token operator">></span> <span class="token function">queryPage</span><span class="token punctuation">(</span>Integer pageNum<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//å¼•å…¥PageHelperåˆ†é¡µæ’ä»¶</span>    <span class="token comment" spellcheck="true">//startPageæ–¹æ³•åç´§è·ŸæŸ¥è¯¢è¯­å¥,è¿™æ ·æ‰èƒ½å®ç°åˆ†é¡µæŸ¥è¯¢</span>    PageHelper<span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span>pageNum<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    List<span class="token operator">&lt;</span>User<span class="token operator">></span> list<span class="token operator">=</span>userMapper<span class="token punctuation">.</span><span class="token function">selectAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//PageInfoæ„é€ å‡½æ•°ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ˜¾ç¤ºå¯¼èˆªé¡µçš„æ•°é‡</span>    PageInfo<span class="token operator">&lt;</span>User<span class="token operator">></span> pageInfo<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">PageInfo</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>list<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> pageInfo<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/*       å› ä¸ºæ˜¯å¯¹æ•°æ®åº“è¿›è¡Œå†™æ“ä½œï¼Œæ‰€ä»¥éœ€è¦ä¿æŒåŸå­æ€§ã€‚æ·»åŠ äº†äº‹åŠ¡çš„æ³¨è§£@Transactional       Propagation.REQUIRED:å­˜åœ¨äº‹åŠ¡å°±å¤„äºå½“å‰äº‹åŠ¡ä¸­ï¼Œæ²¡æœ‰å°±æ‰åˆ›å»ºä¸€ä¸ªäº‹åŠ¡*/</span><span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>propagation <span class="token operator">=</span> Propagation<span class="token punctuation">.</span>REQUIRED<span class="token punctuation">,</span>readOnly <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertUser</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span> <span class="token punctuation">{</span>    userMapper<span class="token punctuation">.</span><span class="token function">insertSelective</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>Druidé…ç½®ç±» <a href="http://druid.io/docs/latest/design/" target="_blank" rel="noopener">Druidæ–‡æ¡£</a></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//å¯¼å…¥é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®æºé…ç½®å°è£…æˆDruidDateSourceï¼Œå¹¶åŠ å…¥åˆ°å®¹å™¨ä¸­</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"spring.datasource"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> DataSource <span class="token function">druid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//é…ç½®Druidçš„ç›‘æ§</span><span class="token comment" spellcheck="true">//1ã€é…ç½®ä¸€ä¸ªç®¡ç†åå°çš„Servlet</span><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> ServletRegistrationBean <span class="token function">statViewServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ServletRegistrationBean bean<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ServletRegistrationBean</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StatViewServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"/druid/*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>String<span class="token operator">></span> initParams<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//è®¾ç½®æ§åˆ¶å°ç®¡ç†ç”¨æˆ·</span>    initParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"loginUsername"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    initParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"loginPassword"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    initParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"allow"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//é»˜è®¤å°±æ˜¯å…è®¸æ‰€æœ‰è®¿é—®</span>    bean<span class="token punctuation">.</span><span class="token function">setInitParameters</span><span class="token punctuation">(</span>initParams<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> bean<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//2ã€é…ç½®ä¸€ä¸ªwebç›‘æ§çš„filter</span><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> FilterRegistrationBean <span class="token function">webStatFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    FilterRegistrationBean bean<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FilterRegistrationBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bean<span class="token punctuation">.</span><span class="token function">setFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WebStatFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>String<span class="token operator">></span> initParams<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//ä¸è¿›è¡Œè¿‡æ»¤çš„æ ¼å¼</span>    initParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"exclusions"</span><span class="token punctuation">,</span><span class="token string">"*.js,*.css,/druid/*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bean<span class="token punctuation">.</span><span class="token function">setInitParameters</span><span class="token punctuation">(</span>initParams<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//è®¾ç½®è¿‡æ»¤å™¨è¿‡æ»¤è·¯å¾„</span>    bean<span class="token punctuation">.</span><span class="token function">setUrlPatterns</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"/*"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> bean<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>UserControlleréƒ¨åˆ†ä»£ç </p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//æ ¹æ®ç”¨æˆ·IdæŸ¥è¯¢ç”¨æˆ·</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/{id}"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ResponseBody</span><span class="token keyword">public</span> User <span class="token function">selectUserById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> Integer id<span class="token punctuation">)</span><span class="token punctuation">{</span>    User user<span class="token operator">=</span>userService<span class="token punctuation">.</span><span class="token function">selectUserById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> user<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//åˆ†é¡µæŸ¥è¯¢æ‰€æœ‰æ•°æ®</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token keyword">public</span> String <span class="token function">list</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"pageNo"</span><span class="token punctuation">,</span>defaultValue <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">)</span> Integer pageNo                <span class="token punctuation">,</span> Model model<span class="token punctuation">)</span><span class="token punctuation">{</span>        PageInfo<span class="token operator">&lt;</span>User<span class="token operator">></span> pageInfo<span class="token operator">=</span>userService<span class="token punctuation">.</span><span class="token function">queryPage</span><span class="token punctuation">(</span>pageNo<span class="token punctuation">)</span><span class="token punctuation">;</span>        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"pageInfo"</span><span class="token punctuation">,</span>pageInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"list"</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ç°åœ¨å°±å¯ä»¥å¯åŠ¨SpringBootï¼Œè¿›è¡Œæµ‹è¯•äº†ã€‚</p><p><a href="">localhost:8080/druid</a>å°±å¯ä»¥è¿›å…¥Druidç›‘æ§ç³»ç»Ÿï¼Œå¯ä»¥æŸ¥çœ‹æ•°æ®æºçš„è¯¦ç»†ä¿¡æ¯ç­‰ç­‰å¾ˆå¤šåŠŸèƒ½ã€‚</p><p><img src="/images/SpringBoot/springboot1/2.JPG" alt=""></p><p>Userçš„åˆ†é¡µæ˜¾ç¤ºï¼Œé¡µé¢çš„UIä¸æ˜¯å¾ˆå…³é”®ï¼Œèƒ½ç”¨å°±è¡Œã€‚</p><p><img src="/images/SpringBoot/springboot1/4.JPG" alt=""></p><p>è¿˜æœ‰æœ€åä¸€ä¸ªæ­¥éª¤ï¼Œä½¿ç”¨Swagger2ç”Ÿæˆæ–‡æ¡£ã€‚ <a href="https://swagger.io/docs/" target="_blank" rel="noopener">Swagger2æ–‡æ¡£</a></p><p>é¦–å…ˆé…ç½®ä¸€ä¸ªSwagger2çš„é…ç½®ç±»ï¼š</p><p>@EnableSwagger2ï¼šå¼€å¯swagger2æ³¨è§£åŠŸèƒ½</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableSwagger2</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwaggerConfig</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//åˆ›å»ºä¸€ä¸ªDocketå¯¹è±¡åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š</span>    <span class="token comment" spellcheck="true">//    1ã€Apiçš„è¯¦ç»†ä¿¡æ¯ï¼Œå³apiInfoï¼ˆï¼‰</span>    <span class="token comment" spellcheck="true">//    2ã€æŒ‡å®šéœ€è¦ç”Ÿæˆæ–‡æ¡£çš„åŒ…è·¯ç»</span>    <span class="token comment" spellcheck="true">//     3ã€æŒ‡å®šç”ŸæˆApiæ–‡æ¡£çš„è·¯å¾„</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> Docket <span class="token function">createRestApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span>DocumentationType<span class="token punctuation">.</span>SWAGGER_2<span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">//apiInfoï¼ˆï¼‰åˆ›å»ºæ¥å£æ–‡æ¡£çš„ä¿¡æ¯</span>                <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">//apiï¼ˆï¼‰å¯ä»¥æ§åˆ¶æŒ‡å®šæ‰«æåŒ…ä¸‹å®šä¹‰çš„Apiæš´éœ²ç»™Swagger2</span>            <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span>RequestHandlerSelectors<span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span><span class="token string">"me.freelee.mybatisdruid.controller"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">paths</span><span class="token punctuation">(</span>PathSelectors<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//æ„å»ºApiæ–‡æ¡£çš„ç›¸ä¿¡ä¿¡æ¯</span>    <span class="token keyword">private</span> ApiInfo <span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ApiInfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"ä½¿ç”¨Swagger2æ„å»ºRESTful APIs"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"Springboot REST API With Swagger2"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">"1.0"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>è¿˜éœ€è¦å†Controllerä¸Šæ·»åŠ Swagger2æ³¨è§£ã€‚</p><p>@Apiï¼šç”¨æ¥æ ‡æ³¨ç±»ã€‚Swagger2ä¼šæ£€æµ‹æ ‡æ³¨æ­¤æ³¨è§£çš„ç±»</p><p>@ApiOperationï¼šç”¨æ¥æ ‡æ³¨æ–¹æ³•ï¼Œä¼šå°†æ­¤æ–¹æ³•æš´éœ²ç»™Swagger2æ¥ç”Ÿæˆæ–‡æ¡£ã€‚</p><pre><code>valueï¼šæ–¹æ³•ånotesï¼šæ–¹æ³•çš„æè¿°</code></pre><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰@ApiImplicitParamå¯ä»¥æ ‡æ³¨æ–¹æ³•å‚æ•°ï¼Œå¯ä»¥è®¾å®šæ˜¯å¦requiredï¼Œåç§°ï¼Œç±»å‹â€¦â€¦</p><p>å¦‚æœä¸æƒ³æŠŠæ¥å£æš´éœ²ç»™Swagger2ï¼Œå¯ä»¥ä½¿ç”¨@ApiIngoreæ ‡æ³¨æ–¹æ³•ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"ç”¨æˆ·Controller"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Controller</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    UserService userService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"è·å–ç”¨æˆ·ä¿¡æ¯"</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">"æ ¹æ®ç”¨æˆ·idè·å–ç”¨æˆ·ä¿¡æ¯"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">"ç”¨æˆ·çš„ID"</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>dataType <span class="token operator">=</span> <span class="token string">"Integer"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/{id}"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ResponseBody</span>    <span class="token keyword">public</span> User <span class="token function">selectUserById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> Integer id<span class="token punctuation">)</span><span class="token punctuation">{</span>        User user<span class="token operator">=</span>userService<span class="token punctuation">.</span><span class="token function">selectUserById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> user<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"è·å–ç”¨æˆ·åˆ—è¡¨"</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">"è·å–ç”¨æˆ·åˆ—è¡¨"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">list</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"pageNo"</span><span class="token punctuation">,</span>defaultValue <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">)</span> Integer pageNo                <span class="token punctuation">,</span> Model model<span class="token punctuation">)</span><span class="token punctuation">{</span>        PageInfo<span class="token operator">&lt;</span>User<span class="token operator">></span> pageInfo<span class="token operator">=</span>userService<span class="token punctuation">.</span><span class="token function">queryPage</span><span class="token punctuation">(</span>pageNo<span class="token punctuation">)</span><span class="token punctuation">;</span>        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"pageInfo"</span><span class="token punctuation">,</span>pageInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"list"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>Swagger2æ–‡æ¡£ä¸»é¡µé¢å¦‚å›¾ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬å«æœ‰æ³¨è§£@ApiOperationçš„æ–¹æ³•æ˜¾ç¤ºå†æ–‡æ¡£ä¸­ã€‚</p><p><img src="/images/SpringBoot/springboot1/5.JPG" alt=""></p><p>ç‚¹å‡»å…¶ä¸­ä¸€ä¸ªæ–¹æ³•,å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è®¾ç½®çš„ä¸€äº›ä¿¡æ¯ã€‚</p><p>æ–‡æ¡£æä¾›äº†ä¸€ä¸ªModelçš„ä¸€ä¸ªå€¼çš„ç¤ºä¾‹ï¼ŒæœåŠ¡å™¨ç›¸åº”ç±»å‹åŒ…æ‹¬æ‰€æœ‰è¿”å›ç±»å‹ã€‚ç„¶åä¸‹é¢æ˜¯æ–¹æ³•çš„å‚æ•°ï¼Œè¾“å…¥å¯¹åº”ç±»å‹çš„å€¼ï¼Œç‚¹å‡»Try it outï¼ä¼šè¿›è¡Œå¯¹æœåŠ¡å™¨çš„è¯·æ±‚ï¼ˆå¦‚æœæ˜¯å†™å…¥æ“ä½œï¼Œä¼šå†™å…¥æ•°æ®åº“ï¼‰ï¼Œå°±èƒ½å¾—åˆ°Request Urlå’ŒResponse Bodyç­‰å…¶ä»–è¯¦ç»†ä¿¡æ¯ã€‚</p><p><img src="/images/SpringBoot/springboot1/6.JPG" alt=""></p><p><img src="/images/SpringBoot/springboot1/7.JPG" alt="7"></p><h2 id="é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜"><a href="#é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜"></a>é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜</h2><p>å·²è§£å†³ï¼š</p><pre><code>1ã€pagehelperçš„ä¾èµ–é—®é¢˜ï¼Œä¼šå¯¼è‡´PageInfoå¯¹è±¡æ— æ³•è‡ªåŠ¨è£…é…ã€‚    é”™è¯¯ä¾èµ–</code></pre><pre class=" language-xml"><code class="language-xml">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.github.pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><pre><code>    æ­£ç¡®ä¾èµ–</code></pre><pre class=" language-xml"><code class="language-xml">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.github.pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>pagehelper-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>${pagehelper-springboot.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>æœªè§£å†³ï¼š</p><pre><code>1ã€åœ¨selectUserByIdï¼ˆï¼‰åŠ ä¸Šæ³¨è§£å   @ApiImplicitParam(name = &quot;id&quot;,value = &quot;ç”¨æˆ·çš„ID&quot;,required = true,dataType = &quot;Long&quot;)  ï¼Œä½¿ç”¨Swagger2æµ‹è¯•æ—¶ï¼Œä¼šæŠ¥é”™  *&quot;Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.Long&#39;; nested exception is java.lang.NumberFormatException: For input string: \&quot;{id}\&quot;&quot;,*</code></pre><p>ä¸çŸ¥é“åœ¨ä¼ å‚è¿‡ç¨‹ä¸ºä»€ä¹ˆä¸ä¼šè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Ÿï¼Ÿï¼Ÿ</p><pre><code>2ã€thymeleafä½œä¸ºæ¨¡æ¿å¼•æ“æ—¶ï¼Œæƒ³æ„å»ºDELETEè¯·æ±‚å’ŒPUTè¯·æ±‚ï¼Œå°è¯•è¿‡ajaxæ–¹å¼ï¼Œä½†æ˜¯å¤±è´¥äº†ç›®å‰æ‰¾ä¸åˆ°é”™è¯¯åœ¨å“ªï¼Œå…¶ä»–æ–¹æ³•è¿˜æœªå°è¯•ã€‚</code></pre><h2 id="å‚è€ƒæ–‡ç« é“¾æ¥"><a href="#å‚è€ƒæ–‡ç« é“¾æ¥" class="headerlink" title="å‚è€ƒæ–‡ç« é“¾æ¥"></a>å‚è€ƒæ–‡ç« é“¾æ¥</h2><p><a href="http://blog.didispace.com/springbootswagger2/" target="_blank" rel="noopener">Spring Bootä¸­ä½¿ç”¨Swagger2æ„å»ºå¼ºå¤§çš„RESTful APIæ–‡æ¡£</a></p><p><a href="http://blog.didispace.com/java-datasource-pool-compare/" target="_blank" rel="noopener">ä¸»æµJavaæ•°æ®åº“è¿æ¥æ± æ¯”è¾ƒåŠå‰ç»</a></p><p><strong>å®Œæ•´ä»£ç </strong></p><p>githubï¼š<a href="https://github.com/LJP-Perfect/SpringBoot_Project" target="_blank" rel="noopener">https://github.com/LJP-Perfect/SpringBoot_Project</a></p><p>ç äº‘ï¼š<a href="https://gitee.com/free-lee/springboot_project_practice" target="_blank" rel="noopener">https://gitee.com/free-lee/springboot_project_practice</a></p>]]></content>
      
      <categories>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> MyBatis </tag>
            
            <tag> Swagger2 </tag>
            
            <tag> Druid </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ArrayList</title>
      <link href="/ArrayList.html"/>
      <url>/ArrayList.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><p>ä»Šå¤©å†™Javaé›†åˆæ¡†æ¶é‡Œçš„å…¶ä¸­ä¸€ç§å®¹å™¨â€”â€”ArrarListã€‚å¬ä¸Šå»è·Ÿæ•°ç»„å·®ä¸å¤šï¼Œå…¶å®ï¼Œå®ƒä»¬å¾ˆå¤šç†å¿µä¸Šæ˜¯çœŸå·®ä¸å¤šã€‚å…ˆæ”¾ä¸€å¼ é›†åˆæ¡†æ¶å›¾ã€‚<br><img src="https://f002.backblazeb2.com/file/freelee/Java/Collections/ArrayList/20180402190247303.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>ä¹ä¸€çœ‹ï¼Œæ„Ÿè§‰è´¼å¤æ‚ï¼Œå¤´è¦ç‚¸ã€‚å…¶å®åªè¦å°å°åˆ†æä¸€æ³¢ï¼Œå°±ä¸ä¼šè§‰å¾—éš¾äº†ã€‚è¦ä¸ï¼Œæˆ‘å†æ”¾ä¸€å¼ ç®€åŒ–å›¾ï¼Ÿï¼<br><img src="https://f002.backblazeb2.com/file/freelee/Java/Collections/ArrayList/20180402190417789.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>ç®€åŒ–å›¾é‡ŒæŠŠé‡ç‚¹éƒ½ç»™ç•™ä¸‹äº†ã€‚ä»ä¸Šé¢é‚£å¼ æ¡†æ¶å›¾ä¸­å¯ä»¥çœ‹å‡ºArrayListæ˜¯ä¸€ä¸ªå®ç°ç±»ï¼Œç»§æ‰¿äº†AbstarctListæŠ½è±¡ç±»ï¼Œå®ç°äº†Listæ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥ä»æºç ä¸­çœ‹åˆ°è¿™äº›ï¼Œé™¤äº†è¿™äº›ï¼ŒArrayListè¿˜å®ç°äº†RandomAccessï¼ŒCloneableï¼ŒSerializableè¿™ä¸‰ä¸ªæ¥å£ã€‚<br>ç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸‰ä¸ªæ¥å£ï¼ˆç­‰å­¦æ·±äº†ï¼Œå†æ¥ç»™è¯¦ç»†çš„ï¼‰ã€‚</p><ul><li><p>RandomAccess<br>ç¿»è¯‘ä¸€ä¸‹ï¼Œå°±æ˜¯éšæœºè®¿é—®ï¼Œè¿™å°±åƒæ•°ç»„é‚£æ ·å¯ä»¥é€šè¿‡ä¸‹æ ‡ç›´æ¥è®¿é—®é‚£ä¸ªå…ƒç´ ã€‚</p></li><li><p>Cloneable<br>å…‹éš†æ¥å£ï¼Œå…¶å¯ä»¥å°†ä¸€ä¸ªå®ä¾‹æ‹·è´åˆ°ä¸€ä¸ªæ–°å®ä¾‹ã€‚å®é™…ä¸Šåªæ‹·è´å…¶ä¸­çš„å„å˜é‡çš„å€¼ï¼Œæ˜¯æµ…æ‹·è´ã€‚</p></li><li><p>Serializable<br>å¯åºåˆ—åŒ–æ¥å£ï¼Œé€šè¿‡æ­¤æ¥å£å¯ä»¥å®ç°å®ä¾‹çš„å­˜å‚¨ï¼Œä½¿ç”¨æ—¶å¯ä»¥é€šè¿‡ååºåˆ—åŒ–å¾—åˆ°é‚£ä¸ªå®ä¾‹ã€‚</p></li></ul><p>ArrayListçš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªObjectå¯¹è±¡ç±»å‹çš„æ•°ç»„ï¼Œåœ¨è¿™ä¸ªæ•°ç»„ä¸Šè¿›è¡Œä¸€ç³»åˆ—æ“ä½œï¼Œå› ä¸ºObjectæ˜¯æ‰€æœ‰ç±»çš„åŸºç±»ï¼Œæ‰€ä»¥å¯ä»¥æ¥æ”¶ä»»æ„åŒç±»å‹çš„å¯¹è±¡ã€‚å¹¶ä¸”ç”¨åˆ°äº†æ³›å‹ï¼Œå¯ä»¥è‡ªå·±æŒ‡å®šå¯¹è±¡çš„ç±»å‹ã€‚</p><h3 id="ArrayListçš„åˆå§‹åŒ–"><a href="#ArrayListçš„åˆå§‹åŒ–" class="headerlink" title="ArrayListçš„åˆå§‹åŒ–"></a>ArrayListçš„åˆå§‹åŒ–</h3><p>1ã€<strong>é™æ€åˆå§‹åŒ–</strong>(åœ¨å£°æ˜å˜é‡æ—¶ï¼Œèµ‹äºˆåˆå§‹å€¼ã€‚)</p><pre><code>//ç¬¬ä¸€ç§public static void main(String[] args) {        ArrayList&lt;String&gt; arraylist=new ArrayList&lt;String&gt;(){            {                add(&quot;a&quot;);                add(&quot;b&quot;);            }        };}//ç¬¬äºŒç§public static void main(String[] args) {        ArrayList&lt;String&gt; arraylist=new ArrayList&lt;String&gt;(Arrays.asList(&quot;a&quot;,&quot;b&quot;));        System.out.print(arraylist);    }//ç¬¬ä¸‰ç§ public static void main(String[] args) {        String[] str={&quot;a&quot;,&quot;b&quot;};        List arraylist=Arrays.asList(str);    }</code></pre><p>è¦æ³¨æ„çš„æ˜¯ï¼Œç¬¬ä¸‰ç§çš„arraylistæ˜¯æ— æ³•æ”¹å˜å…¶é•¿åº¦çš„ï¼Œå³æ— æ³•è¿›è¡Œadd(),remove()ç­‰æ“ä½œï¼Œå› ä¸ºæ•°ç»„ä¸€æ—¦ç»™å®šï¼Œé•¿åº¦å°±æ— æ³•æ”¹å˜ï¼Œåˆå§‹åŒ–æ—¶å°†æ•°ç»„æ³›å‹åŒ–èµ‹ç»™å®ƒã€‚<br>2ã€<strong>åŠ¨æ€åˆå§‹åŒ–</strong></p><pre><code>public static void main(String[] args) {        ArrayList&lt;String&gt; arraylist=new ArrayList&lt;String&gt;();        arraylist.add(&quot;a&quot;);        arraylist.add(&quot;b&quot;);        System.out.println(arraylist);    }</code></pre><h3 id="ArrayList-å¸¸ç”¨æ–¹æ³•"><a href="#ArrayList-å¸¸ç”¨æ–¹æ³•" class="headerlink" title="ArrayList å¸¸ç”¨æ–¹æ³•"></a>ArrayList å¸¸ç”¨æ–¹æ³•</h3><p>è®²å®Œäº†åˆå§‹åŒ–ï¼Œæ¥çœ‹ä¸€ä¸‹ArrayListçš„ä¸€äº›å¸¸ç”¨æ–¹æ³•ã€‚</p><h5 id="1ã€add"><a href="#1ã€add" class="headerlink" title="1ã€add()"></a>1ã€add()</h5><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹add()æ–¹æ³•çš„æºç </p><pre><code>    public boolean add(E e) {        modCount++;        add(e, elementData, size);        return true;    }</code></pre><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œçš„add()åˆè°ƒç”¨äº†ä¸å®ƒäº’ä¸ºé‡è½½çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ã€‚</p><pre><code>   /**     * This helper method split out from add(E) to keep method     * bytecode size under 35 (the -XX:MaxInlineSize default value),     * which helps when add(E) is called in a C1-compiled loop.     */    private void add(E e, Object[] elementData, int s) {        if (s == elementData.length)            elementData = grow();        elementData[s] = e;        size = s + 1;    }</code></pre><p>å¯ä»¥çœ‹åˆ°å¦‚æœå½“å‰æ•°ç»„çš„é•¿åº¦ç­‰äºå½“å‰è®¾å®šçš„sizeå°±ä¼šè°ƒç”¨grow()æ–¹æ³•ã€‚sizeä¸ç”¨å¤šè®²ï¼Œå°±æ˜¯ArrayListåŒ…å«çš„å…ƒç´ ä¸ªæ•°ï¼Œæ¥çœ‹ä¸€ä¸‹elementDataå’Œgrow()çš„å®šä¹‰ã€‚</p><blockquote><p>å…ˆçœ‹elementDateï¼Œå…¶æœ¬è´¨æ˜¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„ã€‚å¦‚æœåˆ›å»ºä¸€ä¸ªç©ºçš„ArrayListæ—¶ï¼Œç³»ç»Ÿä¼šå°†å…¶capacityç½® ä¸º10,ä¹Ÿå°±æ˜¯é»˜è®¤çš„å¤§å°ä¸º10ã€‚</p><pre><code> transient Object[] elementData; // non-private to simplify nested class access</code></pre><p>ç„¶ååœ¨çœ‹grow()ã€‚å®ƒä¹Ÿå»è°ƒç”¨äº†ä¸å®ƒé‡è½½çš„æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°å®ƒå°†size+1å€¼ä¼ ç»™é‡è½½å‡½æ•°ï¼Œå¸¦å‚å‡½æ•°å°†å…¶æ‰©å±•æˆå½“å‰æ•°ç»„å¤§å°çš„ä¸¤å€ã€‚</p><pre><code>private Object[] grow(int minCapacity) {    return elementData = Arrays.copyOf(elementData,                                       newCapacity(minCapacity));}private Object[] grow() {    return grow(size + 1);} </code></pre></blockquote><p>å†å›åˆ°add()ï¼Œå¦‚æœæ•°ç»„é•¿åº¦ä¸å½“å‰æ•°ç»„å®¹é‡ç›¸åŒï¼Œåˆ™å…ˆæ‰©å¢ä¸€å€å¤§å°ï¼Œç„¶åèµ‹å€¼ã€‚<br>è¿˜æ²¡è®²å®Œå‘¢ï¼Œadd()è¿˜æœ‰å¦å¤–ä¸€ä¸ªé‡è½½æ–¹æ³•ï¼ˆæˆ‘çš„å¤©å“ªï¼Œä¸€ä¸ªadd()çš„æºç æ¯”æˆ‘æƒ³è±¡çš„è¦å¤šï¼‰ã€‚</p><pre><code>    public void add(int index, E element) {        rangeCheckForAdd(index);        modCount++;        final int s;        Object[] elementData;        if ((s = size) == (elementData = this.elementData).length)            elementData = grow();        System.arraycopy(elementData, index,                         elementData, index + 1,                         s - index);        elementData[index] = element;        size = s + 1;    }</code></pre><p>è¿™ä¸ªadd()æ–¹æ³•æ¥å—å¤–éƒ¨ä¸¤ä¸ªå‚æ•°ï¼Œindexå°±æ˜¯è¦æ·»åŠ çš„ä½ç½®çš„ä¸‹æ ‡ã€‚é¦–å…ˆrangeCheckForAdd(),æ˜¯åˆ¤æ–­indexæ˜¯å¦åˆæ³•çš„ï¼ˆå¤§äºç­‰äº0&amp;&amp;å°äºç­‰äºsizeï¼Œæ³¨æ„addæ—¶ï¼Œä¸èƒ½è·¨é•¿åº¦ç»™å®ƒèµ‹å€¼ï¼‰,modCountæ˜¯è®°å½•æ­¤æ•°ç»„ä¿®æ”¹çš„æ¬¡æ•°ï¼Œï¼ˆè¿™é‡Œåˆå¯ä»¥å±•å¼€å¾ˆå¤šçŸ¥è¯†ï¼Œæˆ‘ç›´æ¥æŠ›ä¸€ä¸ªé“¾æ¥<a href="https://www.cnblogs.com/zuochengsi-9/p/7050351.htmlï¼‰ï¼Œå…¶ä¸»è¦å°±æ˜¯é˜²æ­¢çº¿ç¨‹å®‰å…¨çš„ArrayListä¸€è¾¹ç”¨iteratoréå†æ—¶ä¸€è¾¹å¯¹ArrayListè¿›è¡Œå¢åˆ æ“ä½œæ—¶å‘ç”Ÿå¼‚å¸¸ã€‚ç„¶åæ˜¯arraycopy()ï¼ŒæŸ¥çœ‹æºç æ—¶å‘ç°å®ƒæ˜¯nativeï¼ˆC++çœŸå‰å®³ï¼‰,é‚£å°±çœ‹å£°æ˜ï¼Œå…¶æ„æ€å°±æ˜¯å°†ä»srcé‡Œçš„srcPosä½ç½®å¼€å§‹çš„lengthé•¿åº¦èµ‹ç»™ä»destPosä½ç½®çš„destã€‚" target="_blank" rel="noopener">https://www.cnblogs.com/zuochengsi-9/p/7050351.htmlï¼‰ï¼Œå…¶ä¸»è¦å°±æ˜¯é˜²æ­¢çº¿ç¨‹å®‰å…¨çš„ArrayListä¸€è¾¹ç”¨iteratoréå†æ—¶ä¸€è¾¹å¯¹ArrayListè¿›è¡Œå¢åˆ æ“ä½œæ—¶å‘ç”Ÿå¼‚å¸¸ã€‚ç„¶åæ˜¯arraycopy()ï¼ŒæŸ¥çœ‹æºç æ—¶å‘ç°å®ƒæ˜¯nativeï¼ˆC++çœŸå‰å®³ï¼‰,é‚£å°±çœ‹å£°æ˜ï¼Œå…¶æ„æ€å°±æ˜¯å°†ä»srcé‡Œçš„srcPosä½ç½®å¼€å§‹çš„lengthé•¿åº¦èµ‹ç»™ä»destPosä½ç½®çš„destã€‚</a></p><pre><code>public static native void arraycopy(Object src, int  srcPos, Object dest,int destPos,int length);</code></pre><p>å†æ¥çœ‹çœ‹å…·ä½“ä½¿ç”¨ã€‚</p><pre><code> ArrayList &lt;String&gt;arraylist = new ArrayList&lt;String&gt;(); arraylist.add(&quot;b&quot;); arraylist.add(0,&quot;a&quot;); arraylist.add(2,&quot;c&quot;) //ä¸‹æ ‡ä¸º3çš„åœ°æ–¹è¿˜ä¸ºnull //arraylist.add(4,&quot;d&quot;);  //error System.out.println(arraylist);Outputï¼š[a, b, c]     </code></pre><p>è¿™é‡Œaå’Œbçš„ä½ç½®æ˜¯å› ä¸ºarraycopyã€‚</p><h5 id="2ã€remove"><a href="#2ã€remove" class="headerlink" title="2ã€remove()"></a>2ã€remove()</h5><p>remove()ä¹Ÿæœ‰ä¸¤ä¸ªé‡è½½æ–¹æ³•ã€‚å°±ä¸è´´æºç äº†ï¼Œæºç å“ªéƒ½å¯ä»¥æŸ¥åˆ°ã€‚</p><pre><code>//æŒ‰ç…§ä¸‹æ ‡æ¥ç§»é™¤public E remove(int index);//æŒ‰ç…§å…ƒç´ æ¥ç§»é™¤public boolean remove(Object o); //clear()æ–¹æ³•æ˜¯åˆ é™¤æ‰€æœ‰å…ƒç´ public void clear()//åˆ é™¤æŒ‡å®šä¸‹æ ‡èŒƒå›´çš„å…ƒç´ protected void removeRange(int fromIndex, int toIndex) </code></pre><p>å¦‚æœä½¿ç”¨removeåˆ é™¤æŸä¸ªä¸‹æ ‡æ˜¯ArrayListçš„ä¸­é—´ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆArrayListä¼šå°†æ‰€åˆ å…ƒç´ åé¢çš„å…ƒç´ å‰ç§»ä¸€ä¸ªä½ç½®ã€‚</p><h3 id="ArrayListä¸Array"><a href="#ArrayListä¸Array" class="headerlink" title="ArrayListä¸Array"></a>ArrayListä¸Array</h3><p>é‚£ä¸æ˜¯æœ‰æ•°ç»„å°±å¯ä»¥äº†å—ï¼Ÿä¸ºä»€ä¹ˆè¿˜è¦ArrayListå‘¢ï¼Ÿ<br>| | ArrayList | Array |<br>| â€”â€”â€“ | :â€”â€“: | :â€”-: |<br>| å¯æ‰©å±•æ€§ | å¯ä»¥åŠ¨æ€æ”¹å˜å…¶é•¿åº¦ | æ•°ç»„æ˜¯é™æ€çš„ï¼Œä¸€æ—¦é•¿åº¦ç»™å®šï¼Œå°±æ— æ³•æ”¹å˜ |<br>| æ–¹æ³•æ”¯æŒ | æœ‰å¾ˆå¤šçš„æ–¹æ³•å¯ä»¥æ–¹ä¾¿çš„å¯¹ArrayListè¿›è¡Œæ“ï¼Œä½†æ˜¯ç‰ºç‰²äº†æ•ˆç‡(åˆ¤å®šæ•°ç»„æ˜¯å¦outBoundsâ€¦) | æ•°ç»„æ²¡æœ‰ |<br>æ€»ä¹‹ï¼Œå„æœ‰å„çš„ä¼˜ç‚¹ï¼Œé€‰ç”¨å“ªç§ä¹Ÿæ˜¯è§†å…·ä½“æƒ…å†µè€Œå®šçš„ï¼Œå¹¶æ— ç»å¯¹çš„è¯´æ³•ã€‚</p><p><code>`</code></p>]]></content>
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> array </tag>
            
            <tag> Javaå®¹å™¨ </tag>
            
            <tag> List </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Ngè¯¾ç¨‹å®Œç»“ç¯‡</title>
      <link href="/NG.html"/>
      <url>/NG.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><p>ä»4æœˆ2å·å¼€å§‹å­¦ä¹ Ngçš„æœºå™¨å­¦ä¹ ï¼Œæ²¡æœ‰ç»™æˆ‘éš¾ä»¥å…¥é—¨çš„æ„Ÿè§‰ï¼Œè™½ç„¶å¾ˆå¤šæ¨¡å‹éƒ½æ²¡æœ‰ç”¨å¾ˆæ·±çš„å…¬å¼å»æ¨å¯¼ï¼Œä½†æ˜¯çœŸçš„å¾ˆå¥½ç†è§£ï¼Œå¾ˆé€‚åˆæˆ‘è¿™ç§å°ç™½å•Šã€‚ä¸å¾—ä¸ä½©æœæ©è¾¾å¤§ä½¬çš„æ•™å­¦èƒ½åŠ›ï¼Œä¸è¿‡æ„Ÿè§‰1.25å€é€Ÿå¯¹æˆ‘æ¥è¯´ç®€ç›´ç¾éš¾å•Šï¼Œè¿˜æ˜¯è€è€å®å®1å€å§(æ¸£æ¸£é‰´å®šå®Œæ¯•)ã€‚çœ‹åˆ°æœ€åï¼Œè«åæ„ŸåŠ¨ï¼Œä»¥æ³ªè°¢å¹•ã€‚<br><br>ä¸ºäº†èµ¶é¡¹ç›®è¿›åº¦ï¼Œåªèƒ½æ”¾å¼ƒç®—æ³•çš„æ·±å…¥æ¨å¯¼ï¼Œå…ˆå¤§è‡´ç†è§£æ¨¡å‹åŠå‚æ•°çš„ä½œç”¨ï¼Œæ¥ç€å°±æ˜¯å¼€å§‹å­¦ä¹ NLPã€‚å¯ï¼Œæ²¡æœ‰æ˜ç¡®çš„å­¦ä¹ æ–¹å‘å’Œè·¯çº¿å•Šï¼Œæ„Ÿè§‰GGã€‚è¿˜å¾—å…ˆå•ƒç‚¹å…¬å¼€è¯¾ï¼ŒåŸç†è¿˜æ˜¯è¦æ‡‚çš„ï¼Œcodingèƒ½åŠ›å¾ˆæ˜¯è®©æˆ‘éš¾å—ï¼Œå¾—å®è·µå®è·µäº†ã€‚æ—¶é—´ä¸å¤Ÿç”¨å•Šï¼Œ7æœˆå°±æ˜¯ç»“é¡¹ç›®ï¼Œå“‡å¾—å°±å“­å‡ºæ¥äº†ã€‚ä¸è¯´äº†ï¼Œç»§ç»­è§†é¢‘feedã€‚</p>]]></content>
      
      <categories>
          
          <category> Machine Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Machine Learning </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ubuntuä¸‹é…ç½®tensorflow(gpu)</title>
      <link href="/tensorflow.html"/>
      <url>/tensorflow.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><p>æ¬è‡ªè‡ªå·±çš„csdn<br><a href="https://blog.csdn.net/weixin_40362972/article/details/79838662" target="_blank" rel="noopener">Ubuntu16.04ç¯å¢ƒä¸‹ä»Anaconda3å®‰è£…åˆ°Tensorflow(gpu)åŠpycharmå®‰è£…å’Œæµ‹è¯•mnistå®Œæ•´æ•™ç¨‹</a></p>]]></content>
      
      <categories>
          
          <category> Tensorflow </category>
          
      </categories>
      
      
        <tags>
            
            <tag> anaconda </tag>
            
            <tag> tensorflowé…ç½® </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Ubuntuå®‰è£…åŠå¸¸è§é—®é¢˜è§£å†³</title>
      <link href="/ubuntu.html"/>
      <url>/ubuntu.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><p>æ¬è‡ªè‡ªå·±çš„csdn<br><a href="https://blog.csdn.net/weixin_40362972/article/details/79768443" target="_blank" rel="noopener">Ubuntuâ€”â€”ä»å®‰è£…åˆ°æ”¾å¼ƒï¼ˆ/é€ƒ ï¼‰ã€æ­¤æ•™ç¨‹åŒ…æ‹¬ubuntuçš„å®‰è£…ã€å…³æœºå¡æ­»ï¼ˆNvidiaå®‰è£…ï¼‰ã€æ— æ³•è¿æ¥wifiç­‰è§£å†³æ–¹æ¡ˆã€‘</a></p>]]></content>
      
      <categories>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>çº¿æ€§å›å½’ä¹‹æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹</title>
      <link href="/Linear_Regression.html"/>
      <url>/Linear_Regression.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><p>æœ€è¿‘å­¦ä¹ äº†çº¿æ€§å›å½’ï¼Œç„¶åæ‹¿ç»å…¸æ•°æ®é›†æ¥ç»ƒä¹ ã€‚<br><a id="more"></a><br>æ•°æ®é›†å¤§å°ä¸º[506,13],ä¸€å…±506ä¸ªæ ·æœ¬ï¼Œ13ä¸ªç‰¹å¾([â€˜CRIMâ€™ â€˜ZNâ€™ â€˜INDUSâ€™ â€˜CHASâ€™ â€˜NOXâ€™ â€˜RMâ€™ â€˜AGEâ€™ â€˜DISâ€™ â€˜RADâ€™ â€˜TAXâ€™ â€˜PTRATIOâ€™ â€˜Bâ€™ â€˜LSTATâ€™])ï¼Œtargetå¤§å°ä¸º[506ï¼Œ1]<br>å¯ä»¥å…ˆé€šè¿‡matplotlibæ¥ç›´è§‚æ„Ÿå—è¿™äº›ç‰¹å¾åˆ†åˆ«ä¸æˆ¿ä»·çš„å…³ç³»ã€‚<br><img src="https://f002.backblazeb2.com/file/freelee/DeepLearning/LinearRegression/1.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br><img src="https://f002.backblazeb2.com/file/freelee/DeepLearning/LinearRegression/2.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br><img src="https://f002.backblazeb2.com/file/freelee/DeepLearning/LinearRegression/3.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>ä¸ºäº†ç®€åŒ–è®­ç»ƒï¼Œåªé€‰æ‹©äº†ç¬¬6ä¸ªç‰¹å¾[â€˜RMâ€™]æ¥è®­ç»ƒï¼ˆç¬¬6ä¸ªå’Œæœ€åä¸€ä¸ªç‰¹å¾çš„ç›´è§‚çœ‹ä¸Šå»æ¯”è¾ƒç¬¦åˆçº¿æ€§å›å½’ï¼‰ï¼Œ13ä¸ªç‰¹å¾åªåœ¨506ä¸ªæ ·æœ¬ä¸‹æ¯”è¾ƒéš¾å»æ‹Ÿåˆå¥½ã€‚<br><img src="https://f002.backblazeb2.com/file/freelee/DeepLearning/LinearRegression/4.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>ä¸‹é¢æ˜¯ä»£ç è§£é‡Š</p><pre><code>#import databoston=load_boston()data=boston.data[:,(5)]label=boston.target#reshape column vectordata=data.reshape(-1,1)label=label.reshape(-1,1)</code></pre><p>å› ä¸ºè¿™é‡Œæˆ‘ä»¬åªå¯¼å…¥ä¸€åˆ—æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ [ ] reshapeä¸º[[ ]]ï¼Œå¦åˆ™ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯</p><blockquote><p>Reshape your data either using array.reshape(-1, 1) if your data has a single feature or array.reshape(1, -1) if it contains a single sample.</p></blockquote><p>æ¥ä¸‹æ¥ï¼Œå¯¹ç‰¹å¾æ•°æ®åšç‰¹å¾ç¼©æ”¾ï¼ˆå¯¹äºå•ä¸ªç‰¹å¾æ¥è¯´ï¼Œç‰¹å¾ç¼©æ”¾çš„ä½œç”¨å¹¶ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œä½†ä¹ æƒ¯èµ·è§ï¼Œè¿˜æ˜¯å¯¹å…¶è¿›è¡Œç‰¹å¾ç¼©æ”¾ï¼Œä½†æ˜¯åœ¨å¤šç‰¹å¾ä¸­ï¼Œç‰¹å¾ç¼©æ”¾æ˜¾å¾—å°¤å…¶é‡è¦ï¼Œå¯ä»¥åŠ å¿«æ¢¯åº¦ä¸‹é™ï¼Œè§å›¾ï¼‰</p><p><img src="https://f002.backblazeb2.com/file/freelee/DeepLearning/LinearRegression/2018-05-11+16-34-28%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>æ¥ä¸‹æ¥å°±æ˜¯å®šä¹‰ä¸€äº›å ä½ç¬¦å’Œæƒå€¼ã€åç½®ç­‰å˜é‡<br>åç½®åˆå§‹åŒ–0å³å¯ï¼Œæƒå€¼æœ€å¥½ä¸è¦åˆå§‹åŒ–ä¸º0ï¼Œä½¿ç”¨æ­£å¤ªåˆ†å¸ƒéšæœºå€¼ï¼Œå¦‚æœä½¿ç”¨0å»åˆå§‹åŒ–æƒå€¼ã€‚åœ¨åå‘ä¼ æ’­è®¡ç®—ä¼šå‡ºç°ä¸åŒæƒå€¼å˜åŒ–é‡å§‹ç»ˆç›¸åŒä»è€Œå¯¼è‡´æƒå€¼æ›´æ–°å‡ºç°å¼‚å¸¸ï¼ˆæ¨å¯¼è§å›¾ï¼‰ã€‚</p><pre><code>#getting number of training set &amp; number of featurem_feature=data.shape[1]m_train=tf.placeholder(dtype=tf.float32)x=tf.placeholder(dtype=tf.float32,shape=[None,m_feature],name=&#39;input&#39;)y_=tf.placeholder(dtype=tf.float32,shape=[None,1],name=&#39;output&#39;)#Define weights and offsets viriables#Initialize weights using a Gaussian distribution#Initialize the bias to 0w=tf.Variable(tf.truncated_normal(shape=[m_feature,1],stddev=0.003,dtype=tf.float32))b=tf.Variable(tf.zeros(shape=[1],dtype=tf.float32))</code></pre><p><img src="https://f002.backblazeb2.com/file/freelee/DeepLearning/LinearRegression/2018-04-22+21-04-29%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><p>ç„¶åå°±æ˜¯å‰å‘è®¡ç®—å’Œåå‘è®¡ç®—ï¼Œè¿™ä¸ªæ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„ï¼Œæ³¨æ„cost functionçš„é€‰æ‹©å³å¯</p><pre><code>#Forward calculationy=tf.add(tf.matmul(x,w),b)#use the mean square error functionlearn_rate=0.08loss=tf.reduce_sum(tf.pow(y_-y,2)/(2*m_train))train_step=tf.train.GradientDescentOptimizer(learn_rate).minimize(loss)</code></pre><p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªlistæ¥å­˜å‚¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„losså€¼ï¼Œå†å®šä¹‰ä¸€ä¸ªå¼ é‡erroræ¥ç®€å•è¯„ä¼°æµ‹è¯•çš„è¯¯å·®</p><pre><code>#variable train_loss is used to save the loss value of each iterationtrain_loss =[]#errorerror = tf.reduce_mean(y-y_)</code></pre><p>ç„¶åå°±å¼€å§‹è¿›è¡Œè®­ç»ƒ<br>è¿™é‡Œçš„é‡ç‚¹åœ¨äºæ•°æ®é›†çš„åˆ’åˆ†ï¼Œä¸€å¼€å§‹ç”¨çš„æ˜¯train_test_splitå°†æ•°æ®é›†åˆ’åˆ†æˆä¸¤ä»½ï¼Œ70%ä¸ºè®­ç»ƒé›†ï¼Œ30%ä¸ºæµ‹è¯•é›†ã€‚ä½†æ˜¯å¬å–åˆ«äººå»ºè®®åï¼Œä½¿ç”¨kæŠ˜äº¤å‰éªŒè¯æ³•ã€‚æ‰€è°“kæŠ˜äº¤å‰éªŒè¯æ³•ï¼Œå°±æ˜¯å°†æ•°æ®é›†åˆ†æˆkä»½ï¼Œæ¯æ¬¡å–å…¶ä¸­k-1ä»½ä½œä¸ºè®­ç»ƒé›†ï¼Œå¦å¤–1ä»½ä½œä¸ºæµ‹è¯•é›†ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯æ‰€æœ‰æ•°æ®éƒ½æœ‰è¢«åˆ©ç”¨ï¼Œå¯ä»¥å¾—åˆ°æ›´å¥½çš„å‚æ•°ï¼Œä½†æ˜¯è€—æ—¶ä¼šé•¿ä¸€ç‚¹ï¼ˆè§å›¾ï¼‰ã€‚<br><img src="https://f002.backblazeb2.com/file/freelee/DeepLearning/LinearRegression/1667471-7ddeb02e0be14b79.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><pre><code>with tf.Session() as sess:    sess.run(init)    for i in range(150):        #k-fold cross validation        kf=KFold(n_splits=10)        for train_index,test_index in kf.split(data):            X_train,X_test=data[train_index],data[test_index]            Y_train,Y_test=label[train_index],label[test_index]            w_,b_,_,l=sess.run(fetches=[w,b,train_step,loss], feed_dict={x: X_train, y_: Y_train,m_train:X_train.shape[0]})            if i%10==0:                print(&quot;Epoch {0} : error:{1}&quot;.format(i,sess.run(error,feed_dict={x:X_test,y_:Y_test})))        train_loss.append(l)        #print(&quot;Epoch {0} : loss{1}&quot;.format(i, l))</code></pre><p>æˆ‘ç”¨ä¸¤ç§æ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼Œé¦–å…ˆæ˜¯kï¼ˆå–10ï¼‰æŠ˜äº¤å‰éªŒè¯çš„ç»“æœ<br><img src="https://f002.backblazeb2.com/file/freelee/DeepLearning/LinearRegression/train_loss.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br><img src="https://f002.backblazeb2.com/file/freelee/DeepLearning/LinearRegression/fitting.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>ç„¶åæ˜¯train_test_splitåˆ†ç±»æ–¹æ³•çš„ç»“æœ<br><img src="https://f002.backblazeb2.com/file/freelee/DeepLearning/LinearRegression/cmp1_2.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br><img src="https://f002.backblazeb2.com/file/freelee/DeepLearning/LinearRegression/cmp1_1.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>è¿˜æ˜¯å¯ä»¥æ¯”è¾ƒæ˜æ˜¾çš„çœ‹åˆ°ï¼Œä¸ç®¡æ˜¯losså€¼è¿˜æ˜¯æ‹Ÿåˆç¨‹åº¦ã€‚æ˜æ˜¾éƒ½æ˜¯kæŠ˜äº¤å‰éªŒè¯æ³•æ•ˆæœæ¯”è¾ƒå¥½ã€‚<br>å®Œæ•´ä»£ç è¯·å‚è€ƒï¼š<a href="https://github.com/LJP-Perfect/Machine-Learning/tree/master/Linear%20Regression" target="_blank" rel="noopener">https://github.com/LJP-Perfect/Machine-Learning/tree/master/Linear%20Regression</a></p><p>æ€»ç»“å‡ ç‚¹ï¼š<br>1ã€å¯¹ç‰¹å¾è¿›è¡Œé€‰å–<br>2ã€å¤šç‰¹å¾æ—¶è¿›è¡Œç‰¹å¾ç¼©æ”¾<br>3ã€é€‰å–åˆé€‚çš„cost function<br>4ã€ä½¿ç”¨kæŠ˜äº¤å‰éªŒè¯</p><p>è¿˜æœªè§£å†³çš„é—®é¢˜ï¼š<br>1ã€åˆå§‹æ•°æ®çš„åˆ†æ<br>2ã€å­¦ä¹ é€Ÿç‡å’Œkå€¼çš„é€‰å–<br>3ã€é€‰æ‹©æ›´å¥½çš„cost function</p>]]></content>
      
      <categories>
          
          <category> Machine Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> feature scaling </tag>
            
            <tag> boston price </tag>
            
            <tag> bpç®—æ³• </tag>
            
            <tag> kæŠ˜äº¤å‰éªŒè¯ </tag>
            
            <tag> çº¿æ€§å›å½’ </tag>
            
            <tag> Machine Learning </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æµ…æSVMä¹‹æ¦‚å¿µä»‹ç»</title>
      <link href="/SVM.html"/>
      <url>/SVM.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><a id="more"></a><h3 id="ç®€å•ä¾‹å­"><a href="#ç®€å•ä¾‹å­" class="headerlink" title="ç®€å•ä¾‹å­"></a>ç®€å•ä¾‹å­</h3><p>å…ˆä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å¼€å§‹ã€‚ç°åœ¨æœ‰ä¸€ç»„ä¸¤ä¸ªç±»åˆ«çš„æ•°æ®å¦‚ä¸‹ã€‚<br><img src="https://f002.backblazeb2.com/file/freelee/image/figure2.jpg" alt=""><br>è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„äºŒåˆ†ç±»é—®é¢˜ï¼Œå¯¹äºè¿™ä¸€ç»„æ•°æ®ï¼Œè¿™ä¸ªè¶…å¹³é¢å¯ä»¥ç”¨ä»¥ä¸‹å‡½æ•°æ¥è¡¨ç¤ºï¼š(è¶…å¹³é¢æ˜¯ä»nç»´ç©ºé—´åˆ°n-1ç»´ç©ºé—´çš„ä¸€ä¸ªæ˜ å°„å­ç©ºé—´ï¼Œå®ƒæœ‰ä¸€ä¸ªnç»´å‘é‡å’Œä¸€ä¸ªå®æ•°å®šä¹‰)$$w\cdot x+b=0 \qquad (1) $$åˆ†ç±»å†³ç­–å‡½æ•°è¡¨ç¤ºä¸º$$f(x)=sign(w\cdot x+b)$$<br>å³åœ¨è¶…å¹³é¢ä¸Šçš„ç‚¹f(x)=0ï¼Œf(x)å¤§äº0çš„ç‚¹å¯¹åº”y=1,f(x)å°äº0çš„ç‚¹å¯¹åº”y=-1ã€‚<br><em><strong>æ³¨</strong>:signå‡½æ•°ä¸ºç¬¦å·å‡½æ•°,å½“sign(t)ä¸­çš„t&gt;0æ—¶ï¼Œsign(t)=1;t&lt;0æ—¶ï¼Œsign(t)=-1;t=0æ—¶ï¼Œsign(t)=0ã€‚åœ¨é€»è¾‘å›å½’çš„hypotheis functionä¸­ï¼Œå½“$\theta\cdot x$ &gt;0æ—¶ï¼Œè¾“å‡ºy=1ï¼›å½“$\theta\cdot x$ &lt;0ï¼Œè¾“å‡ºy=0ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬é¦–å…ˆå°†$\theta\cdot x$ è¡¨ç¤ºæˆ$w\cdot x+b$ (å…¶å®å°±æ˜¯å°†$\theta_{0}$ä»$\theta$å‘é‡ä¸­æŠ½ç¦»å‡ºæ¥è¡¨ç¤ºæˆb)ï¼ŒåŒæ—¶å°†y=0å’Œy=1è¡¨ç¤ºä¸ºy=1å’Œy=-1(å¯¹äºç»“æœå¹¶ä¸ä¼šäº§ç”Ÿå½±å“)ã€‚</em><br>å†å›åˆ°åˆ†é—®é¢˜ï¼Œå¯¹äºè¿™ä¸ªäºŒåˆ†ç±»é—®é¢˜å¯ä»¥æœ‰å¾ˆå¤šä¸ªä¸åŒçš„è¶…å¹³é¢æ¥å¯¹å…¶åˆ†å‰²ï¼Œå¦‚ä¸‹å›¾ã€‚ä½†æ˜¯è¿™ä¹ˆå¤šæ¡decision boundaryï¼Œæ€»æ˜¯æœ‰performanceå¥½çš„å’Œä¸å¥½çš„ï¼Œå¦‚ä½•æ‰¾å‡ºæœ€ä¼˜çš„è§£å‘¢ï¼Ÿ<br><img src="https://f002.backblazeb2.com/file/freelee/image/figure.jpg" alt=""></p><h3 id="è¡¨ç°è¯„ä¼°æ ‡å‡†"><a href="#è¡¨ç°è¯„ä¼°æ ‡å‡†" class="headerlink" title="è¡¨ç°è¯„ä¼°æ ‡å‡†"></a>è¡¨ç°è¯„ä¼°æ ‡å‡†</h3><h4 id="å‡½æ•°é—´éš”å’Œå‡ ä½•é—´éš”"><a href="#å‡½æ•°é—´éš”å’Œå‡ ä½•é—´éš”" class="headerlink" title="å‡½æ•°é—´éš”å’Œå‡ ä½•é—´éš”"></a>å‡½æ•°é—´éš”å’Œå‡ ä½•é—´éš”</h4><p>å¯¹äºä¸Šé¢çš„ä¸‰ä¸ªè¶…å¹³é¢å¯ä»¥å¾ˆè‡ªç„¶çš„å¾—å‡ºç›´çº¿æ‰€å¯¹åº”çš„æ˜¯è¾ƒå¥½çš„ï¼Œå¾ˆç›´è§‚å¾—å¯ä»¥çœ‹åˆ°å®ƒä¸ä¸¤ä¸ªç±»åˆ«ä¸­ä¸å…¶æœ€è¿‘çš„ç‚¹å¯¹åº”çš„è·ç¦»è¾ƒå¤§ï¼Œè€Œä¸”è¿™æ¡ç›´çº¿å¯¹ä¸€äº›outlierçš„è¡¨ç°ä¹Ÿæ¯”è¾ƒå¥½ï¼Œå³<strong>æ³›åŒ–èƒ½åŠ›</strong>ã€‚æ‰€ä»¥å¼•å…¥å‡½æ•°é—´éš”æ¥è¿›è¡Œè¡¡é‡ã€‚å‡½æ•°é—´éš”çš„å«ä¹‰å°±æ˜¯è¡¨ç¤ºåˆ†ç±»çš„æ­£ç¡®æ€§åŠç¡®ä¿¡åº¦ï¼Œå¯¹äºè·ç¦»è¶…å¹³é¢è¾ƒè¿œçš„æ ·æœ¬ï¼Œå…¶é¢„æµ‹çš„ç¡®ä¿¡åº¦è¾ƒé«˜ï¼Œåä¹‹è·ç¦»è¾ƒè¿œçš„æ ·æœ¬ï¼Œå…¶é¢„æµ‹çš„ç¡®ä¿¡åº¦è¾ƒä½ã€‚å¯¹äºç»™å®šçš„æŸä¸ªæ ·æœ¬ç‚¹($x_{i}$,$y_{i}$),æˆ‘ä»¬å®šä¹‰è¶…å¹³é¢å…³äºè¯¥æ ·æœ¬ç‚¹çš„å‡½æ•°é—´éš”ä¸º$$\hat\gamma_{i}=y_{i}(w{\cdot}x_{i}+b)\qquad (2)$$<br>é‚£ä¹ˆåœ¨æ‰€æœ‰æ ·æœ¬ä¸­çš„æœ€å°å‡½æ•°é—´éš”å°±ä¸º$$\hat{\gamma}=min\ \hat\gamma_{i},i=1,â€¦,N\qquad (3)$$<br>è™½ç„¶å‡½æ•°é—´éš”å¯ä»¥è¡¨ç¤ºåˆ†ç±»é¢„æµ‹çš„ç¡®ä¿¡åº¦ï¼Œä½†æ˜¯å®ƒæ˜¯<strong>ç›¸å¯¹</strong>çš„ã€‚å¦‚æœæˆ‘ä»¬æˆæ¯”ä¾‹çš„æ”¹å˜wå’Œbï¼Œè¶…å¹³é¢å¹¶æ²¡æœ‰æ”¹å˜ï¼Œä½†æ˜¯å‡½æ•°é—´éš”å´å˜æˆäº†åŸæ¥çš„ä¸¤å€ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨å‡ ä½•é—´éš”æ¥æ›¿æ¢å‡½æ•°é—´éš”ã€‚å‡ ä½•é—´éš”ä¹Ÿå°±æ˜¯æ ·æœ¬åˆ°è¶…å¹³é¢çš„å‡ ä½•è·ç¦»ï¼Œè®°ä½œ$\gamma_{i}$,$$\gamma_{i}=y_{i}(\frac {w}{||w||} {\cdot}x_{i}+ \frac {b}{||w||})\qquad (4)$$<br>||w||ä¸ºwçš„$L_{2}$èŒƒæ•°ï¼Œå…¶ä¸­$y_{i}$è¡¨ç¤ºäº†$y_{i}$ç­‰ä¸1å’Œ-1çš„æƒ…å†µã€‚é‚£ä¹ˆåœ¨æ‰€æœ‰æ ·æœ¬ä¸­çš„æœ€å°å‡ ä½•é—´éš”å°±ä¸º$${\gamma}=min\ {\gamma}_{i}, i=1,â€¦,N\qquad (5)$$</p><h4 id="é—´éš”æœ€å¤§åŒ–"><a href="#é—´éš”æœ€å¤§åŒ–" class="headerlink" title="é—´éš”æœ€å¤§åŒ–"></a>é—´éš”æœ€å¤§åŒ–</h4><p>æ ¹æ®ä¸Šé¢(5)ï¼Œå¯ä»¥å°†æœ€å¤§åŒ–é—®é¢˜è¡¨ç¤ºä¸‹é¢çš„çº¦æŸæœ€ä¼˜åŒ–é—®é¢˜ï¼š$$max\ \gamma\qquad(6)$$<br>$$s.t.\quad y_{i}(\frac {w}{||w||} {\cdot}x_{i}+ \frac {b}{||w||})\geq\gamma,\ i=1,2,â€¦,N\qquad(7)$$<br>æ ¹æ®(2)~(5)ï¼Œå¯ä»¥æ¨å‡º$$\gamma_{i}=\frac {\hat\gamma_{i}}{||w||}\qquad (8)$$$$\gamma=\frac{\hat\gamma}{||w||}\qquad (9)$$<br>æ ¹æ®(9)ï¼Œæ±‚è§£(6)çš„é—®é¢˜å°±å¯ä»¥è½¬åŒ–æˆ$$max\;\frac{\hat\gamma}{||w||}\qquad(10)$$$$s.t.\quad y_{i}(\frac {w}{||w||} {\cdot}x_{i}+ \frac {b}{||w||})\geq\gamma,\ i=1,2,â€¦,N\qquad(11)$$<br>åœ¨ä¹‹å‰çš„æ¨å¯¼è¿‡ç¨‹ä¸­æåˆ°è¿‡å¯¹wå’ŒbæŒ‰æ¯”ä¾‹è¿›è¡Œæ”¾å¤§ç¼©å°å¯¹æ±‚è§£å¹¶ä¸ä¼šäº§ç”Ÿå½±å“ï¼Œæ‰€ä»¥å¾—åˆ°ä»å‡½æ•°é—´éš”åˆ°å‡ ä½•é—´éš”çš„è½¬åŒ–ã€‚ç°åœ¨ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå°†wå’Œbè¿›è¡Œç¼©æ”¾ï¼Œä¹Ÿå°±æ˜¯å¯¹$\hat\gamma$è¿›è¡Œç¼©æ”¾ï¼Œå¯¹æ±‚è§£ç»“æœåŒæ ·ä¹Ÿä¸ä¼šäº§ç”Ÿå½±å“ï¼Œæ‰€ä»¥æˆ‘ä»¬å–$\hat\gamma=1$ï¼Œè¿›è¡Œè¿™ä¸€æ­¥ä¸»è¦æ˜¯ç®€åŒ–ä¹‹åçš„æ•°å­¦è®¡ç®—ã€‚æ­¤æ—¶é—®é¢˜è½¬åŒ–ä¸º$max\;\frac{1}{||w||}$,è€Œ$\frac{1}{||w||}$ æ­£å¥½æ˜¯å‡ ä½•é—´éš”ã€‚è¿›ä¸€æ­¥å¯ä»¥å‘ç°æœ€å¤§åŒ–$\frac{1}{||w||}$ å’Œæœ€å°åŒ–$\frac{1}{2}||w||^{2}$ æ˜¯ç­‰ä»·çš„ï¼Œè‡³æ­¤(10)å°±è½¬æ¢æˆä»¥ä¸‹çš„æœ€ä¼˜åŒ–é—®é¢˜ï¼š$$min\ \frac{1}{2}\ ||w||^{2}\qquad(12)$$$$s.t.\quad y_{i}(\frac{w}{||w||}\cdot x_{i}+ \frac {b}{||w||})-1\geq0,i=1,2,â€¦,N\qquad(13)$$ ,è¿™æ˜¯ä¸€ä¸ªå‡¸äºŒæ¬¡è§„åˆ’é—®é¢˜(å‡¸äºŒæ¬¡è§„åˆ’è¯¦ç»†å†…å®¹é“¾æ¥)ã€‚åªè¦è§£å‡º$w^{\ast}$ å’Œ$b^{\ast}$ å³å¯å¾—åˆ°è¶…å¹³é¢$w^{\ast}\cdot x+b^{\ast}=0$ å’Œåˆ†ç±»å†³ç­–å‡½æ•°$f(x)=w^{\ast}\cdot x+b^{\ast}$ ã€‚<br>å‡ ä½•é—´éš”çš„ç›´è§‚åŒ–å¦‚ä¸‹å›¾ï¼Œæœ€ç»ˆå°±æ˜¯è¦ä½¿marginæœ€å¤§åŒ–çš„ä¸€ä¸ªé—®é¢˜(è´Ÿæ ·æœ¬å’Œæ­£æ ·æœ¬çš„marginåº”æ˜¯ä¸€æ ·çš„)ã€‚ä¸‹å›¾ä¸­ä¸¤æ¡è™šçº¿åˆ°ç›´çº¿çš„è·ç¦»å‡ä¸º$\frac{1}{||w||}$ï¼Œå®šä¹‰åœ¨è™šçº¿ä¸Šçš„ç‚¹ç§°ä¸º<strong>æ”¯æŒå‘é‡(Support vector)</strong>ã€‚$w^{\ast}$ å’Œ$b^{\ast}$ çš„æ±‚è§£è¿‡ç¨‹ä¸­å…¶å®åªä¼šå—æ”¯æŒå‘é‡çš„å½±å“ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿåœ¨ä¹‹åçš„ä¸€ç¯‡æ•°å­¦æ¨å¯¼ä¼šç»™å‡ºè¯æ˜ã€‚<br><img src="https://f002.backblazeb2.com/file/freelee/image/figure2_3.jpg" alt=""><br>åˆ°è¿™é‡Œï¼Œå¯¹SVMåº”è¯¥æœ‰äº†ä¸€ä¸ªç®€å•çš„è®¤è¯†ã€‚æ€»çš„æ¥è¯´ï¼ŒSVMå°±æ˜¯è¦æ‰¾å‡ºä¸€ä¸ªè¶…å¹³é¢ï¼Œä½¿ä¸¤ç±»æ ·æœ¬ç‚¹ä¸­æ‰€æœ‰è·ç¦»å®ƒæœ€è¿‘çš„ç‚¹ï¼Œéƒ½å°½å¯èƒ½çš„ç¦»å®ƒè¿œã€‚<br><em>To be continue</em></p>]]></content>
      
      <categories>
          
          <category> Machine Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Machine Learning </tag>
            
            <tag> margin </tag>
            
            <tag> hypeplane </tag>
            
            <tag> classfication </tag>
            
        </tags>
      
    </entry>
    
  
  
    
    <entry>
      <title></title>
      <link href="/baidu_verify_D4umA77Wgx.html"/>
      <url>/baidu_verify_D4umA77Wgx.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script>D4umA77Wgx]]></content>
    </entry>
    
    <entry>
      <title></title>
      <link href="/baidu_verify_PQgHckNDnk.html"/>
      <url>/baidu_verify_PQgHckNDnk.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script>PQgHckNDnk]]></content>
    </entry>
    
    <entry>
      <title></title>
      <link href="/baidu_verify_w2CJZAKCk7.html"/>
      <url>/baidu_verify_w2CJZAKCk7.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script>w2CJZAKCk7]]></content>
    </entry>
    
    <entry>
      <title></title>
      <link href="/googlea4979d339ced872b.html"/>
      <url>/googlea4979d339ced872b.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script>google-site-verification: googlea4979d339ced872b.html]]></content>
    </entry>
    
    <entry>
      <title></title>
      <link href="/581/style.css"/>
      <url>/581/style.css</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script>body{margin:0;background:#222;margin:20px}svg{width:100%;height:100%;position:fixed;top:0;left:0}span{color:#fff;font-family:sans-serif;opacity:.3}]]></content>
    </entry>
    
    <entry>
      <title></title>
      <link href="/581/index.js"/>
      <url>/581/index.js</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script>var svg=document.querySelector("svg"),cursor=svg.createSVGPoint(),arrows=document.querySelector(".arrows"),randomAngle=0,target={x:900,y:249.5},lineSegment={x1:875,y1:280,x2:925,y2:220};function knock(e){randomAngle=Math.random()*Math.PI*.03-.015,TweenMax.to(".arrow-angle use",.3,{opacity:1}),window.addEventListener("mousemove",aim),window.addEventListener("mouseup",loose),aim(e),TweenMax.to("#arc",.3,{opacity:1})}function loose(){window.removeEventListener("mousemove",aim),window.removeEventListener("mouseup",loose),TweenMax.to("#bow",.4,{scaleX:1,transformOrigin:"right center",ease:Elastic.easeOut}),TweenMax.to("#bow polyline",.4,{attr:{points:"88,200 88,250 88,300"},ease:Elastic.easeOut});var e=document.createElementNS("http://www.w3.org/2000/svg","use");e.setAttributeNS("http://www.w3.org/1999/xlink","href","#arrow"),arrows.appendChild(e);var t=MorphSVGPlugin.pathDataToBezier("#arc");TweenMax.to([e],.5,{force3D:!0,bezier:{type:"cubic",values:t,autoRotate:["x","y","rotation"]},onUpdate:hitTest,onUpdateParams:["{self}"],onComplete:onMiss,ease:Linear.easeNone}),TweenMax.to("#arc",.3,{opacity:0}),TweenMax.set(".arrow-angle use",{opacity:0})}function hitTest(e){var t=e.target[0]._gsTransform,a=t.rotation*Math.PI/180,n=getIntersection({x1:t.x,y1:t.y,x2:60*Math.cos(a)+t.x,y2:60*Math.sin(a)+t.y},lineSegment);if(n.segment1&&n.segment2){e.pause();var o=n.x-target.x,r=n.y-target.y,s=".hit";Math.sqrt(o*o+r*r)<7&&(s=".bullseye"),showmessage(s)}}function onmiss(){showmessage(".miss")}function="" showmessage(e){tweenmax.killtweensof(e),tweenmax.killchildtweensof(e),tweenmax.set(e,{autoalpha:1}),tweenmax.staggerfromto(e+"="" path",.5,{rotation:-5,scale:0,transformorigin:"center"},{scale:1,ease:back.easeout},.05),tweenmax.staggerto(e+"="" path",.3,{delay:2,rotation:20,scale:0,ease:back.easein},.03)}tweenmax.set(".point",{attr:{cx:target.x,cy:target.y}}),window.addeventlistener("mousedown",knock);var="" pivot="{x:100,y:250};function" aim(e){var="" t="getMouseSVG(e);t.x=Math.min(t.x,pivot.x-7),t.y=Math.max(t.y,pivot.y+7);var" a="t.x-pivot.x,n=t.y-pivot.y,o=Math.atan2(n,a)+randomAngle-Math.PI,r=Math.min(Math.sqrt(a*a+n*n),50),s=Math.min(Math.max(r/30,1),2);TweenMax.to("#bow",.3,{scaleX:s,rotation:o+"rad",transformOrigin:"right" center"});math.min(pivot.x-1="" s*r,88);tweenmax.to(".arrow-angle",.3,{rotation:o+"rad",svgorigin:"100="" 250"}),tweenmax.to(".arrow-angle="" use",.3,{x:-r}),tweenmax.to("#bow="" polyline",.3,{attr:{points:"88,200="" "+math.min(pivot.x-1="" s*r,88)+",250="" 88,300"}});var="" i="9*r,c=Math.cos(o)*i,w=Math.sin(o)*i,x=3*c;TweenMax.to("#arc",.3,{attr:{opacity:1.4-x/800,d:"M100,250c"+c+","+w+","+(x-c)+","+(w+50)+","+x+",50"}})}function" getmousesvg(e){return="" cursor.x="e.clientX,cursor.y=e.clientY,cursor.matrixTransform(svg.getScreenCTM().inverse())}function" getintersection(e,t){var="" null;var="" w="(o*i-r*s)/c,x=(a*i-n*s)/c;return{x:e.x1+w*a,y:e.y1+w*n,segment1:w">=0&&w<=1,segment2:x>=0&&x</=1,segment2:x></7&&(s=".bullseye"),showmessage(s)}}function>]]></content>
    </entry>
    
    <entry>
      <title>Who am I</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><blockquote><p>å…³äºæˆ‘</p></blockquote><ul><li>æµ™æ±Ÿç†å·¥å¤§å­¦ è®¡ç®—æœºä¸“ä¸šå¤§ä¸‰åœ¨è¯»</li><li><p>è½»åº¦ä¸­äºŒï¼Œè½»åº¦ç¤¾äº¤ææƒ§</p></li><li><p>åçˆ±ç®€çº¦ï¼Œå–œæ¬¢ç”Ÿæ´»å……æ»¡æ–°é²œæ„Ÿ</p></li><li>ä¼šç‚¹Javaï¼Œç›®å‰æ­£åœ¨å­¦ä¹ æ­å»ºåå°é¡¹ç›®</li></ul><blockquote><p>è”ç³»æˆ‘</p></blockquote><p>Mailï¼š<a href="mailto:871560465@qq.com" target="_blank" rel="noopener">871560465@qq.com</a></p><p>Steamï¼šFreeleeï¼ˆä¸€èµ·Play Gameå•Šï¼‰</p><p>githubï¼š<a href="https://github.com/LJP-Perfect" target="_blank" rel="noopener">https://github.com/LJP-Perfect</a></p>]]></content>
    </entry>
    
    <entry>
      <title>å›¾åº“</title>
      <link href="/gallery/index.html"/>
      <url>/gallery/index.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script>]]></content>
    </entry>
    
    <entry>
      <title>game</title>
      <link href="/game/index.html"/>
      <url>/game/index.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><blockquote class="blockquote-center"><p><font size="4"><br><script src="https://f002.backblazeb2.com/file/freelee/js/ityped.min.js"></script><br><body><br><span class="ityped"></span><br><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":75,"height":150,"scaling":2,"horizontalOffset":10,"verticalOffset":-40},"mobile":{"show":false,"Scaling":0.5},"log":false,"tagMode":false});</script></body><br><script><br>   window.ityped.init(document.querySelector(â€˜.itypedâ€™), {<br>   strings : [â€˜          å¤§æˆ˜ä¸‰ç™¾å›åˆâ€™],<br>   //å¯ä»¥å†™æ— é™æ¡å¥å­ï¼Œåªè¦ç”¨é€—å·éš”å¼€<br>   typeSpeed: 155, //æ‰“å­—çš„é€Ÿåº¦<br>   backSpeed: 60, //åˆ é™¤å­—çš„é€Ÿåº¦<br>   startDelay: 500, //æ¯ä¸€å¥å¼€å§‹æ‰“å­—åœé¡¿çš„æ—¶é—´<br>   backDelay: 2500, //æ¯ä¸€å¥åˆ é™¤å­—çš„åœé¡¿æ—¶é—´<br>   loop: false, //æ˜¯å¦å¾ªç¯åŠ¨ç”»<br>   showCursor: true, //æ˜¯å¦æ˜¾ç¤ºå…‰æ ‡<br>   cursorChar: â€œï¸³â€,   //è®¾ç½®å…‰æ ‡å­—ç¬¦<br>     });<br></script><br><style></style></font><br></p></blockquote><p>#<a href="/581/index.html">Bullseye</a></p>]]></content>
    </entry>
    
    <entry>
      <title>games</title>
      <link href="/games/index.html"/>
      <url>/games/index.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script><blockquote class="blockquote-center"><p><font size="4"><br><script src="https://f002.backblazeb2.com/file/freelee/js/ityped.min.js"></script><br><body><br><span class="ityped"></span><br><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":75,"height":150,"scaling":2,"horizontalOffset":10,"verticalOffset":-40},"mobile":{"show":false,"Scaling":0.5},"log":false,"tagMode":false});</script></body><br><br><script><br>   window.ityped.init(document.querySelector(â€˜.itypedâ€™), {<br>   strings : [â€˜          ç½‘ç˜¾å°‘å¹´(å¥³)ä»¬ï¼Œå¿«ç©æ¸¸æˆå§â€™],<br>   //å¯ä»¥å†™æ— é™æ¡å¥å­ï¼Œåªè¦ç”¨é€—å·éš”å¼€<br>   typeSpeed: 155, //æ‰“å­—çš„é€Ÿåº¦<br>   backSpeed: 60, //åˆ é™¤å­—çš„é€Ÿåº¦<br>   startDelay: 500, //æ¯ä¸€å¥å¼€å§‹æ‰“å­—åœé¡¿çš„æ—¶é—´<br>   backDelay: 2500, //æ¯ä¸€å¥åˆ é™¤å­—çš„åœé¡¿æ—¶é—´<br>   loop: false, //æ˜¯å¦å¾ªç¯åŠ¨ç”»<br>   showCursor: true, //æ˜¯å¦æ˜¾ç¤ºå…‰æ ‡<br>   cursorChar: â€œï¸³â€,   //è®¾ç½®å…‰æ ‡å­—ç¬¦<br>     });<br></script><br><style></style></font><br></p></blockquote><p>#<a href="/581/index.html">Bullseye</a></p>]]></content>
    </entry>
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script>]]></content>
    </entry>
    
    <entry>
      <title>timeline</title>
      <link href="/timeline/index.html"/>
      <url>/timeline/index.html</url>
      <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://unpkg.com/meting@2.0.1/dist/Meting.min.js"></script>]]></content>
    </entry>
    
  
</search>
